<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>æ‰€æœ‰æ–‡ç«  on tangzixiang&#39;s blog</title>
		<link>https://tangzixiang.github.io/posts/</link>
		<description>Recent content in æ‰€æœ‰æ–‡ç«  on tangzixiang&#39;s blog</description>
		<generator>Hugo -- gohugo.io</generator>
		<language>en-us</language>
		<copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright>
		<lastBuildDate>Sun, 05 Jan 2020 17:56:18 +0800</lastBuildDate>
		<atom:link href="https://tangzixiang.github.io/posts/index.xml" rel="self" type="application/rss+xml" />
		
		<item>
			<title>tmux å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼</title>
			<link>https://tangzixiang.github.io/posts/tmux/</link>
			<pubDate>Sun, 05 Jan 2020 17:56:18 +0800</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/tmux/</guid>
			<description>å¦‚æœå®‰è£…ä¸æˆåŠŸéœ€è¦æŠŠä»“åº“ clone ä¸‹æ¥é€šè¿‡ makefile å®‰è£…
å‚è€ƒï¼š
 é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—:Tmux ä½¿ç”¨æ•™ç¨‹ Tmuxå…¥é—¨æ•™ç¨‹ - æ˜é‡‘ tmuxåŸºæœ¬æ“ä½œ å¼ºå¤§çš„tmux tmux GitHub åœ°å€  tmux å¯ä»¥é…åˆè¿™ä¸ªé¡¹ç›® ï¼š</description>
			<content type="html"><![CDATA[<p>å¦‚æœå®‰è£…ä¸æˆåŠŸéœ€è¦æŠŠä»“åº“ clone ä¸‹æ¥é€šè¿‡ makefile å®‰è£…</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—:Tmux ä½¿ç”¨æ•™ç¨‹</a></li>
<li><a href="https://juejin.im/post/5a8917336fb9a0633e51ddb9">Tmuxå…¥é—¨æ•™ç¨‹ - æ˜é‡‘</a></li>
<li><a href="https://www.cnblogs.com/liuguanglin/p/9290345.html">tmuxåŸºæœ¬æ“ä½œ</a></li>
<li><a href="https://www.jianshu.com/p/ec2689e2f1f3">å¼ºå¤§çš„tmux</a></li>
<li><a href="https://github.com/tmux/tmux">tmux GitHub åœ°å€</a></li>
</ul>
<p>tmux å¯ä»¥é…åˆ<a href="https://github.com/gpakosz/.tmux">è¿™ä¸ªé¡¹ç›®</a> ï¼š
<a href="https://github.com/gpakosz/.tmux"><img src="https://cloud.githubusercontent.com/assets/553208/19740585/85596a5a-9bbf-11e6-8aa1-7c8d9829c008.gif" alt=""></a></p>
]]></content>
		</item>
		
		<item>
			<title>screen å‘½ä»¤çš„ä½¿ç”¨æ–¹å¼</title>
			<link>https://tangzixiang.github.io/posts/screen/</link>
			<pubDate>Sun, 05 Jan 2020 17:56:12 +0800</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/screen/</guid>
			<description>~ $ screen -h Use: screen [-opts] [cmd [args]] or: screen -r [host.tty] Options: -a Force all capabilities into each window&amp;#39;s termcap. -A -[r|R] Adapt all windows to the new display width &amp;amp; height. -c file Read configuration file instead of &amp;#39;.screenrc&amp;#39;. -d (-r) Detach the elsewhere running screen (and reattach here). -dmS name Start as daemon: Screen session in detached mode. -D (-r) Detach and logout remote (and reattach here).</description>
			<content type="html"><![CDATA[<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">~ $ screen -h
Use: screen <span class="o">[</span>-opts<span class="o">]</span> <span class="o">[</span>cmd <span class="o">[</span>args<span class="o">]</span><span class="o">]</span>
 or: screen -r <span class="o">[</span>host.tty<span class="o">]</span>

Options:
-a            Force all capabilities into each window<span class="s1">&#39;s termcap.
</span><span class="s1">-A -[r|R]     Adapt all windows to the new display width &amp; height.
</span><span class="s1">-c file       Read configuration file instead of &#39;</span>.screenrc<span class="s1">&#39;.
</span><span class="s1">-d (-r)       Detach the elsewhere running screen (and reattach here).
</span><span class="s1">-dmS name     Start as daemon: Screen session in detached mode.
</span><span class="s1">-D (-r)       Detach and logout remote (and reattach here).
</span><span class="s1">-D -RR        Do whatever is needed to get a screen session.
</span><span class="s1">-e xy         Change command characters.
</span><span class="s1">-f            Flow control on, -fn = off, -fa = auto.
</span><span class="s1">-h lines      Set the size of the scrollback history buffer.
</span><span class="s1">-i            Interrupt output sooner when flow control is on.
</span><span class="s1">-list         or -ls. Do nothing, just list our SockDir.
</span><span class="s1">-L            Turn on output logging.
</span><span class="s1">-m            ignore $STY variable, do create a new screen session.
</span><span class="s1">-O            Choose optimal output rather than exact vt100 emulation.
</span><span class="s1">-p window     Preselect the named window if it exists.
</span><span class="s1">-q            Quiet startup. Exits with non-zero return code if unsuccessful.
</span><span class="s1">-r            Reattach to a detached screen process.
</span><span class="s1">-R            Reattach if possible, otherwise start a new session.
</span><span class="s1">-s shell      Shell to execute rather than $SHELL.
</span><span class="s1">-S sockname   Name this session &lt;pid&gt;.sockname instead of &lt;pid&gt;.&lt;tty&gt;.&lt;host&gt;.
</span><span class="s1">-t title      Set title. (window&#39;</span>s name<span class="o">)</span>.
-T term       Use term as <span class="nv">$TERM</span> <span class="k">for</span> windows, rather than <span class="s2">&#34;screen&#34;</span>.
-U            Tell screen to use UTF-8 encoding.
-v            Print <span class="s2">&#34;Screen version 4.00.03 (FAU) 23-Oct-06&#34;</span>.
-wipe         Do nothing, just clean up SockDir.
-x            Attach to a not detached screen. <span class="o">(</span>Multi display mode<span class="o">)</span>.
-X            Execute &lt;cmd&gt; as a screen <span class="nb">command</span> in the specified session.
</code></pre></div><p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://blog.csdn.net/yizhang_ml/article/details/79632316">screenå‘½ä»¤çš„å¸¸è§ç”¨æ³•</a></li>
<li><a href="https://www.jianshu.com/p/0702a451dd0c">screenç”¨äºå‘½ä»¤è¡Œç»ˆç«¯åˆ‡æ¢</a></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title>[GO] å¤§ç¥æ˜¯å¦‚ä½•å­¦ä¹  Go è¯­è¨€ä¹‹å†™å‡ºä¼˜é›…çš„ Go ä»£ç </title>
			<link>https://tangzixiang.github.io/posts/%E5%A4%A7%E7%A5%9E%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0-go-%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%86%99%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84-go-%E4%BB%A3%E7%A0%81/</link>
			<pubDate>Fri, 03 Jan 2020 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E5%A4%A7%E7%A5%9E%E6%98%AF%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0-go-%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%86%99%E5%87%BA%E4%BC%98%E9%9B%85%E7%9A%84-go-%E4%BB%A3%E7%A0%81/</guid>
			<description></description>
			<content type="html"><![CDATA[]]></content>
		</item>
		
		<item>
			<title>[GO] å¦‚ä½•æ­£ç¡®çš„å¼€å§‹ç”¨Goç¼–ç¨‹</title>
			<link>https://tangzixiang.github.io/posts/%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%BC%80%E5%A7%8B%E7%94%A8-go-%E7%BC%96%E7%A8%8B/</link>
			<pubDate>Fri, 03 Jan 2020 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E5%A6%82%E4%BD%95%E6%AD%A3%E7%A1%AE%E7%9A%84%E5%BC%80%E5%A7%8B%E7%94%A8-go-%E7%BC%96%E7%A8%8B/</guid>
			<description></description>
			<content type="html"><![CDATA[]]></content>
		</item>
		
		<item>
			<title>æ‚¨å¿…é¡»çŸ¥é“çš„ Git åˆ†æ”¯å¼€å‘è§„èŒƒï¼Œé™„ Git å¸¸ç”¨å‘½ä»¤å¤§å…¨ï¼</title>
			<link>https://tangzixiang.github.io/posts/%E6%82%A8%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84-git-%E5%88%86%E6%94%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E9%99%84-git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</link>
			<pubDate>Fri, 03 Jan 2020 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%82%A8%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84-git-%E5%88%86%E6%94%AF%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83%E9%99%84-git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</guid>
			<description></description>
			<content type="html"><![CDATA[]]></content>
		</item>
		
		<item>
			<title>è®°ä¸€æ¬¡å¦‚ä½•åœ¨ windows ä¸‹æ·»åŠ  GitHub çš„ SSH Key</title>
			<link>https://tangzixiang.github.io/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A6%82%E4%BD%95%E5%9C%A8-windows-%E4%B8%8B%E6%B7%BB%E5%8A%A0-github-%E7%9A%84-ssh-key/</link>
			<pubDate>Thu, 02 Jan 2020 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%A6%82%E4%BD%95%E5%9C%A8-windows-%E4%B8%8B%E6%B7%BB%E5%8A%A0-github-%E7%9A%84-ssh-key/</guid>
			<description>ğŸ¢ : mac; ğŸ  : windows
æ‘˜è¦  ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ Git Bash è¾“å…¥å‘½ä»¤ç”Ÿæˆ ssh key å°† ssh key åŠ å…¥ ssh-agent å°†å…¬é’¥åŠ å…¥åˆ° GitHub ä¸Š æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ  ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ Git Bash è¾“å…¥å‘½ä»¤ç”Ÿæˆ ssh key åœ¨å®‰è£…å¥½ Git åå³é”®ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ–¹å¼æ‰“å¼€ä¸‹å›¾çš„ Git Bash
ä½¿ç”¨è¯¥å‘½ä»¤ç”Ÿæˆä¸ªäººè´¦å·çš„å¯†é’¥å¯¹ï¼Œå¼•å·å†…å®¹ä¸ºä¸ªäººç™»å½•è´¦å·
$ ssh-keygen -t rsa -b 4096 -C &amp;#34;your_email@example.com&amp;#34;å›è½¦åä¼šè¦æ±‚è¾“å…¥ç”Ÿæˆçš„æ–‡ä»¶åï¼Œå¦‚æœä¸çŸ¥é“ç›´æ¥å›è½¦ç”Ÿæˆçš„æ–‡ä»¶åä¸º id_rasï¼Œè¿™é‡Œä¸¾ä¾‹ä½¿ç”¨é‚®ç®±åä½œä¸ºå‰ç¼€ï¼Œå®Œæˆåä¼šè¿ç»­ä¸¤æ¬¡è¦æ±‚è¾“å…¥å¯†ç ï¼Œå¯ä»¥ä¸æŒ‡å®šå¯†ç ï¼Œç›´æ¥ä¸¤æ¬¡å›è½¦ï¼Œæœ€ç»ˆæç¤ºå®Œæˆå¦‚ä¸‹å›¾ï¼š
å®Œæˆåæ‰“å¼€æ–‡ä»¶å¤¹å®‰è£…å‰é¢çš„è·¯å¾„å³ C:\Users\user-name\.ssh ç›®å½•ï¼Œæ­£å¸¸æƒ…å†µè¯¥ç›®å½•ä¼šå­˜åœ¨å‰é¢ç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰çš„è¯éœ€è¦è‡ªå·±åˆ›å»ºè¿™ä¸ªç›®å½•ç„¶ååœ¨ä¸Šä¸€çº§ç›®å½•å³ C:\Users\user-name ä¸‹æ‰¾åˆ°å¯¹åº”çš„ä¸¤ä¸ªç”Ÿæˆçš„æ–‡ä»¶ï¼ˆå¯†é’¥å¯¹ï¼‰å¹¶ç§»å…¥ C:\Users\user-name\.ssh ç›®å½•ï¼Œç”±äºå‰é¢æˆ‘ä»¬å¯¹ç”Ÿæˆçš„å¯†é’¥å¯¹æ”¹äº†åï¼Œæ‰€ä»¥æ‰¾åˆ°çš„åº”è¯¥æ˜¯ your_email_id_rsa åŠ your_email_id_rsa.pub æ–‡ä»¶ï¼Œè‹¥ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶ååˆ™æ‰¾åˆ°çš„åº”è¯¥æ˜¯ id_rsa åŠ id_rsa.pub
å°† ssh key åŠ å…¥ ssh-agent ç»§ç»­è¾“å…¥ä»¥ä¸‹å‘½ä»¤,å¯åŠ¨ ssh-agent
$ eval $(ssh-agent -s)Agent pid 59566å°†å‰é¢ç”Ÿæˆçš„å¯†é’¥åŠ å…¥ ssh-agent</description>
			<content type="html"><![CDATA[<p>ğŸ¢ : mac;
ğŸ  : windows</p>
<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ Git Bash è¾“å…¥å‘½ä»¤ç”Ÿæˆ ssh key</li>
<li>å°† ssh key åŠ å…¥ ssh-agent</li>
<li>å°†å…¬é’¥åŠ å…¥åˆ° GitHub ä¸Š</li>
<li>æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ</li>
</ul>
<h2 id="-git-bash--ssh-key">ç®¡ç†å‘˜æ–¹å¼æ‰“å¼€ Git Bash è¾“å…¥å‘½ä»¤ç”Ÿæˆ ssh key</h2>
<p>åœ¨å®‰è£…å¥½ Git åå³é”®ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½è¿è¡Œæ–¹å¼æ‰“å¼€ä¸‹å›¾çš„ Git Bash</p>
<p><img src="/assets/image-20200102214159479.png" alt="image-20200102214159479"></p>
<p>ä½¿ç”¨è¯¥å‘½ä»¤ç”Ÿæˆä¸ªäººè´¦å·çš„å¯†é’¥å¯¹ï¼Œå¼•å·å†…å®¹ä¸ºä¸ªäººç™»å½•è´¦å·</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh-keygen -t rsa -b <span class="m">4096</span> -C <span class="s2">&#34;your_email@example.com&#34;</span>
</code></pre></div><p>å›è½¦åä¼šè¦æ±‚è¾“å…¥ç”Ÿæˆçš„æ–‡ä»¶åï¼Œå¦‚æœä¸çŸ¥é“ç›´æ¥å›è½¦ç”Ÿæˆçš„æ–‡ä»¶åä¸º id_rasï¼Œè¿™é‡Œä¸¾ä¾‹ä½¿ç”¨é‚®ç®±åä½œä¸ºå‰ç¼€ï¼Œå®Œæˆåä¼šè¿ç»­ä¸¤æ¬¡è¦æ±‚è¾“å…¥å¯†ç ï¼Œå¯ä»¥ä¸æŒ‡å®šå¯†ç ï¼Œç›´æ¥ä¸¤æ¬¡å›è½¦ï¼Œæœ€ç»ˆæç¤ºå®Œæˆå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/assets/image-20200102214847378.png" alt="image-20200102214847378"></p>
<p>å®Œæˆåæ‰“å¼€æ–‡ä»¶å¤¹å®‰è£…å‰é¢çš„è·¯å¾„å³ <code>C:\Users\user-name\.ssh</code> ç›®å½•ï¼Œæ­£å¸¸æƒ…å†µè¯¥ç›®å½•ä¼šå­˜åœ¨å‰é¢ç”Ÿæˆçš„ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰çš„è¯éœ€è¦è‡ªå·±åˆ›å»ºè¿™ä¸ªç›®å½•ç„¶ååœ¨ä¸Šä¸€çº§ç›®å½•å³ <code>C:\Users\user-name</code>  ä¸‹æ‰¾åˆ°å¯¹åº”çš„ä¸¤ä¸ªç”Ÿæˆçš„æ–‡ä»¶ï¼ˆå¯†é’¥å¯¹ï¼‰å¹¶ç§»å…¥  <code>C:\Users\user-name\.ssh</code> ç›®å½•ï¼Œç”±äºå‰é¢æˆ‘ä»¬å¯¹ç”Ÿæˆçš„å¯†é’¥å¯¹æ”¹äº†åï¼Œæ‰€ä»¥æ‰¾åˆ°çš„åº”è¯¥æ˜¯ <code>your_email_id_rsa</code> åŠ <code>your_email_id_rsa.pub</code> æ–‡ä»¶ï¼Œè‹¥ä½¿ç”¨é»˜è®¤çš„æ–‡ä»¶ååˆ™æ‰¾åˆ°çš„åº”è¯¥æ˜¯ <code>id_rsa</code> åŠ <code>id_rsa.pub</code></p>
<h2 id="-ssh-key--sshagent">å°† ssh key åŠ å…¥ ssh-agent</h2>
<p>ç»§ç»­è¾“å…¥ä»¥ä¸‹å‘½ä»¤,å¯åŠ¨ ssh-agent</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ <span class="nb">eval</span> <span class="k">$(</span>ssh-agent -s<span class="k">)</span>
Agent pid 59566
</code></pre></div><p>å°†å‰é¢ç”Ÿæˆçš„å¯†é’¥åŠ å…¥ ssh-agent</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh-add ~/.ssh/your_email_id_rsa <span class="c1">## id_rsa</span>
Identity added: /c/Users/user-name/.ssh/your_email_id_rsa <span class="o">(</span>/c/Users/user-name/.ssh/your_email_id_rsa<span class="o">)</span>
</code></pre></div><h2 id="-github-">å°†å…¬é’¥åŠ å…¥åˆ° GitHub ä¸Š</h2>
<p>ç‚¹å‡» GitHub ä¸»é¡µå³ä¸Šè§’çš„ä½ç½®æ‰¾åˆ° settings</p>
<p><img src="https://help.github.com/assets/images/help/settings/userbar-account-settings.png" alt="Settings icon in the user bar"></p>
<p>æ¥ç€æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤æ‰¾åˆ°è¾“å…¥ key çš„åœ°æ–¹</p>
<p><img src="https://help.github.com/assets/images/help/settings/settings-sidebar-ssh-keys.png" alt="Authentication keys"></p>
<p><img src="https://help.github.com/assets/images/help/settings/ssh-add-ssh-key.png" alt="SSH Key button"></p>
<p><img src="https://help.github.com/assets/images/help/settings/ssh-key-paste.png" alt="The key field"></p>
<p>ä½¿ç”¨æ–‡æœ¬å·¥å…·æ‰“å¼€ç”Ÿæˆçš„å…¬é’¥ <code>your_email_id_rsa.pub</code> (å¯èƒ½æ˜¯ <code>id_rsa.pub</code>)ï¼Œè®²é‡Œé¢çš„å†…å®¹å¤åˆ¶å‡ºæ¥ç²˜è´´åˆ°ä¸Šé¢çš„æ–‡æœ¬æ¡†å†…ã€‚ç„¶åç‚¹å‡»æ·»åŠ å®Œæˆã€‚</p>
<p><img src="https://help.github.com/assets/images/help/settings/ssh-add-key.png" alt="The Add key button"></p>
<h2 id="heading1">æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ</h2>
<p>å®Œæˆä¹‹åéœ€è¦æµ‹è¯•éªŒè¯æ˜¯å¦èƒ½å¤Ÿæ­£å¸¸è¿æ¥åˆ° GitHub ä¸Šï¼Œç»§ç»­åœ¨å‰é¢çš„ Git Bash ä¸Šæ‰§è¡Œå‘½ä»¤</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ ssh -T git@github.com

The authenticity of host <span class="s1">&#39;github.com (IP)&#39;</span> can<span class="s1">&#39;t be established.
</span><span class="s1">RSA key fingerprint is SHA256:xxxxxx.
</span><span class="s1">Are you sure you want to continue connecting (yes/no)? yes
</span><span class="s1">Warning: Permanently added &#39;</span>github.com,IP<span class="s1">&#39; (RSA) to the list of known hosts.
</span><span class="s1">Hi your_email! You&#39;</span>ve successfully authenticated, but GitHub does not provide shell access.
</code></pre></div><p>ä¸­é€”æç¤ºæ˜¯å¦ç»§ç»­ï¼Œè¾“å…¥ <code>yes</code> å³å¯å®Œæˆæ‰€æœ‰æ­¥éª¤ã€‚</p>
<p>å…·ä½“ GitHub å®˜æ–¹æ•™ç¨‹å¦‚ä¸‹ï¼š</p>
<p><a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh"><a href="https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh">https://help.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh</a></a></p>
]]></content>
		</item>
		
		<item>
			<title>[Go] mplus ğŸš - è½»é‡çº§çš„éä¾µå…¥å¼ http è¯·æ±‚å¤„ç†è¾…åŠ©æ¡†æ¶</title>
			<link>https://tangzixiang.github.io/posts/mplus/</link>
			<pubDate>Fri, 27 Dec 2019 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/mplus/</guid>
			<description>mplus æ˜¯ä¸€ä¸ªè½»é‡çº§çš„éä¾µå…¥å¼ http è¯·æ±‚å¤„ç†è¾…åŠ©æ¡†æ¶ã€‚å…·æœ‰ä»¥ä¸‹ç‰¹è‰²ï¼š
 èƒ½å¤Ÿçµæ´»çš„å°†å¤§é‡ middleware ç»„åˆæˆä¸€ä¸ª http-Handler ç›´æ¥ä½¿ç”¨ã€‚ èƒ½å¤Ÿåœ¨è§„åˆ’è·¯ç”±çš„æ—¶å€™å®šä¹‰éœ€è¦ç»‘å®šè¯·æ±‚æ•°æ®çš„ model åŠæ ¡éªŒè§„åˆ™ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ª Handler å†…å¤„ç†ç»‘å®šåŠæ ¡éªŒé€»è¾‘ã€‚ èƒ½å¤Ÿä¸ºä½ çš„è·¯ç”±è®¾ç½®å‰ç½®æˆ–åç½®å¤„ç†å™¨ï¼ˆç±»ä¼¼ middlewareï¼‰ã€‚ æ— éœ€æ”¹å˜ä½ çš„è·¯ç”±å®šä¹‰ï¼Œå®Œå…¨å…¼å®¹ http è§„èŒƒã€‚ åœ¨ Handler å†…æ‰˜ç®¡ http.ResponseWriter åŠ http.Request ï¼Œåç»­ä»£ç é€šè¿‡ç®€ä¾¿çš„ API å®Œæˆè¯·æ±‚çš„å“åº”ã€‚ æä¾›äº† Query å¯¹è±¡ï¼Œèƒ½å¤ŸåŠ¨æ€åœ°é“¾å¼å®Œæˆ URI åŠå­—æ®µå€¼çš„æ‹¼æ¥ï¼Œè€Œéå®˜æ–¹ç¹æ‚çš„å¤„ç†æµç¨‹ã€‚ é€šè¿‡æ³¨å†Œ errCode ï¼Œè‡ªåŠ¨å®Œæˆå¯¹åº”çš„å“åº”çŠ¶æ€ç åŠå“åº”æ¶ˆæ¯å¤„ç†ã€‚ æä¾›é‡å¤è¯»å– request.Body å†…å®¹çš„ APIã€‚ çµæ´»é…åˆå…¶ä»–æ¡†æ¶ä½¿ç”¨ã€‚  å¼•å…¥ mplus  use the below Go command to install mplus  $ go get -u github.com/tangzixiang/mplus Import it in your code:  import &amp;#34;github.com/tangzixiang/mplus&amp;#34; å¿«é€Ÿå¼€å§‹ # assume the following codes in simple.</description>
			<content type="html"><![CDATA[<p><iframe src="https://ghbtns.com/github-btn.html?user=tangzixiang&repo=mplus&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>

<iframe src="https://ghbtns.com/github-btn.html?user=tangzixiang&type=follow&count=true&size=large" frameborder="0" scrolling="0" width="220px" height="30px"></iframe></p>
<p><strong>mplus</strong> æ˜¯ä¸€ä¸ªè½»é‡çº§çš„éä¾µå…¥å¼ http è¯·æ±‚å¤„ç†è¾…åŠ©æ¡†æ¶ã€‚å…·æœ‰ä»¥ä¸‹ç‰¹è‰²ï¼š</p>
<ul>
<li>èƒ½å¤Ÿçµæ´»çš„å°†å¤§é‡ middleware ç»„åˆæˆä¸€ä¸ª http-Handler ç›´æ¥ä½¿ç”¨ã€‚</li>
<li>èƒ½å¤Ÿåœ¨è§„åˆ’è·¯ç”±çš„æ—¶å€™å®šä¹‰éœ€è¦ç»‘å®šè¯·æ±‚æ•°æ®çš„ model åŠæ ¡éªŒè§„åˆ™ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ª Handler å†…å¤„ç†ç»‘å®šåŠæ ¡éªŒé€»è¾‘ã€‚</li>
<li>èƒ½å¤Ÿä¸ºä½ çš„è·¯ç”±è®¾ç½®å‰ç½®æˆ–åç½®å¤„ç†å™¨ï¼ˆç±»ä¼¼ middlewareï¼‰ã€‚</li>
<li>æ— éœ€æ”¹å˜ä½ çš„è·¯ç”±å®šä¹‰ï¼Œå®Œå…¨å…¼å®¹ http è§„èŒƒã€‚</li>
<li>åœ¨ Handler å†…æ‰˜ç®¡ <code>http.ResponseWriter</code> åŠ <code>http.Request</code> ï¼Œåç»­ä»£ç é€šè¿‡ç®€ä¾¿çš„ API å®Œæˆè¯·æ±‚çš„å“åº”ã€‚</li>
<li>æä¾›äº† Query å¯¹è±¡ï¼Œèƒ½å¤ŸåŠ¨æ€åœ°é“¾å¼å®Œæˆ <code>URI</code> åŠå­—æ®µå€¼çš„æ‹¼æ¥ï¼Œè€Œéå®˜æ–¹ç¹æ‚çš„å¤„ç†æµç¨‹ã€‚</li>
<li>é€šè¿‡æ³¨å†Œ errCode ï¼Œè‡ªåŠ¨å®Œæˆå¯¹åº”çš„å“åº”çŠ¶æ€ç åŠå“åº”æ¶ˆæ¯å¤„ç†ã€‚</li>
<li>æä¾›é‡å¤è¯»å– request.Body å†…å®¹çš„ APIã€‚</li>
<li>çµæ´»é…åˆå…¶ä»–æ¡†æ¶ä½¿ç”¨ã€‚</li>
</ul>
<h2 id="-mplus">å¼•å…¥ mplus</h2>
<ol>
<li>use the below Go command to install mplus</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-sh" data-lang="sh">$ go get -u github.com/tangzixiang/mplus
</code></pre></div><ol start="2">
<li>Import it in your code:</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">import</span> <span class="s">&#34;github.com/tangzixiang/mplus&#34;</span>
</code></pre></div><h2 id="heading">å¿«é€Ÿå¼€å§‹</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># assume the following codes in simple.go file</span>
$ cat simple.go
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;net/http&#34;</span>

	<span class="s">&#34;github.com/tangzixiang/mplus&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Hello</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// take you w,r then give you a plus
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;data&#34;</span><span class="p">:</span> <span class="s">&#34;hello world&#34;</span><span class="p">}</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># run server</span>
$ go run simple.go
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># request the server api</span>
$ curl localhost:8080

<span class="o">{</span><span class="s2">&#34;data&#34;</span>:<span class="s2">&#34;hello world&#34;</span><span class="o">}</span>
</code></pre></div><h2 id="heading1">åŠŸèƒ½</h2>
<h3 id="heading2">ä½¿ç”¨è‡ªå®šä¹‰ä¸­é—´ä»¶</h3>
<p>æ°å½“çš„ä½¿ç”¨ä¸­é—´ä»¶ï¼Œèƒ½å¤Ÿå¤§å¤§æå‡ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œä½¿ç”¨ä¸­é—´ä»¶èƒ½å¤Ÿå®ç° <a href="%5Bhttps://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%5D(https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%9A%84%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1)"><code>AOP</code></a> é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ€æƒ³ï¼Œé™ä½ä»£ç çš„è€¦åˆåº¦ã€‚</p>
<blockquote>
<p><strong>é¢å‘åˆ‡é¢çš„ç¨‹åºè®¾è®¡</strong>ï¼ˆAspect-oriented programmingï¼ŒAOPï¼Œåˆè¯‘ä½œ<strong>é¢å‘æ–¹é¢çš„ç¨‹åºè®¾è®¡</strong>ã€<strong>å‰–é¢å¯¼å‘ç¨‹åºè®¾è®¡</strong>ï¼‰æ˜¯<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6">è®¡ç®—æœºç§‘å­¦</a>ä¸­çš„ä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E7%BC%96%E7%A8%8B%E8%8C%83%E5%9E%8B">ç¨‹åºè®¾è®¡æ€æƒ³</a>ï¼Œæ—¨åœ¨å°†<strong>æ¨ªåˆ‡å…³æ³¨ç‚¹</strong>ä¸ä¸šåŠ¡ä¸»ä½“è¿›è¡Œè¿›ä¸€æ­¥åˆ†ç¦»ï¼Œä»¥æé«˜ç¨‹åºä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦</p>
</blockquote>
<p><strong>mplus</strong> çš„ä¸­é—´ä»¶åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li><strong>å‰ç½®è¯·æ±‚å¤„ç†å™¨</strong>ï¼šåªåœ¨ Handler å‰æ‰§è¡Œ</li>
<li><strong>åç½®è¯·æ±‚å¤„ç†å™¨</strong>ï¼šåªåœ¨ Handler åæ‰§è¡Œ</li>
<li><strong>middleware</strong> ï¼šè‡ªå®šä¹‰ä¸ Handler ä¹‹é—´çš„æ‰§è¡Œå…³ç³»</li>
</ul>
<h4 id="heading3">è®¾ç½®å‰ç½®è¯·æ±‚å¤„ç†å™¨å®Œæˆè®¡æ•°åŠŸèƒ½</h4>
<p>ä½¿ç”¨å‰ç½®è¯·æ±‚å¤„ç†å™¨ï¼Œèƒ½ä¸ºä½ å°† Handler å†…çš„éƒ¨åˆ†å‰ç½®é€»è¾‘è¿›è¡ŒæŠ½ç¦»ï¼Œæä¾›æ›´å¥½çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<ul>
<li><code>mplus.MRote().Before(...http.HandlerFunc)</code> ä¸ºå½“å‰è¯·æ±‚æ·»åŠ å‰ç½®è¯·æ±‚å¤„ç†</li>
<li><code>mplus.MRote().BeforeHandler(...http.Handler)</code> ä¸ºå½“å‰è¯·æ±‚æ·»åŠ å‰ç½®è¯·æ±‚å¤„ç†</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">num</span> <span class="p">=</span> <span class="mi">0</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Before</span><span class="p">(</span><span class="nx">AddNum</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Num</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// increase num per request
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">AddNum</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">num</span> <span class="o">++</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Num</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;num&#34;</span><span class="p">:</span> <span class="nx">num</span><span class="p">}</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><h4 id="heading4">åŒæ—¶ä½¿ç”¨å‰ç½®åŠåç½®è¯·æ±‚å¤„ç†å™¨æ§åˆ¶è®¿é—®é‡</h4>
<p>åŒæ ·çš„ï¼Œä½ èƒ½ä¸ºä½ çš„ Handler ä¸­çš„éƒ¨åˆ†é€»è¾‘æ·»åŠ è‡³åç½®è¯·æ±‚å¤„ç†å™¨ï¼Œåœ¨åç½®å¤„ç†å™¨ä¸­ï¼Œä½ èƒ½åšä¸€äº›ä¸å½±å“å½“å‰ä¸šåŠ¡çš„é™„å¸¦è¡Œä¸ºã€‚</p>
<ul>
<li><code>mplus.MRote().After(...http.HandlerFunc)</code> ä¸ºå½“å‰è¯·æ±‚æ·»åŠ åç½®è¯·æ±‚å¤„ç†</li>
<li><code>mplus.MRote().AfterHandler(...http.Handler)</code> ä¸ºå½“å‰è¯·æ±‚æ·»åŠ åç½®è¯·æ±‚å¤„ç†</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">lastVisitIndex</span> <span class="p">=</span> <span class="mi">0</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span>
               <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Before</span><span class="p">(</span><span class="nx">MaxVisitTimesControl</span><span class="p">)</span><span class="p">.</span><span class="nf">After</span><span class="p">(</span><span class="nx">AddNum</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Num</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// MaxVisitTimesControl as a before handler control visit times
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">MaxVisitTimesControl</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">if</span> <span class="nx">lastVisitIndex</span> <span class="p">&gt;</span> <span class="mi">10</span> <span class="p">{</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">Forbidden</span><span class="p">(</span><span class="p">)</span> <span class="c1">// return status cod 403
</span><span class="c1"></span>	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// AddNum as an after handler increase num per request
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">AddNum</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">lastVisitIndex</span> <span class="o">++</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Num</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="s">&#34;num&#34;</span><span class="p">:</span> <span class="nx">lastVisitIndex</span><span class="p">}</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><h4 id="-middleware-">ä½¿ç”¨ middleware ä¸­é—´ä»¶</h4>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ middleware çµæ´»æ§åˆ¶ä¸ Handler çš„å…³ç³»</p>
<ul>
<li><code>mplus.MRote().Use(...MiddlewareHandlerFunc)</code> ä¸ºå½“å‰è¯·æ±‚ç»„åˆä¸­é—´ä»¶</li>
<li><code>mplus.MRote().UseHandlerMiddleware(...MiddlewareHandler)</code> ä¸ºå½“å‰è¯·æ±‚ç»„åˆä¸­é—´ä»¶</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nx">SetRequestID</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Hello</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// use middleware to set requestID per request
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">SetRequestID</span><span class="p">(</span><span class="nx">next</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>
	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">w</span><span class="p">.</span><span class="nf">Header</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderRequestID</span><span class="p">,</span> <span class="nx">uuid</span><span class="p">.</span><span class="nf">Must</span><span class="p">(</span><span class="nx">uuid</span><span class="p">.</span><span class="nf">NewV4</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="c1">// &#34;X-Request-Id&#34;
</span><span class="c1"></span>
		<span class="c1">// call next ,may be is Handler or next middleware
</span><span class="c1"></span>		<span class="nx">next</span><span class="p">.</span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;data&#34;</span><span class="p">:</span> <span class="s">&#34;hello world&#34;</span><span class="p">}</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><p><strong>mplus</strong> åŒæ—¶æ”¯æŒåœ¨ middleware ä¸­ä½¿ç”¨ï¼Œé™¤äº†èƒ½å¤Ÿå¸®ä½ æ‰˜ç®¡ <code>ResponseWriter</code> å’Œ <code>Request</code> è¿˜æ”¯æŒæ‰˜ç®¡ <code>http.Handler</code> å³ä¸Šè¿° <code>SetRequestID</code> middleware çš„ <code>next</code> å‚æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// use middleware to set requestID per request
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">SetRequestID</span><span class="p">(</span><span class="nx">next</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>

	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
    
		<span class="c1">// write &#34;X-Request-Id&#34; to respâ€™s head then call next by mplus which take next handler
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span><span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">WriteRespHeader</span><span class="p">(</span> 
			<span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderRequestID</span><span class="p">,</span><span class="nx">uuid</span><span class="p">.</span><span class="nf">Must</span><span class="p">(</span><span class="nx">uuid</span><span class="p">.</span><span class="nf">NewV4</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">Handler</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span><span class="p">.</span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>è¯¥ç‰ˆæœ¬çš„ <code>SetRequestID</code> æ•ˆæœä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬ç›¸åŒã€‚</p>
<h4 id="-httphandler-">ä¸­é—´ä»¶ä¸ HTTP-Handler ä¹‹é—´çš„äº¤äº’</h4>
<p>åœ¨æŸäº›æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨ä¸­é—´ä»¶ä¹‹é—´ä¸“é€’ä¿¡æ¯ï¼Œæˆ–åˆ™éœ€è¦å°†ä¿¡æ¯ä»ä¸­é—´ä»¶ä¼ é€’åˆ°å®é™…çš„ Handler ä¸­ã€‚<strong>mplus</strong> æä¾›äº†ç›¸åº”çš„ <code>Get/Set</code> æ–¹æ³•é›†ç”¨äºå¤„ç†ç¼“å­˜äºå½“å‰ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®</p>
<ul>
<li><code>mplus.PP.Get(key string)</code> ä»å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­è·å–æŒ‡å®šæ•°æ®</li>
<li><code>mplus.PP.GetDf(key string, defaultValue interface{})</code> ä»å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­è·å–æŒ‡å®šæ•°æ®ï¼Œä¸å­˜åœ¨åˆ™è¿”å›é»˜è®¤å€¼</li>
<li><code>mplus.PP.Set(key string, value interface{})</code> å°†æŒ‡å®šæ•°æ®æ”¾å…¥å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­</li>
<li><code>mplus.PP.SetR(key string, value interface{})</code> å°†æŒ‡å®šæ•°æ®æ”¾å…¥å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¹¶è¿”å›å½“å‰æ•°æ®</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">User</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Name</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;name&#34;</span><span class="s">`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Use</span><span class="p">(</span><span class="nx">SetRequestID</span><span class="p">,</span> <span class="nx">PreSearchUser</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Hello</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// use middleware to set requestID per request
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">SetRequestID</span><span class="p">(</span><span class="nx">next</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>

	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">Handler</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span>

		<span class="c1">// add &#34;X-Request-Id&#34; to request&#39;s context and header at the same time
</span><span class="c1"></span>		<span class="nx">pp</span><span class="p">.</span><span class="nf">WriteRespHeader</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderRequestID</span><span class="p">,</span>
			<span class="nx">pp</span><span class="p">.</span><span class="nf">SetStringR</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderRequestID</span><span class="p">,</span> <span class="nx">uuid</span><span class="p">.</span><span class="nf">Must</span><span class="p">(</span><span class="nx">uuid</span><span class="p">.</span><span class="nf">NewV4</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">)</span>

		<span class="c1">// call next
</span><span class="c1"></span>		<span class="nx">pp</span><span class="p">.</span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">KeyUser</span> <span class="p">=</span> <span class="s">&#34;user&#34;</span>

<span class="c1">// use middleware to check user before handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">PreSearchUser</span><span class="p">(</span><span class="nx">next</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">)</span> <span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span> <span class="p">{</span>

	<span class="k">return</span> <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>

		<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">Handler</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span>

		<span class="c1">// search user by id which get from url then add to request&#39;s context
</span><span class="c1"></span>		<span class="nx">pp</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="nx">KeyUser</span><span class="p">,</span> <span class="nf">SearchUserService</span><span class="p">(</span><span class="nx">pp</span><span class="p">.</span><span class="nf">Query</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span><span class="p">)</span><span class="p">)</span>

		<span class="c1">// call next
</span><span class="c1"></span>		<span class="nx">pp</span><span class="p">.</span><span class="nf">ServeHTTP</span><span class="p">(</span><span class="p">)</span>
    
		<span class="c1">// Or complete all steps at once as follows
</span><span class="c1"></span>		<span class="c1">// mplus.PlusPlus(w, r).Handler(next).
</span><span class="c1"></span>		<span class="c1">// Set(KeyUser, SearchUserService(pp.Query(&#34;id&#34;))).ServeHTTP()
</span><span class="c1"></span>	<span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">SearchUserService</span><span class="p">(</span><span class="nx">id</span> <span class="kt">string</span><span class="p">)</span> <span class="o">*</span><span class="nx">User</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">User</span><span class="p">{</span><span class="s">&#34;tom&#34;</span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Hello</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>

	<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

	<span class="nx">requestID</span> <span class="o">:=</span> <span class="nx">pp</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderRequestID</span><span class="p">)</span> <span class="c1">// get requestID from request&#39;s context
</span><span class="c1"></span>	<span class="nx">userName</span> <span class="o">:=</span> <span class="nx">pp</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="nx">KeyUser</span><span class="p">)</span><span class="p">.</span><span class="p">(</span><span class="o">*</span><span class="nx">User</span><span class="p">)</span><span class="p">.</span><span class="nx">Name</span>   <span class="c1">// get user from request&#39;s context
</span><span class="c1"></span>
	<span class="nx">pp</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span><span class="s">&#34;request_id&#34;</span><span class="p">:</span> <span class="nx">requestID</span><span class="p">,</span> <span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="s">&#34;hello &#34;</span> <span class="o">+</span> <span class="nx">userName</span><span class="p">}</span><span class="p">)</span>
<span class="p">}</span>

</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl http://localhost:8080?id<span class="o">=</span><span class="m">1</span>

&lt; HTTP/1.1 <span class="m">200</span> OK
<span class="o">{</span><span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;hello tom&#34;</span>,<span class="s2">&#34;request_id&#34;</span>:<span class="s2">&#34;9ccadf01-cfdf-4822-b528-3a1b6e79987a&#34;</span><span class="o">}</span>
</code></pre></div><h4 id="-middleware-1">å‰ç½®/åç½®è¯·æ±‚å¤„ç†å™¨ä¸ middleware ä¸­é—´ä»¶ä¹‹é—´çš„å…³ç³»</h4>
<p>æ¯ä¸ª Handler éƒ½å¯ä»¥ä¸ä»»æ„çš„ <code>Before</code> ã€ <code>After</code> åŠ <code>middleware</code> è¿›è¡Œæ­é…ï¼Œä»–ä»¬ä¹‹é—´çš„å…³ç³»å¦‚ä¸‹:</p>
<ul>
<li><code>Before</code> åŠ <code>After</code> ä¸ Handler è¿›è¡Œç»„åˆ, æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="https://github.com/tangzixiang/mplus/raw/master/assets/image-20191022142924932.png" alt=""></p>
<ul>
<li><code>middleware</code> ä¸ Handler è¿›è¡Œç»„åˆï¼Œæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="https://github.com/tangzixiang/mplus/raw/master/assets/image-20191022145958986.png" alt=""></p>
<ul>
<li><code>Before</code> ã€ <code>After</code> åŠ <code>middleware</code> åŒæ—¶ä¸ Handler è¿›è¡Œç»„åˆ, æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</li>
</ul>
<p><img src="https://github.com/tangzixiang/mplus/raw/master/assets/image-20191022150601974.png" alt=""></p>
<h3 id="-model-">ç»‘å®š model å¹¶æ ¡éªŒè¯·æ±‚æ•°æ®æœ‰æ•ˆæ€§</h3>
<p>åœ¨æ—¥å¸¸çš„ API å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨ Handler ä¸­å°†è¯·æ±‚æ•°æ®æ˜ å°„åˆ°æŒ‡å®šå¯¹è±¡ä¸Šå¹¶è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œç„¶åå†ä¼ é€’åˆ°å…¶ä»–åœ°æ–¹è¿›è¡Œåç»­å¤„ç†ï¼Œç”¨åŸå§‹çš„æ–¹å¼ä½ éœ€è¦å†™å¤§é‡çš„å¤„ç†ä»£ç ï¼Œmplus å¯ä»¥å¤§å¤§é™ä½ä½ çš„ä»£ç é‡ã€‚</p>
<p><strong>mplus</strong> å†…ç½®ä½¿ç”¨ <strong><a href="https://github.com/go-playground/validator">validator</a></strong> ä½œä¸º JSON æ•°æ®è§„åˆ™æ ¡éªŒå¼•æ“</p>
<ul>
<li><code>mplus.MRote().Bind(interface{})</code> ä¸ºå½“å‰è¯·æ±‚ç»‘å®šæŒ‡å®šæ•°æ®ç±»å‹</li>
<li><code>mplus.RegisterValidateErrorFunc(ValidateErrorType,func(http.ResponseWriter,*http.Request, error))</code> æ³¨å†Œä¸€ä¸ªæ•°æ®æ ¡éªŒå¼‚å¸¸å¤„ç† Hook</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">V</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Addr</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;addr&#34; validate:&#34;min=10&#34;</span><span class="s">`</span> <span class="c1">// min len is 10
</span><span class="c1"></span><span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// (*V)(nil) mean that is a nil point which hold type info
</span><span class="c1"></span>	<span class="c1">// bind model just need type info
</span><span class="c1"></span>	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Address</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Address</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

	<span class="c1">// pass to response data is V instance from request data
</span><span class="c1"></span>	<span class="nx">pp</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="nx">pp</span><span class="p">.</span><span class="nf">VO</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># request success</span>
$ curl --request POST <span class="se">\
</span><span class="se"></span>&gt;   --url http://localhost:8080/ <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;content-type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --data <span class="s1">&#39;{&#34;addr&#34;:&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒº xxx å·&#34;}&#39;</span>

<span class="o">{</span><span class="s2">&#34;addr&#34;</span>:<span class="s2">&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒº xxx å· :)&#34;</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># request failed</span>
$ curl --request POST <span class="se">\
</span><span class="se"></span>&gt;   --url http://localhost:8080/408 <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;content-type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --data <span class="s1">&#39;{&#34;addr&#34;:&#34;&#34;}&#39;</span> 

&lt; HTTP/1.1 <span class="m">400</span> Bad Request
</code></pre></div><p>å¦‚æœéœ€è¦äº†è§£åˆ°æ ¡éªŒè¿‡ç¨‹ä¸­å…·ä½“å‘ç”Ÿå¼‚å¸¸çš„å†…å®¹ï¼Œå¯ä»¥æ·»åŠ å¦‚ä¸‹ Hook å®šä¹‰å“åº”è¾“å‡ºçš„å†…å®¹</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// register a hook to show err message when validate failed
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nf">RegisterValidateErrorFunc</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">ErrBodyValidate</span><span class="p">,</span> 
                                  <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
                                    
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span><span class="s">&#34;err_message&#34;</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="p">)</span><span class="p">}</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span>

	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Address</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl --request POST <span class="se">\
</span><span class="se"></span>&gt;   --url http://localhost:8080/408 <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;content-type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --data <span class="s1">&#39;{&#34;addr&#34;:&#34;&#34;}&#39;</span> 

&lt; HTTP/1.1 <span class="m">400</span> Bad Request
<span class="o">{</span><span class="s2">&#34;err_message&#34;</span>:<span class="s2">&#34;Key: &#39;V.Addr&#39; Error:Field validation for &#39;Addr&#39; failed on the &#39;min&#39; tag&#34;</span><span class="o">}</span>
</code></pre></div><h4 id="form-">form æ•°æ®çš„ç»‘å®š</h4>
<p><strong>mplus</strong> åŒæ—¶å†…ç½® <strong><a href="github.com/go-playground/form">form</a></strong> ä½œä¸º  <code>querystring</code> åŠ <code>form</code> æ ¼å¼æ•°æ®çš„è§£æå¼•æ“ï¼Œè¿™æ ·ä½ ä¾¿èƒ½é€šè¿‡ <code>Bind</code> åŒæ—¶ç»‘å®šè¯·æ±‚ä½“æ•°æ®å†…å®¹åŠURL ä¸Šçš„æ•°æ®å†…å®¹</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// tag â€œformâ€, can parse parameter from URL or form-data
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">V</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Addr</span> <span class="kt">string</span> <span class="s">`</span><span class="s">form:&#34;addr&#34; validate:&#34;min=10&#34;</span><span class="s">`</span> <span class="c1">// min len is 10
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># addr on URL</span>
$ curl http://localhost:8080?addr<span class="o">=</span>å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºxxxx

&lt; HTTP/1.1 <span class="m">200</span> OK
<span class="o">{</span><span class="s2">&#34;addr&#34;</span>:<span class="s2">&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºxxxx&#34;</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># by application/x-www-form-urlencoded</span>
$ curl http://localhost:8080 --data <span class="s1">&#39;addr=å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºxxxx&#39;</span>

&lt; HTTP/1.1 <span class="m">200</span> OK
<span class="o">{</span><span class="s2">&#34;addr&#34;</span>:<span class="s2">&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºxxxx&#34;</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># Request body parameters take precedence over URL query string values</span>
$ curl http://localhost:8080?addr<span class="o">=</span>å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºyyyyy --data <span class="s1">&#39;addr=å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºxxxx&#39;</span>

&lt; HTTP/1.1 <span class="m">200</span> OK
<span class="o">{</span><span class="s2">&#34;addr&#34;</span>:<span class="s2">&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒºxxxx&#34;</span><span class="o">}</span>
</code></pre></div><p>å¦‚æœ <strong><a href="https://github.com/go-playground/validator">validator</a></strong> åŠ  <strong><a href="github.com/go-playground/form">form</a></strong>  ä¸èƒ½æ»¡è¶³ä½ çš„æ ¡éªŒè§„åˆ™ï¼Œä½ è¿˜èƒ½ä¸ºå½“å‰ model è‡ªå®šä¹‰æ ¡éªŒé€»è¾‘è¿›è¡Œè¡¥å……</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">V</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Addr</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;addr&#34; validate:&#34;min=10&#34;</span><span class="s">`</span> <span class="c1">// min len is 10
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// implement mplus.RequestValidate
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">v</span> <span class="nx">V</span><span class="p">)</span> <span class="nf">Validate</span><span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">(</span><span class="nx">ok</span> <span class="kt">bool</span> <span class="cm">/*æ ¡éªŒæ˜¯å¦æˆåŠŸ*/</span><span class="p">,</span> <span class="nx">errMsg</span> <span class="kt">string</span> <span class="cm">/*æ ¡éªŒå¤±è´¥çš„åŸå› */</span><span class="p">)</span> <span class="p">{</span>

	<span class="k">if</span> <span class="nx">strings</span><span class="p">.</span><span class="nf">Index</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">Addr</span><span class="p">,</span> <span class="s">&#34;å¹¿ä¸œ&#34;</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">{</span>
		<span class="k">return</span> <span class="kc">false</span><span class="p">,</span> <span class="s">&#34;addr must begin å¹¿ä¸œ&#34;</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="kc">true</span><span class="p">,</span> <span class="s">&#34;&#34;</span>
<span class="p">}</span>


<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// register a hook to show err message when validate failed by model.Validate
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nf">RegisterValidateErrorFunc</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">ErrRequestValidate</span><span class="p">,</span> 
                                  <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
                                    
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="s">&#34;err_message&#34;</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="p">)</span><span class="p">}</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span>

	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Address</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Address</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

	<span class="c1">// pass data to response
</span><span class="c1"></span>	<span class="nx">pp</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="nx">pp</span><span class="p">.</span><span class="nf">VO</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl --request POST <span class="se">\
</span><span class="se"></span>&gt;   --url http://localhost:8080/ <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;content-type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --data <span class="s1">&#39;{&#34;addr&#34;:&#34;å…¶ä»–çœæ·±åœ³å¸‚å—å±±åŒº xxx å·&#34;}&#39;</span> 

&lt; HTTP/1.1 <span class="m">400</span> Bad Request
<span class="o">{</span><span class="s2">&#34;err_message&#34;</span>:<span class="s2">&#34;addr must begin å¹¿ä¸œ&#34;</span><span class="o">}</span>
</code></pre></div><h4 id="-model-1">å»¶è¿Ÿè®¡ç®— model ç±»å‹</h4>
<p>å¦‚æœä½ æ— æ³•åœ¨å£°æ˜è·¯ç”±çš„æ—¶å€™ç›´æ¥ç¡®å®š Handler ç»‘å®šçš„ <code>model</code> ç±»å‹ï¼Œä¼ é€’ä¸€ä¸ªç”¨äºå»¶è¿Ÿè®¡ç®—å®é™…éœ€è¦ç»‘å®šçš„ <code>model</code> ç±»å‹çš„å›è°ƒå‡½æ•°ã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// InsertUser use for insert a new one
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">InsertUser</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Account</span>  <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;account&#34;     form:&#34;account&#34;</span><span class="s">`</span>
	<span class="nx">Name</span>     <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;name&#34;        form:&#34;name&#34;</span><span class="s">`</span>
	<span class="nx">Password</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;password&#34;    form:&#34;password&#34;</span><span class="s">`</span>
<span class="p">}</span>

<span class="c1">// UpdateUser use for update name
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">UpdateUser</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Account</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;account&#34;  form:&#34;account&#34;</span><span class="s">`</span>
	<span class="nx">Name</span>    <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;name&#34;     form:&#34;name&#34;</span><span class="s">`</span>
<span class="p">}</span>

<span class="c1">// SelectBindModel will calculate which type of model to bind when handler got a request
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">SelectBindModel</span><span class="p">(</span><span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">(</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>

	<span class="k">switch</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">GetHeader</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="s">&#34;X-Do-What&#34;</span><span class="p">)</span> <span class="p">{</span>
	<span class="k">case</span> <span class="s">&#34;update&#34;</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="nx">UpdateUser</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">,</span> <span class="kc">nil</span>
	<span class="k">case</span> <span class="s">&#34;insert&#34;</span><span class="p">:</span>
		<span class="k">return</span> <span class="p">(</span><span class="o">*</span><span class="nx">InsertUser</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">,</span> <span class="kc">nil</span>
	<span class="p">}</span>
  
	<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">errors</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="s">&#34;bind type not found&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// register a hook to show err message when select model failed
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nf">RegisterValidateErrorFunc</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">ErrModelSelect</span><span class="p">,</span> 
                                  <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">// {&#34;err_message&#34;:&#34;bind type not found&#34;} 400
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span><span class="s">&#34;err_message&#34;</span><span class="p">:</span> <span class="nx">err</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="p">)</span><span class="p">}</span><span class="p">,</span> <span class="mi">400</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span>

	<span class="nx">handler</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nf">ValidateFunc</span><span class="p">(</span><span class="nx">SelectBindModel</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Whatever</span><span class="p">)</span>
	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span><span class="nx">handler</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Whatever</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

	<span class="c1">// got pp.VO() do anything
</span><span class="c1"></span>  
	<span class="c1">// pass data to response
</span><span class="c1"></span>	<span class="nx">pp</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="nx">pp</span><span class="p">.</span><span class="nf">VO</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># request failed</span>
$ curl http://localhost:8080

&lt; HTTP/1.1 <span class="m">400</span> Bad Request
<span class="o">{</span><span class="s2">&#34;err_message&#34;</span>:<span class="s2">&#34;bind type not found&#34;</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># request success by application/x-www-form-urlencoded</span>
$ curl http://localhost:8080 --header <span class="s1">&#39;X-Do-What: update&#39;</span> --data <span class="s1">&#39;account=xxx@xxx&amp;name=xxx&#39;</span>

&lt; HTTP/1.1 <span class="m">200</span> OK
<span class="o">{</span><span class="s2">&#34;account&#34;</span>:<span class="s2">&#34;xxx@xxx&#34;</span>,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;xxx&#34;</span><span class="o">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># request success by application/json</span>
$ curl http://localhost:8080 <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;X-Do-What: update&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --data <span class="s1">&#39;{&#34;account&#34;:&#34;xxx@xxx&#34;,&#34;name&#34;:&#34;xxx&#34;}&#39;</span> 

&lt; HTTP/1.1 <span class="m">200</span> OK
<span class="o">{</span><span class="s2">&#34;account&#34;</span>:<span class="s2">&#34;xxx@xxx&#34;</span>,<span class="s2">&#34;name&#34;</span>:<span class="s2">&#34;xxx&#34;</span><span class="o">}</span>
</code></pre></div><h3 id="-query--uri">ä½¿ç”¨ Query æ„é€ è¯·æ±‚ URI</h3>
<p>ä½¿ç”¨å®˜æ–¹åŸå§‹çš„ API æ–¹å¼æ„é€  URI éå¸¸ç¹çï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">urlValues</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">)</span>
<span class="nx">urlValues</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;tom&#34;</span><span class="p">)</span>
<span class="nx">urlValues</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">,</span> <span class="s">&#34;15&#34;</span><span class="p">)</span>
<span class="nx">path</span> <span class="o">:=</span> <span class="s">&#34;http://localhost?&#34;</span> <span class="o">+</span> <span class="nx">urlValues</span><span class="p">.</span><span class="nf">Encode</span><span class="p">(</span><span class="p">)</span>
</code></pre></div><p>mplus èƒ½å¤Ÿè®©ä½ çš„ä»£ç æ›´ä¼˜é›…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">mplus</span><span class="p">.</span><span class="nf">NewQuery</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">AddPairs</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;tom&#34;</span><span class="p">,</span> <span class="s">&#34;age&#34;</span><span class="p">,</span> <span class="s">&#34;15&#34;</span><span class="p">)</span><span class="p">.</span><span class="nf">AppendToURI</span><span class="p">(</span><span class="s">&#34;http://localhost&#34;</span><span class="p">)</span>
</code></pre></div><p>ä¸Šé¢ä¸¤ç§æ–¹å¼éƒ½æ˜¯åŒæ ·èƒ½å¤Ÿè¾“å‡º <code>http://localhost?age=15&amp;name=tom</code> ã€‚</p>
<p><strong>mplus</strong> è¿˜èƒ½åšåˆ°æ›´çµæ´»ï¼Œä½¿ç”¨ <code>If</code> åŠ <code>D</code> å‘½åç»“å°¾çš„ç›¸å…³å‡½æ•°èƒ½åŠ¨æ€å†³å®šæ˜¯å¦æ·»åŠ å­—æ®µï¼Œä¸åŸå§‹çš„å®˜æ–¹ API å¤„ç†æ–¹å¼å¯¹æ¯”å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="p">(</span>
  <span class="nx">values</span> <span class="p">=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">bool</span><span class="p">{</span>
    <span class="s">&#34;name&#34;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// will be continue
</span><span class="c1"></span>    <span class="s">&#34;age&#34;</span><span class="p">:</span>  <span class="kc">true</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="nx">urlValues</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">Values</span><span class="p">)</span>
<span class="p">)</span>

<span class="k">if</span> <span class="nx">values</span><span class="p">[</span><span class="s">&#34;name&#34;</span><span class="p">]</span> <span class="p">{</span>
  <span class="nx">urlValues</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;tom&#34;</span><span class="p">)</span>
<span class="p">}</span>
<span class="k">if</span> <span class="nx">values</span><span class="p">[</span><span class="s">&#34;age&#34;</span><span class="p">]</span> <span class="p">{</span>
  <span class="nx">urlValues</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;age&#34;</span><span class="p">,</span> <span class="s">&#34;15&#34;</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;http://localhost/users/%v?&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">urlValues</span><span class="p">.</span><span class="nf">Encode</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">NewQuery</span><span class="p">(</span><span class="p">)</span><span class="p">.</span>
           <span class="nf">SetIf</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="s">&#34;name&#34;</span><span class="p">]</span><span class="p">,</span> <span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="s">&#34;tom&#34;</span><span class="p">)</span><span class="p">.</span>
           <span class="nf">SetIf</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="s">&#34;age&#34;</span><span class="p">]</span><span class="p">,</span> <span class="s">&#34;age&#34;</span><span class="p">,</span> <span class="s">&#34;15&#34;</span><span class="p">)</span><span class="p">.</span>
           <span class="nf">AppendToURIFormat</span><span class="p">(</span><span class="s">&#34;http://localhost/users/%v&#34;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="p">)</span>

<span class="c1">// OutPut:
</span><span class="c1"></span><span class="c1">// http://localhost/users/1?age=15
</span><span class="c1"></span><span class="c1">// http://localhost/users/1?age=15
</span></code></pre></div><p>å¯¹äºéœ€è¦å»¶è¿Ÿè®¡ç®—çš„èƒ½åŠ›åŒæ ·æ”¯æŒ</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">values</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">{</span>
  <span class="s">&#34;name&#34;</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="c1">// will be continue
</span><span class="c1"></span>  <span class="s">&#34;age&#34;</span><span class="p">:</span>  <span class="s">&#34;15&#34;</span><span class="p">,</span>
<span class="p">}</span>

<span class="nx">query</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">NewQuery</span><span class="p">(</span><span class="p">)</span><span class="p">.</span>
  <span class="nf">SetIfD</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="s">&#34;name&#34;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">,</span> <span class="s">&#34;name&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">values</span><span class="p">[</span><span class="s">&#34;name&#34;</span><span class="p">]</span><span class="p">.</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span> <span class="p">}</span><span class="p">)</span><span class="p">.</span> 
  <span class="nf">SetIfD</span><span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="s">&#34;age&#34;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">nil</span><span class="p">,</span> <span class="s">&#34;age&#34;</span><span class="p">,</span> <span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">values</span><span class="p">[</span><span class="s">&#34;age&#34;</span><span class="p">]</span><span class="p">.</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span> <span class="p">}</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span><span class="nx">query</span><span class="p">.</span><span class="nf">AppendToURI</span><span class="p">(</span><span class="s">&#34;http://localhost/users/1&#34;</span><span class="p">)</span><span class="p">)</span>

<span class="c1">// OutPut:
</span><span class="c1"></span><span class="c1">// http://localhost/users/1?age=15
</span></code></pre></div><p>ç”šè‡³ä½ èƒ½å°†å­—æ®µçš„è®¡ç®—ç»Ÿä¸€åšå»¶è¿Ÿå¤„ç†å¹¶å°è£…åˆ°ç‹¬ç«‹çš„å‡½æ•°å†…ä¼ é€’åˆ° Queryï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="nx">query</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">NewQuery</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">SetPairsD</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="p">)</span> <span class="p">[</span><span class="p">]</span><span class="kt">string</span> <span class="p">{</span> <span class="c1">// lazy dynamic
</span><span class="c1"></span>  <span class="nx">values</span> <span class="o">:=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span>
    <span class="s">&#34;first&#34;</span><span class="p">:</span>  <span class="mi">1</span><span class="p">,</span>
    <span class="s">&#34;second&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s">&#34;third&#34;</span><span class="p">:</span>  <span class="mi">3</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">pairs</span> <span class="p">[</span><span class="p">]</span><span class="kt">string</span>

  <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">values</span> <span class="p">{</span>
    <span class="nx">pairs</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">pairs</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprint</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">pairs</span>
<span class="p">}</span><span class="p">)</span>

<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span><span class="nx">query</span><span class="p">.</span><span class="nf">AppendToURI</span><span class="p">(</span><span class="s">&#34;http://localhost/users/1&#34;</span><span class="p">)</span><span class="p">)</span>

<span class="c1">// OutPut:
</span><span class="c1"></span><span class="c1">// http://localhost/users/1?first=1&amp;second=2&amp;third=3
</span></code></pre></div><h3 id="-api-">ä¾¿æ·çš„ API å“åº”</h3>
<p>HTTP å“åº”çŠ¶æ€ç æŒ‡ç¤ºç‰¹å®š <a href="https://developer.mozilla.org/zh-cn/HTTP">HTTP</a> è¯·æ±‚æ˜¯å¦å·²æˆåŠŸå®Œæˆã€‚mplus ä¸ºå¸¸ç”¨çš„å“åº”çŠ¶æ€ç æä¾›äº†ä¾¿æ·çš„ APIã€‚</p>
<ul>
<li><code>200`:</code>mplus.PP.OK()`</li>
<li><code>400`:</code>mplus.PP.BadRequest()`</li>
<li><code>401`:</code>mplus.PP.Unauthorized()`</li>
<li><code>403`:</code>mplus.PP.Forbidden()`</li>
<li><code>404`:</code>mplus.PP.NotFound()`</li>
<li><code>405`:</code>mplus.PP.NotAllowed()`</li>
<li><code>408`:</code>mplus.PP.RequestTimeout()`</li>
<li><code>409`:</code>mplus.PP.Conflict()`</li>
<li><code>415`:</code>mplus.PP.UnsupportedMediaType()`</li>
<li><code>500`:</code>mplus.PP.InternalServerError()`</li>
<li>more &hellip;</li>
</ul>
<p>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">mux</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewServeMux</span><span class="p">(</span><span class="p">)</span>
	<span class="nx">mr</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span> <span class="c1">// It&#39;s very easy to reuse
</span><span class="c1"></span>	
	<span class="c1">//  response&#39;s status code is 200
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/200&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">OK</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>

	<span class="c1">//  response&#39;s status code is 400
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/400&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>

	<span class="c1">//  response&#39;s status code is 401
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/401&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">// WWW-Authenticate: Basic
</span><span class="c1"></span>		<span class="c1">// see https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">WriteRespHeader</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderWWWAuthenticate</span><span class="p">,</span> <span class="s">`</span><span class="s">Basic</span><span class="s">`</span><span class="p">)</span><span class="p">.</span><span class="nf">Unauthorized</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>
  
	<span class="c1">//  response&#39;s status code is 403
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/403&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">// chang default Date header
</span><span class="c1"></span>		<span class="c1">// Date: Sat, 28 Sep 2019 01:58:43 GMT
</span><span class="c1"></span>    
		<span class="c1">// TimeFormat is the time format to use when generating times in HTTP
</span><span class="c1"></span>		<span class="c1">// headers. It is like time.RFC1123 but hard-codes GMT as the time
</span><span class="c1"></span>		<span class="c1">// zone. The time being formatted must be in UTC for Format to
</span><span class="c1"></span>		<span class="c1">// generate the correct format.
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">WriteRespHeader</span><span class="p">(</span>
			<span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderDate</span><span class="p">,</span> <span class="nx">time</span><span class="p">.</span><span class="nf">Now</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Hour</span><span class="p">)</span><span class="p">.</span><span class="nf">UTC</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Format</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">TimeFormat</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">Forbidden</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>
  
	<span class="c1">//  response&#39;s status code is 404
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/404&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">NotFound</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>

	<span class="c1">//  response&#39;s status code is 405
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/405&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">// Allow: GET, POST, HEAD
</span><span class="c1"></span>		<span class="c1">// see https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">WriteRespHeader</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderAllow</span><span class="p">,</span> <span class="s">&#34;GET,POST,HEAD&#34;</span><span class="p">)</span><span class="p">.</span><span class="nf">NotAllowed</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>

	<span class="c1">//  response&#39;s status code is 408
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/408&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">// Connection: close
</span><span class="c1"></span>		<span class="c1">// see https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/408
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">WriteRespHeader</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">HeaderConnection</span><span class="p">,</span> <span class="s">&#34;close&#34;</span><span class="p">)</span><span class="p">.</span><span class="nf">RequestTimeout</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>

	<span class="c1">//  response&#39;s status code is 500
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/500&#34;</span><span class="p">,</span> <span class="nx">mr</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">InternalServerError</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>


	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mux</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><p>å“åº”çŠ¶æ€ç ç³»åˆ— API é»˜è®¤æƒ…å†µä¸‹ä¼šé™„å¸¦ <code>Content-Type</code> ä¸º <code>text/plain; charset=utf-8</code> çš„ headerï¼Œå¦‚æœä½ ä¸å–œæ¬¢è¯¥ç³»åˆ— API æä¾›çš„é»˜è®¤è¡Œä¸ºï¼Œä½ å¯ä»¥å¯¹å…¶è¡Œä¸ºè¿›è¡Œæ›´æ”¹ï¼š</p>
<ul>
<li><code>mplus.RegisterHttpStatusMethod</code> æ›´æ”¹æŒ‡å®š HTTP çŠ¶æ€ç çš„å“åº”å¤„ç†</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">mux</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewServeMux</span><span class="p">(</span><span class="p">)</span>

	<span class="c1">// register a StatusBadRequest hook to change default&#39;s behavior
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nf">RegisterHttpStatusMethod</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span> 
                      <span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">m</span> <span class="nx">message</span><span class="p">.</span><span class="nx">Message</span><span class="p">,</span> <span class="nx">statusCode</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">// {&#34;err_message&#34;:&#34;Bad Request&#34;} 400 Bad Request
</span><span class="c1"></span>		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">mplus</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span><span class="s">&#34;err_message&#34;</span><span class="p">:</span> <span class="nx">m</span><span class="p">.</span><span class="nf">En</span><span class="p">(</span><span class="p">)</span><span class="p">}</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nf">Status</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span>

	<span class="c1">//  response&#39;s status code is 400
</span><span class="c1"></span>	<span class="nx">mux</span><span class="p">.</span><span class="nf">Handle</span><span class="p">(</span><span class="s">&#34;/400&#34;</span><span class="p">,</span>  <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="p">)</span>
	<span class="p">}</span><span class="p">)</span><span class="p">)</span>

	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mux</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">curl http://localhost:8080/400

&lt; HTTP/1.1 <span class="m">400</span> Bad Request
<span class="o">{</span><span class="s2">&#34;err_message&#34;</span>:<span class="s2">&#34;Bad Request&#34;</span><span class="o">}</span>
</code></pre></div><h3 id="-errcode--api-">ä½¿ç”¨ errCode è§„åˆ’ API å“åº”ä¸åŒæ•°æ®å†…å®¹</h3>
<p>åœ¨ API å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸éœ€è¦å¯¹ä¸åŒçš„æƒ…å†µåšä¸åŒçš„å“åº”å¤„ç†å¹¶è¿”å›å¯¹åº”çš„æ•°æ®ç»“æœï¼Œç¬¬ä¸‰æ–¹é€šè¿‡å“åº”çš„æ•°æ®ç»“æœå†…å®¹åˆ¤æ–­ API è¯·æ±‚å®Œæˆæƒ…å†µã€‚</p>
<p><strong>mplus</strong> è®¾è®¡äº†ä¸€å¥—é€šè¿‡ <code>errCode</code> æ³¨å†Œä¸åŒçš„å“åº”ç»“æœå¤„ç†é€»è¾‘ï¼Œåœ¨ Handler ä¸­åªéœ€è¦å°†é¢„å…ˆå®šä¹‰å¥½çš„ <code>errCode</code> ä¼ é€’åˆ° mplusï¼Œmplus å°±èƒ½å¤Ÿå¯¹å…¶æ‰§è¡Œé¢„å…ˆæ³¨å†Œçš„é€»è¾‘å®Œæˆå‰©ä½™çš„å“åº”å·¥ä½œï¼Œè€Œå®Œæˆè¿™ä¸ªåŠŸèƒ½çš„åª’ä»‹å³ <code>Message</code>ã€‚</p>
<ul>
<li>
<p><code>mplus.NewCallbackMessage(int,int,string,CallbackMessage)</code> åˆ›å»ºä¸€ä¸ªé™„å¸¦<code>Callbcak</code> çš„ <code>Message</code></p>
</li>
<li>
<p><code>mplus.Messages.Add(Message)</code>  æ·»åŠ ä¸€ä¸ª <code>Message</code></p>
</li>
<li>
<p><code>mplus.pp.CallbackByCode(int,interface{})</code> é€šè¿‡ <code>errCode</code> è§¦å‘æŒ‡å®šçš„ <code>Callback</code></p>
</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">V</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Addr</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;addr&#34; validate:&#34;min=10&#34;</span><span class="s">`</span> <span class="c1">// min len is 10
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// errCode 400001
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">ErrCodeAddrNotExists</span> <span class="p">=</span> <span class="mi">400001</span>

<span class="c1">// ErrCodeCallbackFun will be perform when ErrCodeAddrNotExists be use to PP.CallbackByCode
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">ErrCodeCallbackFun</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">m</span> <span class="nx">mplus</span><span class="p">.</span><span class="nx">Message</span><span class="p">,</span> <span class="nx">respData</span> <span class="kd">interface</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="p">{</span>
  
	<span class="c1">// {&#34;code&#34;:400001,&#34;message&#34;:&#34;addr not exists&#34;}
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nf">JSON</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nx">Data</span><span class="p">{</span><span class="s">&#34;message&#34;</span><span class="p">:</span> <span class="nx">m</span><span class="p">.</span><span class="nf">En</span><span class="p">(</span><span class="p">)</span><span class="p">}</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nf">Status</span><span class="p">(</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">CheckAddr</span><span class="p">(</span><span class="kt">string</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="kc">false</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

	<span class="c1">// register a message for ErrCodeAddrNotExists
</span><span class="c1"></span>	<span class="nx">mplus</span><span class="p">.</span><span class="nx">Messages</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span>
		<span class="nx">mplus</span><span class="p">.</span><span class="nf">NewCallbackMessage</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">StatusBadRequest</span><span class="p">,</span> <span class="nx">ErrCodeAddrNotExists</span><span class="p">,</span> <span class="s">&#34;addr not exists&#34;</span><span class="p">,</span> <span class="nx">ErrCodeCallbackFun</span><span class="p">)</span><span class="p">)</span>

	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Address</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Handler
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Address</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

	<span class="k">if</span> <span class="p">!</span><span class="nf">CheckAddr</span><span class="p">(</span><span class="nx">pp</span><span class="p">.</span><span class="nf">VO</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">.</span><span class="nx">Addr</span><span class="p">)</span> <span class="p">{</span>

		<span class="c1">//  pp search ErrCodeAddrNotExists message  pass to ErrCodeCallbackFun
</span><span class="c1"></span>		<span class="c1">// second arg is respData pass to registered callback func on Messages -&gt; ErrCodeCallbackFun
</span><span class="c1"></span>		<span class="nx">pp</span><span class="p">.</span><span class="nf">CallbackByCode</span><span class="p">(</span><span class="nx">ErrCodeAddrNotExists</span><span class="p">,</span> <span class="kc">nil</span><span class="p">)</span>
		<span class="k">return</span>
	<span class="p">}</span>

	<span class="nx">pp</span><span class="p">.</span><span class="nf">JSONOK</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span> <span class="c1">// pass nil will specify mplus.EmptyRespData
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl --request POST <span class="se">\
</span><span class="se"></span>&gt;   --url http://localhost:8080/ <span class="se">\
</span><span class="se"></span>&gt;   --header <span class="s1">&#39;content-type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt;   --data <span class="s1">&#39;{&#34;addr&#34;:&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒº xxx å·&#34;}&#39;</span>

&lt; HTTP/1.1 <span class="m">400</span> Bad Request
<span class="o">{</span><span class="s2">&#34;code&#34;</span>:400001,<span class="s2">&#34;message&#34;</span>:<span class="s2">&#34;addr not exists&#34;</span><span class="o">}</span>
</code></pre></div><h3 id="-requestbody">é‡å¤è¯»å– request.Body</h3>
<p>ç”±äº<code>request.Body</code> æ˜¯ä¸€ä¸ª <code>io.ReadCloser</code> å®ä¾‹ï¼Œé»˜è®¤æ²¡æœ‰æä¾›é‡å¤è¯»å–çš„èƒ½åŠ›ã€‚<strong>mplus</strong> æä¾›äº†API åœ¨ä¿ç•™  <code>request.Body</code> è¯»å–æ•°æ®èƒ½åŠ›çš„åŒæ—¶è·å–æ•°æ®å†…å®¹ã€‚</p>
<ul>
<li><code>mplus.PP.ReqBody()</code> ä¿æŒ <code>request.Body</code> å¯ç”¨å¹¶è¿”å› <code>string</code> æ ¼å¼çš„ body å†…å®¹</li>
<li><code>mplus.PP.ReqBodyPure()</code> ä¿æŒ <code>request.Body</code> å¯ç”¨å¹¶è¿”å› <code>[]byte</code> æ ¼å¼çš„ body å†…å®¹</li>
<li><code>mplus.PP.ReqBodyMap()</code> ä¿æŒ <code>request.Body</code> å¯ç”¨å¹¶è¿”å› <code>map[string]interface{}</code> æ ¼å¼çš„ body å†…å®¹</li>
<li><code>mplus.PP.ReqBodyToUnmarshaler(unmarshaler json.Unmarshaler) </code> ä¿æŒ <code>request.Body</code> å¯ç”¨å¹¶å°† body å†…å®¹åºåˆ—åŒ–åˆ°   unmarshaler</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">V</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">Addr</span> <span class="kt">string</span> <span class="s">`</span><span class="s">json:&#34;addr&#34;</span><span class="s">`</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// (*V)(nil) mean that is a nil point which hold type info
</span><span class="c1"></span>	<span class="c1">// Bind model just need type info
</span><span class="c1"></span>	<span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:8080&#34;</span><span class="p">,</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">MRote</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Bind</span><span class="p">(</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span><span class="p">)</span><span class="p">.</span><span class="nf">HandlerFunc</span><span class="p">(</span><span class="nx">Address</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Address</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">pp</span> <span class="o">:=</span> <span class="nx">mplus</span><span class="p">.</span><span class="nf">PlusPlus</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span>

	<span class="nx">v</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">pp</span><span class="p">.</span><span class="nf">VO</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="p">(</span><span class="o">*</span><span class="nx">V</span><span class="p">)</span>
	<span class="k">if</span> <span class="p">!</span><span class="nx">ok</span> <span class="p">{</span>
		<span class="nx">pp</span><span class="p">.</span><span class="nf">BadRequest</span><span class="p">(</span><span class="p">)</span> <span class="c1">// 400
</span><span class="c1"></span>		<span class="k">return</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nb">string</span><span class="p">(</span><span class="nx">pp</span><span class="p">.</span><span class="nf">ReqBodyPure</span><span class="p">(</span><span class="p">)</span><span class="p">)</span> <span class="o">!=</span> <span class="nx">pp</span><span class="p">.</span><span class="nf">ReqBody</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>

		<span class="nx">pp</span><span class="p">.</span><span class="nf">InternalServerError</span><span class="p">(</span><span class="p">)</span> <span class="c1">// 500
</span><span class="c1"></span>		<span class="k">return</span>
	<span class="p">}</span>

	<span class="k">if</span> <span class="nx">bodyMap</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">pp</span><span class="p">.</span><span class="nf">ReqBodyMap</span><span class="p">(</span><span class="p">)</span><span class="p">;</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="o">||</span> <span class="nx">v</span><span class="p">.</span><span class="nx">Addr</span> <span class="o">!=</span> <span class="nx">bodyMap</span><span class="p">[</span><span class="s">&#34;addr&#34;</span><span class="p">]</span> <span class="p">{</span>

		<span class="nx">pp</span><span class="p">.</span><span class="nf">InternalServerError</span><span class="p">(</span><span class="p">)</span> <span class="c1">// 500
</span><span class="c1"></span>		<span class="k">return</span>
	<span class="p">}</span>

	<span class="nx">pp</span><span class="p">.</span><span class="nf">OK</span><span class="p">(</span><span class="p">)</span> <span class="c1">// 200
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ curl --request POST <span class="se">\
</span><span class="se"></span>&gt; --url http://localhost:8080/ <span class="se">\
</span><span class="se"></span>&gt; --header <span class="s1">&#39;content-type: application/json&#39;</span> <span class="se">\
</span><span class="se"></span>&gt; --data <span class="s1">&#39;{&#34;addr&#34;:&#34;å¹¿ä¸œçœæ·±åœ³å¸‚å—å±±åŒº xxx å·&#34;}&#39;</span>

&lt; HTTP/1.1 <span class="m">200</span> OK 
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>ä½¿ç”¨ Hugo å‘å¸ƒæ–‡ç« </title>
			<link>https://tangzixiang.github.io/posts/%E4%BD%BF%E7%94%A8-hugo-%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/</link>
			<pubDate>Sun, 15 Dec 2019 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E4%BD%BF%E7%94%A8-hugo-%E5%8F%91%E5%B8%83%E6%96%87%E7%AB%A0/</guid>
			<description>æ‘˜è¦  æ·»åŠ ä¸€ç¯‡æ–‡ç«  æœ¬åœ°å¼€å¯è‰ç¨¿ç®±è§†å›¾ è§£é™¤æ–‡ç« è‰ç¨¿çŠ¶æ€ å‘å¸ƒè‰ç¨¿æ–‡ç«  è®¾ç½®æ–‡ç« è¿‡æœŸæ—¶é—´/å‘å¸ƒæ—¶é—´ å‘å¸ƒä¿ç•™è¿‡æœŸæ–‡ç« åŠæœªå‘å¸ƒæ–‡ç«   æ·»åŠ ä¸€ç¯‡æ–‡ç«  åœ¨ä¸Šä¸€ç¯‡æ–‡ç«  ä½¿ç”¨ Hugo åˆ›å»ºä¸ªäºº Blog ä¸­ä»‹ç»äº† Hugo è¿™ä¸ªå·¥å…·ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä¸ºè‡ªå·±åˆ›å»ºä¸€ä¸ªå¥½çœ‹çš„åšå®¢ã€‚è¿™ç¯‡æ–‡ç« å»¶ç»­ä¸Šä¸€ç¯‡ä½¿ç”¨ registerforxxx.github.io ä½œä¸ºæ¡ˆä¾‹ã€‚
æ·»åŠ æ–‡ç« å‰æˆ‘ä»¬å…ˆå¯åŠ¨ Hugo
github.io $ hugo server æ·»åŠ æ–‡ç« ä¾æ—§æ˜¯ä½¿ç”¨ new å­å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨ posts ç›®å½•ä¸‹åˆ›å»ºä¸€ç¯‡åä¸º my-first-post
github.io $ hugo new posts/my-first-post.md åˆ›å»ºå®Œæˆåæ‰“å¼€æ–‡ç« å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š
--- title: &amp;#34;My First Post&amp;#34; date: 2019-12-16T21:38:04+08:00 draft: true tags: - untagged --- è¿™æ˜¯ä¸€ç¯‡ Markdown æ ¼å¼çš„æ–‡ç« ï¼Œæ–‡ç« çš„å¼€å¤´ç”±å‰å --- åŒ…è£¹äº†ä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç§°ä¸ºæ–‡ç« çš„å…ƒæ•°æ®ï¼Œç”¨äºè¯´æ˜æ–‡ç« çš„ç›¸å…³é…å¥—ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ä½†ä¸é™äºæ ‡é¢˜ã€æ—¥æœŸã€æ ‡ç­¾ã€æ˜¯å¦è‰ç¨¿ç­‰ã€‚
è¿™é‡Œå¯¹ä¸Šè¿°çš„å…ƒæ•°æ®åšè§£é‡Šå¦‚ä¸‹ï¼š
 title: æ–‡ç« çš„æ ‡é¢˜ date: æ–‡ç« çš„æ—¥æœŸ draft: æ–‡ç« æ˜¯å¦è‰ç¨¿ï¼Œè‰ç¨¿å†…å®¹ä¸ä¼šè¢«å‘å¸ƒ tags: ä¸ºå½“å‰æ–‡ç« æ‰“æ ‡ç­¾ï¼Œä¸åŒæ–‡ç« å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ ‡ç­¾  æ–‡ç« å†…å®¹éœ€è¦å†™åœ¨å…ƒæ•°æ®çš„åé¢ï¼š
--- title: &amp;#34;My First Post&amp;#34; date: 2019-12-16T21:38:04+08:00 draft: true tags: - untagged --- Quisque velit nisi, pretium ut lacinia in, elementum id enim.</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>æ·»åŠ ä¸€ç¯‡æ–‡ç« </li>
<li>æœ¬åœ°å¼€å¯è‰ç¨¿ç®±è§†å›¾</li>
<li>è§£é™¤æ–‡ç« è‰ç¨¿çŠ¶æ€</li>
<li>å‘å¸ƒè‰ç¨¿æ–‡ç« </li>
<li>è®¾ç½®æ–‡ç« è¿‡æœŸæ—¶é—´/å‘å¸ƒæ—¶é—´</li>
<li>å‘å¸ƒä¿ç•™è¿‡æœŸæ–‡ç« åŠæœªå‘å¸ƒæ–‡ç« </li>
</ul>
<h2 id="heading1">æ·»åŠ ä¸€ç¯‡æ–‡ç« </h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç«  <a href="../%E4%BD%BF%E7%94%A8-hugo-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA-blog/">ä½¿ç”¨ Hugo åˆ›å»ºä¸ªäºº Blog</a> ä¸­ä»‹ç»äº† <a href="https://gohugo.io/"><strong>Hugo</strong></a> è¿™ä¸ªå·¥å…·ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä¸ºè‡ªå·±åˆ›å»ºä¸€ä¸ªå¥½çœ‹çš„åšå®¢ã€‚è¿™ç¯‡æ–‡ç« å»¶ç»­ä¸Šä¸€ç¯‡ä½¿ç”¨  <code>registerforxxx.github.io</code> ä½œä¸ºæ¡ˆä¾‹ã€‚</p>
<p>æ·»åŠ æ–‡ç« å‰æˆ‘ä»¬å…ˆå¯åŠ¨ <strong>Hugo</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo server
</code></pre></div><p>æ·»åŠ æ–‡ç« ä¾æ—§æ˜¯ä½¿ç”¨ <code>new</code> å­å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬åœ¨ <code>posts</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ç¯‡åä¸º <code>my-first-post</code></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo new posts/my-first-post.md
</code></pre></div><p>åˆ›å»ºå®Œæˆåæ‰“å¼€æ–‡ç« å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">---
title: &#34;My First Post&#34; 
date: 2019-12-16T21:38:04+08:00
draft: true
tags:
  <span class="k">-</span> untagged
---
</code></pre></div><p>è¿™æ˜¯ä¸€ç¯‡ Markdown æ ¼å¼çš„æ–‡ç« ï¼Œæ–‡ç« çš„å¼€å¤´ç”±å‰å <code>---</code> åŒ…è£¹äº†ä¸€äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç§°ä¸ºæ–‡ç« çš„å…ƒæ•°æ®ï¼Œç”¨äºè¯´æ˜æ–‡ç« çš„ç›¸å…³é…å¥—ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…æ‹¬ä½†ä¸é™äºæ ‡é¢˜ã€æ—¥æœŸã€æ ‡ç­¾ã€æ˜¯å¦è‰ç¨¿ç­‰ã€‚</p>
<p>è¿™é‡Œå¯¹ä¸Šè¿°çš„å…ƒæ•°æ®åšè§£é‡Šå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>title</strong>: æ–‡ç« çš„æ ‡é¢˜</li>
<li><strong>date</strong>: æ–‡ç« çš„æ—¥æœŸ</li>
<li><strong>draft</strong>: æ–‡ç« æ˜¯å¦è‰ç¨¿ï¼Œè‰ç¨¿å†…å®¹ä¸ä¼šè¢«å‘å¸ƒ</li>
<li><strong>tags</strong>: ä¸ºå½“å‰æ–‡ç« æ‰“æ ‡ç­¾ï¼Œä¸åŒæ–‡ç« å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ ‡ç­¾</li>
</ul>
<p>æ–‡ç« å†…å®¹éœ€è¦å†™åœ¨å…ƒæ•°æ®çš„åé¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">---
title: &#34;My First Post&#34;
date: 2019-12-16T21:38:04+08:00
draft: true
tags: 
  <span class="k">-</span> untagged
---

Quisque velit nisi, pretium ut lacinia in, elementum id enim. Vivamus suscipit tortor eget felis porttitor 
volutpat. Donec rutrum congue leo eget malesuada. Nulla porttitor accumsan tincidunt. Praesent sapien 
massa, convallis a pellentesque nec, egestas non nisi. Curabitur arcu erat, accumsan id imperdiet et, 
porttitor at sem. Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Vivamus magna justo,
lacinia eget consectetur sed, convallis at tellus. Pellentesque in ipsum id orci porta dapibus. Vivamus 
magna justo, lacinia eget consectetur sed, convallis at tellus. 

Quisque velit nisi, pretium ut lacinia in, elementum id enim. Vivamus suscipit tortor eget felis porttitor 
volutpat. Donec rutrum congue leo eget malesuada. Nulla porttitor accumsan tincidunt. Praesent sapien 
massa, convallis a pellentesque nec, egestas non nisi. Curabitur arcu erat, accumsan id imperdiet et, 
porttitor at sem. Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Vivamus magna justo,
lacinia eget consectetur sed, convallis at tellus. Pellentesque in ipsum id orci porta dapibus. Vivamus 
magna justo, lacinia eget consectetur sed, convallis at tellus. 
</code></pre></div><p>å®Œæˆæ–‡ç« çš„ç¼–å†™åæˆ‘ä»¬å›åˆ°æµè§ˆå™¨ï¼Œå‘ç°å¹¶æ²¡æœ‰çœ‹åˆ°æ–°åŠ çš„æ–‡ç« ï¼Œå³ä½¿åˆ·æ–°å‡ ç™¾æ¬¡ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œè¿™æ˜¯å› ä¸ºæ–‡ç« ä»å¤„äºè‰ç¨¿ç®±çŠ¶æ€ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="/assets/image-20191218190656155.png" alt="image-20191218190656155"></p>
<h2 id="heading2">æœ¬åœ°å¼€å¯è‰ç¨¿ç®±è§†å›¾</h2>
<p>è®°å¾—æˆ‘ä»¬ä¸Šä¸€ç¯‡æ–‡ç« çš„ <strong>Hugo çš„ç‰¹è‰²</strong> éƒ¨åˆ†æœ‰æåˆ° <strong>Hugo</strong> å…·æœ‰é»˜è®¤çƒ­åŠ è½½çš„åŠŸèƒ½ï¼Œæ–°æ·»åŠ çš„æ–‡ç« ä¼šè‡ªåŠ¨åœ¨ç½‘é¡µä¸Šå®æ—¶æ¸²æŸ“ï¼Œä½†æ˜¯ï¼ä½†æ˜¯ï¼ä½†æ˜¯ï¼ä¸åŒ…æ‹¬è‰ç¨¿å†…å®¹ï¼</p>
<p>é€šè¿‡ <code>hugo new</code> å‘½ä»¤åˆ›å»ºçš„æ–‡ç« é»˜è®¤ä¼šè¢«æ‰“ä¸Šè‰ç¨¿çŠ¶æ€çš„<code>tag</code> å³ <code>draft</code> é€‰é¡¹ï¼Œ<strong>Hugo</strong> é€šè¿‡ <code>draft</code> é€‰é¡¹è¯†åˆ«åˆ°è¿™æ˜¯ä¸€ç¯‡è‰ç¨¿å†…å®¹ï¼Œæ‰€ä»¥ä¸ä¼šå¯¹å…¶è¿›è¡Œæ¸²æŸ“ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨æœ¬åœ°æŸ¥çœ‹è‰ç¨¿å†…å®¹ï¼Œåªéœ€è¦åœ¨å¯åŠ¨  <strong>Hugo</strong> çš„æ—¶å€™å¸¦ä¸Šå‚æ•° <code>-D</code>æˆ–åˆ™ <code>--buildDrafts</code> ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo server -D
</code></pre></div><p>å›åˆ°æµè§ˆå™¨ï¼š</p>
<p><img src="/assets/image-20191216215029610.png" alt="image-20191216215029610"></p>
<h2 id="heading3">è§£é™¤æ–‡ç« è‰ç¨¿çŠ¶æ€</h2>
<p>åœ¨æ­£å¼å‘å¸ƒæ–‡ç« å‰æˆ‘ä»¬éœ€è¦è§£é™¤å½“å‰æ–‡ç« çš„è‰ç¨¿çŠ¶æ€ï¼Œè§£é™¤è‰ç¨¿çŠ¶æ€åªéœ€è¦æŠŠæ–‡ç« å¼€å¤´çš„ <code>draft</code> é€‰é¡¹å»é™¤å³å¯ã€‚</p>
<h2 id="heading4">å‘å¸ƒè‰ç¨¿æ–‡ç« </h2>
<p>å¦‚æœéœ€è¦å°†è‰ç¨¿å†…å®¹è¿›è¡Œå‘å¸ƒï¼Œåœ¨æ‰§è¡Œ <code>hugo</code> ç”Ÿæˆå‘å¸ƒå†…å®¹æ—¶é™„å¸¦ <code>-D</code> æˆ–åˆ™ <code>--buildDrafts</code> å³å¯ã€‚</p>
<pre><code>github.io $ hugo -D
</code></pre><h2 id="heading5">è®¾ç½®æ–‡ç« è¿‡æœŸæ—¶é—´/å‘å¸ƒæ—¶é—´</h2>
<p><strong>Hugo</strong> é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªå…ƒæ•°æ®é€‰é¡¹æä¾›æ–‡ç« çš„è¿‡æœŸæ—¶é—´åŠå‘å¸ƒæ—¶é—´ï¼ˆå·²å‘å¸ƒçš„å¯ä»¥é€šè¿‡ URL é—´æ¥è®¿é—®ğŸ˜‚ï¼‰ï¼š</p>
<ul>
<li><strong>expiryDate</strong>ï¼šè¿‡æœŸæ—¶é—´ï¼Œå·²è¿‡æœŸçš„å†…å®¹ä¸ä¼šæ¸²æŸ“åˆ°ç½‘é¡µä¸­</li>
<li><strong>publishDate</strong>ï¼šå‘å¸ƒæ—¶é—´ï¼Œæœªåˆ°å‘å¸ƒæ—¶é—´ä¸ä¼šæ¸²æŸ“åˆ°ç½‘é¡µä¸­</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">---
title: &#34;å­”è&#34;
date: 2019-12-16T21:38:04+08:00
expiryDate: 2019-12-18T21:00:20+08:00
description: &#34;å­”èä½•è®¸äººä¹Ÿ&#34;
---
</code></pre></div><h2 id="heading6">å‘å¸ƒä¿ç•™è¿‡æœŸæ–‡ç« åŠæœªå‘å¸ƒæ–‡ç« </h2>
<p>ç›´æ¥æ‰§è¡Œ <code>hugo</code> ç”Ÿæˆçš„å‘å¸ƒå†…å®¹ä¸ä¼šæºå¸¦å·²è¿‡æœŸçš„æ–‡ç« æˆ–è€…æœªåˆ°å‘å¸ƒæ—¶é—´çš„æ–‡ç« .</p>
<p>éœ€è¦å‘å¸ƒæ—¶æºå¸¦è¿‡æœŸæ–‡ç« éœ€è¦æ‰§è¡Œæ—¶é™„å¸¦å‚æ•° <code>-E</code> æˆ–åˆ™ <code>--buildExpired</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo -E
</code></pre></div><p>éœ€è¦å‘å¸ƒæ—¶æºå¸¦æœªå‘å¸ƒæ–‡ç« éœ€è¦æ‰§è¡Œæ—¶é™„å¸¦å‚æ•° <code>-F</code> æˆ–åˆ™ <code>--buildFuture</code>ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo -F
</code></pre></div><p>å½“ç„¶ä¹Ÿå¯ä»¥é€‰æ‹©åŒæ—¶é™„å¸¦ä¸¤ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo -DEF
</code></pre></div><p>ç”Ÿæˆå‘å¸ƒæ–‡ä»¶å®Œæˆåæ¨é€æœ€æ–°å†…å®¹åˆ° GitHub ä¸Šå³å¯çœ‹åˆ°æœ€æ–°çš„æ–‡ç« ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title>ä½¿ç”¨ Hugo åˆ›å»ºä¸ªäºº Blog</title>
			<link>https://tangzixiang.github.io/posts/%E4%BD%BF%E7%94%A8-hugo-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA-blog/</link>
			<pubDate>Sun, 08 Dec 2019 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E4%BD%BF%E7%94%A8-hugo-%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA-blog/</guid>
			<description>æ‘˜è¦  ä½ å¾—å…ˆæœ‰ä¸ª GitHub è´¦å· Hugo æ˜¯ä»€ä¹ˆï¼Ÿ Hugo ç‰¹è‰² å®‰è£… Hugo Hugo Themes Hugo å­å‘½ä»¤ åˆ›å»ºä¸€ä¸ªç«™ç‚¹ç›®å½• æ·»åŠ ä¸»é¢˜ æ¨é€åˆ° GitHub ä¸Š é…ç½® 404 é¡µé¢ GitHub Page ç›¸å…³é™åˆ¶è¯´æ˜  ä½ å¾—å…ˆæœ‰ä¸ª GitHub è´¦å· åœ¨ä¸Šä¸€ç¯‡ å¦‚ä½•åœ¨ GitHub ä¸Šåˆ›å»º repository ä¸­ä»‹ç»äº†å¦‚ä½•åœ¨ GitHub ä¸Šæ³¨å†Œè´¦å·åŠä¸ªäººä»“åº“çš„è¯¦ç»†æ­¥éª¤ï¼Œå¦‚æœä½ å·²æœ‰è´¦å·å¯ä»¥è·³è¿‡æ­¤èŠ‚ï¼Œç»§ç»­å¾€ä¸‹ã€‚
è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å»¶ç»­ä¸Šä¸€ç« ä½¿ç”¨ registerforxxx.github.io ä½œä¸ºæ¡ˆä¾‹ã€‚
Hugo æ˜¯ä»€ä¹ˆï¼Ÿ å¼•ç”¨ å®˜æ–¹ ç»“æŸçš„ä¸€å¥è¯
 Hugo is a fast and modern static site generator written in Go, and designed to make website creation fun again
 ä¸€å¥è¯æ€»ç»“ï¼šHugo æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨ ğŸ˜†ã€‚</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>ä½ å¾—å…ˆæœ‰ä¸ª GitHub è´¦å·</li>
<li>Hugo æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Hugo ç‰¹è‰²</li>
<li>å®‰è£… Hugo</li>
<li>Hugo Themes</li>
<li>Hugo å­å‘½ä»¤</li>
<li>åˆ›å»ºä¸€ä¸ªç«™ç‚¹ç›®å½•</li>
<li>æ·»åŠ ä¸»é¢˜</li>
<li>æ¨é€åˆ° GitHub ä¸Š</li>
<li>é…ç½® 404 é¡µé¢</li>
<li>GitHub Page ç›¸å…³é™åˆ¶è¯´æ˜</li>
</ul>
<p><img src="/assets/image-20191215160355193.png" alt="image-20191215160355193"></p>
<h2 id="-github-">ä½ å¾—å…ˆæœ‰ä¸ª GitHub è´¦å·</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ <a href="../%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BB%93%E5%BA%93">å¦‚ä½•åœ¨ GitHub ä¸Šåˆ›å»º repository</a> ä¸­ä»‹ç»äº†å¦‚ä½•åœ¨ GitHub ä¸Šæ³¨å†Œè´¦å·åŠä¸ªäººä»“åº“çš„è¯¦ç»†æ­¥éª¤ï¼Œå¦‚æœä½ å·²æœ‰è´¦å·å¯ä»¥è·³è¿‡æ­¤èŠ‚ï¼Œç»§ç»­å¾€ä¸‹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å»¶ç»­ä¸Šä¸€ç« ä½¿ç”¨ <code>registerforxxx.github.io</code> ä½œä¸ºæ¡ˆä¾‹ã€‚</p>
<h2 id="hugo-">Hugo æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>å¼•ç”¨ <a href="https://gohugo.io/about/what-is-hugo/">å®˜æ–¹</a> ç»“æŸçš„ä¸€å¥è¯</p>
<blockquote>
<p>Hugo is a fast and modern static site generator written in Go, and designed to make website creation fun again</p>
</blockquote>
<p>ä¸€å¥è¯æ€»ç»“ï¼š<strong>Hugo</strong> æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ç”Ÿæˆå™¨ ğŸ˜†ã€‚</p>
<p>å¾€å¾€æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç½‘ç«™éœ€è¦éœ€è¦æ¯”è¾ƒä¸“ä¸šçš„å‰æœŸå‡†å¤‡ï¼Œè­¬å¦‚å»ºç«‹å¤æ‚çš„è¿è¡Œæ—¶ã€ä¾èµ–é¡¹å’Œæ•°æ®åº“ç­‰ç­‰ï¼Œé€šè¿‡ <strong>Hugo</strong> è¿™ä¸ªå·¥å…·ï¼Œä½ å¯ä»¥çœå»ä¸Šè¿°å¯¹å’‹ä»¬å°ç™½ä¸å‹å¥½çš„æ­¥éª¤æå®šä¸€ä¸ªè‡ªå·±ç½‘ç«™ã€‚</p>
<p>å½“ä½ å®Œæˆä¸€ç¯‡æ–‡ç« åï¼Œ<strong>Hugo</strong> ä¼šå¯¹ä½ çš„æ–‡ç« è¿›è¡ŒåŠ å·¥è¾“å‡ºé™æ€é¡µé¢ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™äº›é™æ€é¡µé¢å­˜æ”¾ï¼ˆæ¨é€ï¼‰åˆ°ä¸ªäººé™æ€ç«™ç‚¹ä¸Šå³å¯ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬ä½¿ç”¨ <strong>GitHub Pages</strong> ä½œä¸ºæˆ‘ä»¬çš„é™æ€ç«™ç‚¹ï¼Œå¦‚ä½•åˆ›å»º <strong>GitHub Pages</strong> å¯ä»¥å‚è€ƒ <a href="../%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BB%93%E5%BA%93">è¿™ç¯‡æ–‡ç« </a> çš„æœ€åä¸€æ­¥ã€‚</p>
<h2 id="hugo-1">Hugo ç‰¹è‰²</h2>
<ul>
<li>å¯ä»¥è®¾ç½®è‰ç¨¿ç®±ï¼Œæ–‡ç« å‘å¸ƒæ—¶é—´ï¼Œæ–‡ç« è¿‡æœŸæ—¶é—´</li>
<li>çƒ­åŠ è½½ï¼Œå¦‚æœæŠŠ <strong>Hugo</strong> ä½œä¸ºç«™ç‚¹æœåŠ¡å™¨ï¼Œæ›´æ–°å†…å®¹åä¸éœ€è¦é‡å¯æœåŠ¡ï¼Œå› ä¸º<strong>Hugo</strong> ä¼šè‡ªåŠ¨ç›‘æ§å˜åŒ–å¹¶æ›´æ–°é¡µé¢å†…å®¹ï¼Œå°±ç®—ä¸ä½¿ç”¨ <strong>Hugo</strong> ä½œä¸ºç«™ç‚¹æœåŠ¡å™¨ï¼Œåœ¨æœ¬åœ°æ‰“è‰ç¨¿çš„æ—¶å€™ä¹Ÿå¯ä»¥å¼€å¯çƒ­åŠ è½½ï¼Œå®æ—¶é¢„è§ˆå˜åŒ–å†…å®¹</li>
<li>ä¸»é¢˜é£æ ¼è¶…å¤šï¼Œé€‰æ‹©ä¸€ç§æ‹¿æ¥å³ç”¨</li>
<li>åŒºåˆ†å¼€å‘ç›®å½•åŠå‘å¸ƒç›®å½•ï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„å†…å®¹è¢«æš´éœ²</li>
<li>æ”¯æŒå›½é™…åŒ–</li>
</ul>
<h2 id="-hugo">å®‰è£… Hugo</h2>
<ul>
<li>Mac ç³»ç»Ÿå®‰è£…</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">brew install hugo
</code></pre></div><ul>
<li>Linux ç³»ç»Ÿå®‰è£…</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">snap install hugo
</code></pre></div><ul>
<li>Windows ç³»ç»Ÿå®‰è£…</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">choco install hugo -confirm
</code></pre></div><p>â€‹	æˆ–è€…ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">choco install hugo-extended -confirm
</code></pre></div><p>é™¤äº†ä¸Šè¿°é€šè¿‡å‘½ä»¤è¡Œæ–¹å¼å®‰è£…å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥åœ¨å…¶ <strong>GitHub</strong> releases <a href="https://github.com/gohugoio/hugo/releases">åœ°å€</a>ä¸‹è½½å¯¹åº”å‹ç¼©åŒ…ã€‚</p>
<p>ç”±äºç¬”è€…çš„ç³»ç»Ÿä¸º macOS æˆ‘ä»¬å·²æ­¤ä¸ºä¾‹ï¼Œæ›´è¯¦ç»†çš„å®‰è£…è¯´æ˜å¯ä»¥å‚è€ƒ <a href="https://gohugo.io/getting-started/installing/">å®˜æ–¹æ–‡æ¡£</a> ã€‚</p>
<p>å®‰è£…å®Œæˆåå¯ä»¥æµ‹è¯•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ hugo version
Hugo Static Site Generator v0.60.1/extended darwin/amd64 BuildDate: xxx
</code></pre></div><h2 id="hugo-themes">Hugo Themes</h2>
<p><strong>Hugo</strong> <a href="https://themes.gohugo.io/">ä¸»é¢˜</a> ç‰¹åˆ«å¤šï¼Œä¸æ­¢åšå®¢é£æ ¼ã€‚è¿å„ç±»ç½‘ç«™é£æ ¼ä¹Ÿæœ‰</p>
<p><img src="/assets/image-20191215144700276.png" alt="image-20191215144700276"></p>
<h2 id="hugo-2">Hugo å­å‘½ä»¤</h2>
<p><strong>Hugo</strong> æœ‰ä¸å°‘å­å‘½ä»¤, ä½¿ç”¨ <code>help</code> è¾“å‡ºå¦‚ä¸‹</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">~ $ hugo -h
hugo is the main command, used to build your Hugo site.

Hugo is a Fast and Flexible Static Site Generator
built with love by spf13 and friends in Go.

Complete documentation is available at http://gohugo.io/.

Usage:
  hugo <span class="o">[</span>flags<span class="o">]</span>
  hugo <span class="o">[</span>command<span class="o">]</span>

Available Commands:
  check       Contains some verification checks
  config      Print the site configuration
  convert     Convert your content to different formats
  deploy      Deploy your site to a Cloud provider.
  env         Print Hugo version and environment info
  gen         A collection of several useful generators.
  <span class="nb">help</span>        Help about any <span class="nb">command</span>
  import      Import your site from others.
  list        Listing out various types of content
  mod         Various Hugo Modules helpers.
  new         Create new content <span class="k">for</span> your site
  server      A high performance webserver
  version     Print the version number of Hugo
</code></pre></div><h2 id="heading1">åˆ›å»ºä¸€ä¸ªç«™ç‚¹ç›®å½•</h2>
<p>åˆ›å»ºä¸€ä¸ªç«™ç‚¹æˆ‘ä»¬éœ€è¦ä½¿ç”¨ <code>new</code> å­å‘½ä»¤ï¼Œå…·ä½“ç”¨æ³•æŸ¥çœ‹å¦‚ä¸‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">~ $ hugo new --help
Create a new content file and automatically <span class="nb">set</span> the date and title.
It will guess which kind of file to create based on the path provided.

You can also specify the kind with <span class="sb">`</span>-k KIND<span class="sb">`</span>.

If archetypes are provided in your theme or site, they will be used.

Ensure you run this within the root directory of your site.

Usage:
  hugo new <span class="o">[</span>path<span class="o">]</span> <span class="o">[</span>flags<span class="o">]</span>
  hugo new <span class="o">[</span>command<span class="o">]</span>

Available Commands:
  site        Create a new site <span class="o">(</span>skeleton<span class="o">)</span>
  theme       Create a new theme
</code></pre></div><p>è¿™é‡Œä½¿ç”¨ <code>sites</code> ç›®å½•ä½œä¸ºä¸ªäººç«™ç‚¹ä¸Šçº§ç›®å½•ï¼Œç„¶ååœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º <code>github.io</code> çš„é¡¹ç›®</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sites $ hugo new site github.io
</code></pre></div><p>åˆ›å»ºå®Œæˆåå¯ä»¥çœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆç›¸å…³ç›®å½•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sites $ tree <span class="c1"># tree å‘½ä»¤æŸ¥çœ‹å½“å‰ç›®å½•ç»“æ„</span>
.
â””â”€â”€ github.io <span class="c1"># åˆ›å»ºçš„é¡¹ç›®åï¼ˆä¸€ä¸ªç‹¬ç«‹çš„ç›®å½•ï¼‰</span>
    â”œâ”€â”€ archetypes 
    â”‚Â Â  â””â”€â”€ default.md
    â”œâ”€â”€ config.toml <span class="c1"># é…ç½®æ–‡ä»¶</span>
    â”œâ”€â”€ content <span class="c1"># æ–‡ç« æ”¾åœ¨è¿™é‡Œ</span>
    â”œâ”€â”€ data
    â”œâ”€â”€ layouts 
    â”œâ”€â”€ static
    â””â”€â”€ themes <span class="c1"># ä¸»é¢˜æ”¾åœ¨è¿™é‡Œ</span>
</code></pre></div><h2 id="heading2">æ·»åŠ ä¸»é¢˜</h2>
<p>æ¥ç€é€‰æ‹©ä¸€ä¸ªä¸»é¢˜ä½œä¸ºä¸ªäººç«™ç‚¹ä¸»é¢˜ï¼Œè¿™é‡Œä¸¾ä¾‹é€‰æ‹©äº† <a href="https://themes.gohugo.io/hermit/">Hermit</a> è¿™ä¸ªä¸»é¢˜ï¼ŒæŒ‰ç…§ <strong>Getting started</strong> çš„æ­¥éª¤ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°†è¿™ä¸ªä¸»é¢˜æ·»åŠ è¿›æ¥</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ git clone https://github.com/Track3/hermit.git themes/hermit
</code></pre></div><p>æ‹·è´è¯¥ä¸»é¢˜é»˜è®¤çš„é…ç½®æ–‡ä»¶</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ cp themes/hermit/exampleSite/config.toml .
</code></pre></div><p>æ‰§è¡Œ <code>server</code> å­å‘½ä»¤å¯åŠ¨æœ¬åœ°é¢„è§ˆåŠŸèƒ½ï¼Œé»˜è®¤ä¼šç»‘å®šåˆ° <code>1313</code> ç«¯å£</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo server
</code></pre></div><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ <code>http://localhost:1313</code> å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡ç« æœ€å¼€å§‹çš„ç•Œé¢äº†ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬è¿˜æ²¡æœ‰ä»»ä½•çš„æ–‡ç« ï¼Œæ‰€ä»¥ç‚¹å‡»ç½‘é¡µä¸Šçš„ç›¸å…³é“¾æ¥ä¼šå‡ºç° 404</p>
<p>ä¸ºäº†è¿›ä¸€æ­¥çœ‹åˆ°å’Œ  <a href="https://themes.gohugo.io/hermit/">Hermit</a>  è¿™ä¸ª Demo ä¸€æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–çš„æ–‡ç« å†…å®¹æ‹·è´è¿‡æ¥</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ cp -r themes/hermit/exampleSite/content/* ./content/
</code></pre></div><p>æ³¨æ„ï¼Œç”±äº <strong>Hugo</strong> é»˜è®¤å¼€å¯äº†çƒ­åŠ è½½åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸­æ–­å·²å¯åŠ¨çš„ Hugo æœåŠ¡ï¼Œå¯ä»¥åœ¨å¦å¤–ä¸€ä¸ªç»ˆç«¯çª—å£çš„å½“å‰ç›®å½•ä¸‹æ‰§è¡Œè¯¥è¯­å¥ï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°åŸæ¥å¯åŠ¨æœåŠ¡çš„ç»ˆç«¯è¾“å‡ºä¸å°‘æç¤ºä¿¡æ¯è¡¨ç¤ºå†…å®¹å·²æ›´æ–°ï¼Œè¿™æ—¶å€™ç‚¹å‡»é¡µé¢ä¸Šçš„é“¾æ¥å°±æœ‰å†…å®¹äº†ã€‚</p>
<h2 id="-github-1">æ¨é€åˆ° GitHub ä¸Š</h2>
<p>æœ€åæˆ‘ä»¬éœ€è¦å°†å…¶æ¨é€åˆ°å‡†å¤‡å¥½çš„ <strong>GitHub</strong> ä¸Šï¼Œä¸è¿‡æ¨é€å‰æœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>
<p>æ¨é€å‰æˆ‘ä»¬éœ€è¦æ‰§è¡Œ <code>hugo</code> ç”Ÿæˆæœ€ç»ˆçš„é™æ€é¡µé¢,é»˜è®¤ä¼šå¯¼å‡ºåˆ° <code>public</code> ç›®å½•ä¸‹</p>
</li>
<li>
<p>å¯¼å‡ºé™æ€é¡µé¢å‰æˆ‘ä»¬éœ€è¦æ›´æ–° <code>config.toml</code> é…ç½®æ–‡ä»¶,å°† <code>baseURL = &quot;https://example.com&quot;</code> æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„åŸŸåï¼Œç”±äºå½“å‰æ¡ˆä¾‹ä½¿ç”¨çš„æ˜¯<code>registerforxxx.github.io</code>ï¼Œæ›´æ–°åä¸º <code>baseURL = &quot;https://registerforxxx.github.io&quot;</code>ï¼Œè¿™ä¸€æ­¥çš„ç¼ºå¤±ä¼šç›´æ¥å¯¼è‡´é¡µé¢çš„é™æ€èµ„æºæ‰¾ä¸åˆ°ï¼Œäººè¯å°±æ˜¯ï¼šä¸€ç‰‡ç©ºç™½é™¤äº†æ–‡å­—~ğŸ˜¤</p>
</li>
</ol>
<p>æ‰§è¡Œå‘½ä»¤å¯¼å‡ºæœ€ç»ˆçš„é™æ€é¡µé¢ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">github.io $ hugo
</code></pre></div><p>æ‰“å¼€æ¡ˆä¾‹é¡¹ç›®<a href="https://github.com/registerforxxx/registerforxxx.github.io">åœ°å€</a>ï¼Œè·å–æ¨é€åœ°å€ï¼š</p>
<p><img src="/assets/image-20191215154409674.png" alt="image-20191215154409674"></p>
<p>ç‚¹å‡» <code>clone or download</code> ç»¿è‰²æŒ‰é’®æ‹·è´é‡Œé¢çš„åœ°å€ï¼Œç„¶åè¿›å…¥ <code>public</code> å­ç›®å½•å®Œæˆä»¥ä¸‹æ­¥éª¤</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># åˆå§‹åŒ– git ç¯å¢ƒ</span>
public $ git init

<span class="c1"># æ‰§è¡Œ git remote add origin ä¸Šä¸€æ­¥æ‹·è´çš„åœ°å€</span>
<span class="c1"># æˆ–è€…ä½¿ç”¨ ssh æ–¹å¼</span>
public $ git remote add origin https://github.com/registerforxxx/registerforxxx.github.io.git


public $ git add .
public $ git commit -am <span class="s2">&#34;first commit&#34;</span>
public $ git pull origin master
public $ git push -u origin master
</code></pre></div><p>å®Œæˆåæˆ‘ä»¬ä¾¿å¯ä»¥ç›´æ¥è®¿é—®å’‹ä»¬çš„é¡¹ç›®åœ°å€ï¼š<a href="https://registerforxxx.github.io/"><a href="https://registerforxxx.github.io/">https://registerforxxx.github.io/</a></a></p>
<p><img src="/assets/image-20191215180231614.png" alt="image-20191215180231614"></p>
<p>å¦‚æœä¸æ¸…æ¥šç”Ÿæˆçš„ GitHub Page åœ°å€å¯ä»¥åœ¨è¿™ä¸ªä½ç½®æ‰¾åˆ°ğŸ‘‡</p>
<p><img src="/assets/image-20191215180621239.png" alt="image-20191215180621239"></p>
<p>ä¸€ç›´ä¸‹æ‹‰åˆ° <code>GitHub Pages</code> æ¿å—ä¾¿å¯çœ‹åˆ°å…·ä½“åœ°å€ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„å¦‚æœä»“åº“æ²¡æœ‰ä»»ä½•å†…å®¹æ˜¯æ— æ³•ç”Ÿæˆåœ°å€çš„ã€‚</p>
<p><img src="/assets/image-20191215180728933.png" alt="image-20191215180728933"></p>
<h2 id="-404-">é…ç½® 404 é¡µé¢</h2>
<p>404 é¡µé¢å¸¸è§äºç”¨æˆ·è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„èµ„æºï¼Œ<a href="https://help.github.com/en/github/working-with-github-pages/creating-a-custom-404-page-for-your-github-pages-site">GitHub</a> é»˜è®¤æ”¯æŒ 404 ï¼Œåªéœ€è¦ä½ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å­˜æ”¾ä¸€ä¸ª <code>404.html</code></p>
<p><img src="/assets/image-20191218210807231.png" alt="image-20191218210807231"></p>
<p><strong>Hugo</strong> çš„å¤§éƒ¨åˆ†ä¸»é¢˜éƒ½æ˜¯åŒ…å« 404 é¡µé¢çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠå…¶æ¨é€åˆ° GitHub ä¸Šå³å¯ã€‚</p>
<p><img src="/assets/image-20191218211048673.png" alt="image-20191218211048673"></p>
<h2 id="github-page-">GitHub Page ç›¸å…³é™åˆ¶è¯´æ˜</h2>
<blockquote>
<p>GitHub Pages ç«™ç‚¹å—åˆ°ä»¥ä¸‹ä½¿ç”¨é™åˆ¶çš„çº¦æŸï¼š</p>
<ul>
<li>GitHub Pages æºä»“åº“å»ºè®®çš„é™åˆ¶ä¸º 1GBã€‚æ›´å¤šä¿¡æ¯è¯·å‚é˜…â€œ<a href="https://help.github.com/cn/articles/what-is-my-disk-quota/#file-and-repository-size-limitations">æˆ‘çš„ç£ç›˜é…é¢æ˜¯å¤šå°‘ï¼Ÿ</a>â€</li>
<li>å‘å¸ƒçš„ GitHub Pages ç«™ç‚¹ä¸å¾—è¶…è¿‡ 1 GBã€‚</li>
<li>GitHub Pages ç«™ç‚¹çš„<em>è½¯</em>å¸¦å®½é™åˆ¶ä¸ºæ¯æœˆ 100GBã€‚</li>
<li>GitHub Pages ç«™ç‚¹çš„<em>è½¯</em>é™åˆ¶ä¸ºæ¯å°æ—¶ 10 æ¬¡æ„å»ºã€‚</li>
</ul>
</blockquote>
<p>æ›´å¤šé™åˆ¶å†…å®¹å¯ä»¥å‚è€ƒ<a href="https://help.github.com/cn/github/working-with-github-pages/about-github-pages#usage-limits">é™åˆ¶</a></p>
]]></content>
		</item>
		
		<item>
			<title>å¦‚ä½•åœ¨ GitHub ä¸Šåˆ›å»º repository </title>
			<link>https://tangzixiang.github.io/posts/%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BB%93%E5%BA%93/</link>
			<pubDate>Sun, 01 Dec 2019 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E5%A6%82%E4%BD%95%E5%9C%A8-github-%E4%B8%8A%E5%88%9B%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%BB%93%E5%BA%93/</guid>
			<description>æ‘˜è¦  åˆ›å»º GitHub è´¦å· åˆ›å»ºé¦–ä¸ª repository  åˆ›å»ºGitHub è´¦å· é¦–å…ˆç™»å½• GitHub å®˜ç½‘åœ°å€ï¼Œè§åˆ°å¦‚ä¸‹ç•Œé¢
å¡«å…¥ä¸ªäººä¿¡æ¯åä¼šè·³è½¬è‡³éªŒè¯é¡µé¢
éªŒè¯é€šè¿‡åè¿›å…¥ä¸‹ä¸ªé¡µé¢é€‰æ‹©æ˜¯å¦ä½¿ç”¨ä¸“ä¸šç‰ˆæˆ–å…è´¹ç‰ˆ
ä¸ªäººç‰ˆåŠä¸“ä¸šç‰ˆé™¤äº†ä»·æ ¼ä¸ä¸€æ ·ä¹‹å¤–å‚è€ƒå¦‚ä¸‹ï¼š
è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä¸ªäººæ¿å—çš„å…è´¹ç‰ˆè¿›å…¥ä¸‹ä¸ªé¡µé¢
è¿™é‡Œæˆ‘ä»¬é€‰æ‹© None å’Œ Create a website with GitHub Pages ç„¶åç‚¹å‡» Complete å®Œæˆä¸ªäººè´¦å·çš„æ³¨å†Œæµç¨‹,è¿›å…¥æœªéªŒè¯é‚®ç®±æç¤ºé¡µé¢
è¿™é‡Œå¯ä»¥çœ‹åˆ°å³ä¸Šè§’å·²ç»è·å¾—ä¸€ä¸ª GitHub é»˜è®¤åˆ†é…çš„å¤´åƒ
åˆ›å»ºé¦–ä¸ª repository ä¸Šä¸€æ­¥æˆ‘ä»¬å®Œæˆäº†ä¸ªäººè´¦å·çš„åˆ›å»ºï¼Œåœ¨é‚®ç®±ç‚¹å‡»ç¡®è®¤éªŒè¯åä¼šé»˜è®¤è¿›å…¥ GitHub çš„åˆ›å»ºä»“åº“é¡µé¢
è¿™é‡Œæˆ‘ä»¬ä»¥åˆ›å»ºä¸ªäººç«™ç‚¹ä»“åº“ä¸¾ä¾‹ï¼Œè¾“å…¥å®Œæˆåç‚¹å‡» create repository å®Œæˆä¸ªäººç¬¬ä¸€ä¸ªä»“åº“çš„åˆ›å»º</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>åˆ›å»º GitHub è´¦å·</li>
<li>åˆ›å»ºé¦–ä¸ª repository</li>
</ul>
<h2 id="github-">åˆ›å»ºGitHub è´¦å·</h2>
<p>é¦–å…ˆç™»å½• <a href="https://github.com/">GitHub</a> å®˜ç½‘åœ°å€ï¼Œè§åˆ°å¦‚ä¸‹ç•Œé¢</p>
<p><img src="/assets/image-20191215120931164.png" alt="image-20191215120931164"></p>
<p>å¡«å…¥ä¸ªäººä¿¡æ¯åä¼šè·³è½¬è‡³éªŒè¯é¡µé¢</p>
<p><img src="/assets/image-20191215122300714.png" alt="image-20191215122300714"></p>
<p>éªŒè¯é€šè¿‡åè¿›å…¥ä¸‹ä¸ªé¡µé¢é€‰æ‹©æ˜¯å¦ä½¿ç”¨ä¸“ä¸šç‰ˆæˆ–å…è´¹ç‰ˆ</p>
<p><img src="/assets/image-20191215122444247.png" alt="image-20191215122444247"></p>
<p>ä¸ªäººç‰ˆåŠä¸“ä¸šç‰ˆé™¤äº†ä»·æ ¼ä¸ä¸€æ ·ä¹‹å¤–å‚è€ƒå¦‚ä¸‹ï¼š</p>
<p><img src="/assets/image-20191215122703136.png" alt="image-20191215122703136"></p>
<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä¸ªäººæ¿å—çš„å…è´¹ç‰ˆè¿›å…¥ä¸‹ä¸ªé¡µé¢</p>
<p><img src="/assets/join-customize.png" alt=""></p>
<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹© <strong>None</strong> å’Œ  <strong>Create a website with GitHub Pages</strong> ç„¶åç‚¹å‡» <strong>Complete</strong> å®Œæˆä¸ªäººè´¦å·çš„æ³¨å†Œæµç¨‹,è¿›å…¥æœªéªŒè¯é‚®ç®±æç¤ºé¡µé¢</p>
<p><img src="/assets/image-20191215123611317.png" alt="image-20191215123611317"></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°å³ä¸Šè§’å·²ç»è·å¾—ä¸€ä¸ª GitHub é»˜è®¤åˆ†é…çš„å¤´åƒ</p>
<h2 id="-repository">åˆ›å»ºé¦–ä¸ª repository</h2>
<p>ä¸Šä¸€æ­¥æˆ‘ä»¬å®Œæˆäº†ä¸ªäººè´¦å·çš„åˆ›å»ºï¼Œåœ¨é‚®ç®±ç‚¹å‡»ç¡®è®¤éªŒè¯åä¼šé»˜è®¤è¿›å…¥ GitHub çš„åˆ›å»ºä»“åº“é¡µé¢</p>
<p><img src="/assets/image-20191215125746084.png" alt="image-20191215125746084"></p>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥åˆ›å»ºä¸ªäººç«™ç‚¹ä»“åº“ä¸¾ä¾‹ï¼Œè¾“å…¥å®Œæˆåç‚¹å‡» <strong>create repository</strong> å®Œæˆä¸ªäººç¬¬ä¸€ä¸ªä»“åº“çš„åˆ›å»º</p>
<p><img src="/assets/image-20191215130022873.png" alt="image-20191215130022873"></p>
]]></content>
		</item>
		
		<item>
			<title>[Linux] Linux å­¦ä¹ ç¬”è®°</title>
			<link>https://tangzixiang.github.io/posts/linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
			<pubDate>Thu, 21 Feb 2019 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/linux-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
			<description>å¸®åŠ©å‘½ä»¤  åœ¨åªè®°å¾—éƒ¨åˆ†å…³é”®å­—å‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ man -k æ¥æœç´¢ éœ€è¦çŸ¥é“æŸä¸ªå‘½ä»¤çš„ç®€è¦è¯´æ˜ï¼Œå¯ä»¥ä½¿ç”¨ whatis ï¼Œæ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥ä½¿ç”¨ info å‘½ä»¤ æŸ¥çœ‹å‘½ä»¤åœ¨å“ªä¸ªä½ç½®å¯ä»¥ä½¿ç”¨Â which å‘½ä»¤ å¯¹äºå‘½ä»¤çš„å…·ä½“å‚æ•°åŠä½¿ç”¨æ–¹æ³•ï¼Œéœ€è¦ç”¨åˆ°å¼ºå¤§çš„ man  ä½¿ç”¨å‘½ä»¤ whatis  åŠŸèƒ½ï¼š ç®€è¦è¯´æ˜æŒ‡å®šå‘½ä»¤çš„ä½œç”¨ ä½¿ç”¨æ–¹å¼ï¼š  tangzixiang@dev-lyy-web4:~$ whatis -h Usage: whatis [OPTION...] KEYWORD... -d, --debug emit debugging messages -v, --verbose print verbose warning messages -r, --regex interpret each keyword as a regex -w, --wildcard the keyword(s) contain wildcards -l, --long do not trim output to terminal width -C, --config-file=FILE use this user configuration file -L, --locale=LOCALE define the locale for this search -m, --systems=SYSTEM use manual pages from other systems -M, --manpath=PATH set search path for manual pages to PATH -s, --sections=LIST, --section=LIST search only these sections (colon-separated) -?</description>
			<content type="html"><![CDATA[<h2 id="heading">å¸®åŠ©å‘½ä»¤</h2>
<ul>
<li>åœ¨åªè®°å¾—éƒ¨åˆ†å…³é”®å­—å‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ <code>man -k</code> æ¥æœç´¢</li>
<li>éœ€è¦çŸ¥é“æŸä¸ªå‘½ä»¤çš„ç®€è¦è¯´æ˜ï¼Œå¯ä»¥ä½¿ç”¨ <code>whatis</code> ï¼Œæ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥ä½¿ç”¨ <code>info</code> å‘½ä»¤</li>
<li>æŸ¥çœ‹å‘½ä»¤åœ¨å“ªä¸ªä½ç½®å¯ä»¥ä½¿ç”¨Â <code>which</code> å‘½ä»¤</li>
<li>å¯¹äºå‘½ä»¤çš„å…·ä½“å‚æ•°åŠä½¿ç”¨æ–¹æ³•ï¼Œéœ€è¦ç”¨åˆ°å¼ºå¤§çš„ <code>man</code></li>
</ul>
<h3 id="heading1">ä½¿ç”¨å‘½ä»¤</h3>
<h4 id="whatis">whatis</h4>
<ul>
<li>åŠŸèƒ½ï¼š ç®€è¦è¯´æ˜æŒ‡å®šå‘½ä»¤çš„ä½œç”¨</li>
<li>ä½¿ç”¨æ–¹å¼ï¼š</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ whatis -h
Usage: whatis <span class="o">[</span>OPTION...<span class="o">]</span> KEYWORD...

  -d, --debug                emit debugging messages
  -v, --verbose              print verbose warning messages
  -r, --regex                interpret each keyword as a regex
  -w, --wildcard             the keyword<span class="o">(</span>s<span class="o">)</span> contain wildcards
  -l, --long                 <span class="k">do</span> not trim output to terminal width
  -C, --config-file<span class="o">=</span>FILE     use this user configuration file
  -L, --locale<span class="o">=</span>LOCALE        define the locale <span class="k">for</span> this search
  -m, --systems<span class="o">=</span>SYSTEM       use manual pages from other systems
  -M, --manpath<span class="o">=</span>PATH         <span class="nb">set</span> search path <span class="k">for</span> manual pages to PATH
  -s, --sections<span class="o">=</span>LIST, --section<span class="o">=</span>LIST
                             search only these sections <span class="o">(</span>colon-separated<span class="o">)</span>
  -?, --help                 give this <span class="nb">help</span> list
      --usage                give a short usage message
  -V, --version              print program version
</code></pre></div><ul>
<li>ä¸¾ä¾‹ï¼š</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ whatis which
which <span class="o">(</span>1<span class="o">)</span>            - locate a <span class="nb">command</span>

<span class="c1"># ç®€è¦è¯´æ˜ whi å¼€å¤´çš„å‘½ä»¤</span>
tangzixiang@dev-lyy-web4:~$ whatis -w <span class="s2">&#34;whi*&#34;</span>
which <span class="o">(</span>1<span class="o">)</span>            - locate a <span class="nb">command</span>
whiptail <span class="o">(</span>1<span class="o">)</span>         - display dialog boxes from shell scripts

<span class="c1"># ä½¿ç”¨æ­£åˆ™è§£æ `whi*`</span>
tangzixiang@dev-lyy-web4:~$ whatis -r <span class="s2">&#34;whi*&#34;</span>
git-whatchanged <span class="o">(</span>1<span class="o">)</span>  - Show logs with difference each commit introduces
pam_pwhistory <span class="o">(</span>8<span class="o">)</span>    - PAM module to remember last passwords
pam_wheel <span class="o">(</span>8<span class="o">)</span>        - Only permit root access to members of group wheel
whatis <span class="o">(</span>1<span class="o">)</span>           - display one-line manual page descriptions
whereis <span class="o">(</span>1<span class="o">)</span>          - locate the binary, source, and manual page files <span class="k">for</span> a <span class="nb">command</span>
which <span class="o">(</span>1<span class="o">)</span>            - locate a <span class="nb">command</span>
whiptail <span class="o">(</span>1<span class="o">)</span>         - display dialog boxes from shell scripts
who <span class="o">(</span>1<span class="o">)</span>              - show who is logged on
whoami <span class="o">(</span>1<span class="o">)</span>           - print effective userid
</code></pre></div><h4 id="info">info</h4>
<ul>
<li>åŠŸèƒ½ï¼šæ›´åŠ è¯¦ç»†çš„è¯´æ˜å‘½ä»¤çš„ä½œç”¨</li>
<li>ä½¿ç”¨æ–¹å¼ï¼š</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ info -h
Usage: info <span class="o">[</span>OPTION<span class="o">]</span>... <span class="o">[</span>MENU-ITEM...<span class="o">]</span>

Read documentation in Info format.

Options:
  -a, --all                    use all matching manuals.
  -k, --apropos<span class="o">=</span>STRING         look up STRING in all indices of all manuals.
  -d, --directory<span class="o">=</span>DIR          add DIR to INFOPATH.
      --dribble<span class="o">=</span>FILE           remember user keystrokes in FILENAME.
  -f, --file<span class="o">=</span>MANUAL            specify Info manual to visit.
  -h, --help                   display this <span class="nb">help</span> and exit.
      --index-search<span class="o">=</span>STRING    go to node pointed by index entry STRING.
  -n, --node<span class="o">=</span>NODENAME          specify nodes in first visited Info file.
  -o, --output<span class="o">=</span>FILE            output selected nodes to FILE.
  -R, --raw-escapes            output <span class="s2">&#34;raw&#34;</span> ANSI escapes <span class="o">(</span>default<span class="o">)</span>.
      --no-raw-escapes         output escapes as literal text.
      --restore<span class="o">=</span>FILE           <span class="nb">read</span> initial keystrokes from FILE.
  -O, --show-options, --usage  go to command-line options node.
      --strict-node-location   <span class="o">(</span><span class="k">for</span> debugging<span class="o">)</span> use Info file pointers as-is.
      --subnodes               recursively output menu items.
  -v, --variable <span class="nv">VAR</span><span class="o">=</span>VALUE     assign VALUE to Info variable VAR.
      --vi-keys                use vi-like and less-like key bindings.
      --version                display version information and exit.
  -w, --where, --location      print physical location of Info file.
  -x, --debug<span class="o">=</span>NUMBER           <span class="nb">set</span> debugging level <span class="o">(</span>-1 <span class="k">for</span> all<span class="o">)</span>.
</code></pre></div><h4 id="man">man</h4>
<ul>
<li>åŠŸèƒ½ï¼šæŸ¥è¯¢å‘½ä»¤çš„è¯´æ˜æ–‡æ¡£</li>
<li>ä½¿ç”¨æ–¹å¼:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ man -h
Usage: man <span class="o">[</span>OPTION...<span class="o">]</span> <span class="o">[</span>SECTION<span class="o">]</span> PAGE...

  -C, --config-file<span class="o">=</span>FILE     use this user configuration file
  -d, --debug                emit debugging messages
  -D, --default              reset all options to their default values
      --warnings<span class="o">[</span><span class="o">=</span>WARNINGS<span class="o">]</span>  <span class="nb">enable</span> warnings from groff

 Main modes of operation:
  -f, --whatis               equivalent to whatis
  -k, --apropos              equivalent to apropos
  -K, --global-apropos       search <span class="k">for</span> text in all pages
  -l, --local-file           interpret PAGE argument<span class="o">(</span>s<span class="o">)</span> as <span class="nb">local</span> filename<span class="o">(</span>s<span class="o">)</span>
  -w, --where, --path, --location
                             print physical location of man page<span class="o">(</span>s<span class="o">)</span>
  -W, --where-cat, --location-cat
                             print physical location of cat file<span class="o">(</span>s<span class="o">)</span>

  -c, --catman               used by catman to reformat out of date cat pages
  -R, --recode<span class="o">=</span>ENCODING      output <span class="nb">source</span> page encoded in ENCODING

 Finding manual pages:
  -L, --locale<span class="o">=</span>LOCALE        define the locale <span class="k">for</span> this particular man search
  -m, --systems<span class="o">=</span>SYSTEM       use manual pages from other systems
  -M, --manpath<span class="o">=</span>PATH         <span class="nb">set</span> search path <span class="k">for</span> manual pages to PATH

  -S, -s, --sections<span class="o">=</span>LIST    use colon separated section list

  -e, --extension<span class="o">=</span>EXTENSION  limit search to extension <span class="nb">type</span> EXTENSION

  -i, --ignore-case          look <span class="k">for</span> pages <span class="k">case</span>-insensitively <span class="o">(</span>default<span class="o">)</span>
  -I, --match-case           look <span class="k">for</span> pages <span class="k">case</span>-sensitively

      --regex                show all pages matching regex
      --wildcard             show all pages matching wildcard

      --names-only           make --regex and --wildcard match page names only,
                             not descriptions

  -a, --all                  find all matching manual pages
  -u, --update               force a cache consistency check

      --no-subpages          don<span class="s1">&#39;t try subpages, e.g. &#39;</span>man foo bar<span class="s1">&#39; =&gt; &#39;</span>man
                             foo-bar<span class="s1">&#39;
</span><span class="s1">
</span><span class="s1"> Controlling formatted output:
</span><span class="s1">  -P, --pager=PAGER          use program PAGER to display output
</span><span class="s1">  -r, --prompt=STRING        provide the `less&#39;</span> pager with a prompt

  -7, --ascii                display ASCII translation of certain latin1 chars
  -E, --encoding<span class="o">=</span>ENCODING    use selected output encoding
      --no-hyphenation, --nh turn off hyphenation
      --no-justification,                              --nj   turn off justification
  -p, --preprocessor<span class="o">=</span>STRING  STRING indicates which preprocessors to run:
                             e - <span class="o">[</span>n<span class="o">]</span>eqn, p - pic, t - tbl,
g - grap, r - refer, v - vgrind

  -t, --troff                use groff to format pages
  -T, --troff-device<span class="o">[</span><span class="o">=</span>DEVICE<span class="o">]</span>   use groff with selected device

  -H, --html<span class="o">[</span><span class="o">=</span>BROWSER<span class="o">]</span>       use www-browser or BROWSER to display HTML output
  -X, --gxditview<span class="o">[</span><span class="o">=</span>RESOLUTION<span class="o">]</span>   use groff and display through gxditview
                             <span class="o">(</span>X11<span class="o">)</span>:
                             -X <span class="o">=</span> -TX75, -X100 <span class="o">=</span> -TX100, -X100-12 <span class="o">=</span> -TX100-12
  -Z, --ditroff              use groff and force it to produce ditroff

  -?, --help                 give this <span class="nb">help</span> list
      --usage                give a short usage message
  -V, --version              print program version
</code></pre></div><h4 id="which">which</h4>
<ul>
<li>åŠŸèƒ½ï¼šæŸ¥è¯¢å‘½ä»¤çš„å­˜æ”¾è·¯å¾„</li>
<li>ä½¿ç”¨æ–¹å¼:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ which make
/usr/bin/make
</code></pre></div><h4 id="whereis">whereis</h4>
<ul>
<li>åŠŸèƒ½ï¼šæŸ¥è¯¢å‘½ä»¤çš„æœç´¢è·¯å¾„ï¼Œå½“ç³»ç»Ÿä¸­å®‰è£…äº†åŒä¸€ä¸ªè½¯ä»¶çš„å¤šä¸ªç‰ˆæœ¬ï¼Œä¸ç¡®å®šä½¿ç”¨é‚£ä¸ªç‰ˆæœ¬æ—¶ï¼Œè¿™ä¸ªå‘½ä»¤å°±èƒ½æ´¾ä¸Šç”¨åœº</li>
<li>ä½¿ç”¨æ–¹å¼:</li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ whereis python
python: /usr/bin/python3.5 /usr/bin/python /usr/bin/python3.5m /usr/bin/python2.7 /usr/bin/python2.7-config /usr/lib/python3.5 /usr/lib/python2.7 /etc/python3.5 /etc/python /etc/python2.7 /usr/local/lib/python3.5 /usr/local/lib/python2.7 /usr/include/python2.7 /usr/share/python /usr/share/man/man1/python.1.gz
</code></pre></div><h2 id="heading2">æ–‡ä»¶åŠç›®å½•ç®¡ç†å‘½ä»¤</h2>
<ul>
<li>æ–‡ä»¶æŸ¥è¯¢æ˜¯é‡ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨ <code>find</code> æˆ–åˆ™ <code>locate</code>æ¥è¿›è¡Œï¼Œ<code>find</code> çš„å‚æ•°ä¸°å¯Œï¼Œä¹Ÿéå¸¸å¼ºå¤§</li>
<li>ç»™æ–‡ä»¶åˆ›å»ºåˆ«åæˆ–é“¾æ¥å¯ä»¥ä½¿ç”¨ <code>ln</code></li>
</ul>
<h3 id="heading3">åˆ—å‡ºç›®å½•é¡¹</h3>
<ol>
<li>æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ–‡ä»¶ä¸ªæ•°</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ find ./ <span class="p">|</span> wc -l
<span class="m">74</span>
</code></pre></div><ol start="2">
<li>æŒ‰æ—¶é—´æ’åºï¼Œä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤º</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ ls -lrt --full-time -h
total 34M
drwxr-xr-x <span class="m">5</span> tangzixiang tangzixiang 4.0K 2018-10-29 10:04:44.000000000 +0800 mawar_deploy
-rw-r--r-- <span class="m">1</span> tangzixiang tangzixiang  12M 2018-11-29 10:25:53.000000000 +0800 mawar_deploy-v3.2.7-20181129.tar.gz
drwxr-xr-x <span class="m">5</span> tangzixiang tangzixiang 4.0K 2019-02-19 19:09:50.240419974 +0800 <span class="nb">test</span>
-rw-rw-r-- <span class="m">1</span> tangzixiang tangzixiang  62K 2019-02-20 16:21:31.528091951 +0800 output.txt
-rw-rw-r-- <span class="m">1</span> tangzixiang tangzixiang 1.6M 2019-02-20 16:32:45.064693140 +0800 readelf_out.txt
-rwxr-xr-x <span class="m">1</span> tangzixiang tangzixiang  20M 2019-02-21 14:52:29.000000000 +0800 mawar-linux-amd64
</code></pre></div><ol start="3">
<li>ç»™æ¯é¡¹æ–‡ä»¶å‰é¢åŠ ç¼–å·</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ ls -lrt -h <span class="p">|</span>cat -n
     1	total 34M
     2	drwxr-xr-x <span class="m">5</span> tangzixiang tangzixiang 4.0K Oct <span class="m">29</span> 10:04 mawar_deploy
     3	-rw-r--r-- <span class="m">1</span> tangzixiang tangzixiang  12M Nov <span class="m">29</span> 10:25 mawar_deploy-v3.2.7-20181129.tar.gz
     4	drwxr-xr-x <span class="m">5</span> tangzixiang tangzixiang 4.0K Feb <span class="m">19</span> 19:09 <span class="nb">test</span>
     5	-rw-rw-r-- <span class="m">1</span> tangzixiang tangzixiang  62K Feb <span class="m">20</span> 16:21 output.txt
     6	-rw-rw-r-- <span class="m">1</span> tangzixiang tangzixiang 1.6M Feb <span class="m">20</span> 16:32 readelf_out.txt
     7	-rwxr-xr-x <span class="m">1</span> tangzixiang tangzixiang  20M Feb <span class="m">21</span> 14:52 mawar-linux-amd64
</code></pre></div><h3 id="heading4">æŸ¥æ‰¾ç›®å½•åŠæ–‡ä»¶</h3>
<p><code>find</code> æ˜¯å®æ—¶æŸ¥æ‰¾ï¼Œå¦‚æœéœ€è¦æ›´å¿«çš„æŸ¥æ‰¾å¯ä»¥è¯•ä¸‹ <code>locate</code>ï¼Œ<code>locate</code> ä¼šä¸ºæ–‡ä»¶ç³»ç»Ÿå»ºç«‹ç´¢å¼•æ•°æ®åº“ï¼Œå¦‚æœæœ‰æ–‡ä»¶æ›´æ–°ï¼Œéœ€è¦å®šæœŸæ‰§è¡Œæ›´æ–°å‘½ä»¤æ¥æ›´æ–°ç´¢å¼•æ•°æ®åº“</p>
<ol>
<li>æœå¯»æ–‡ä»¶æˆ–ç›®å½•</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ find ./ -name <span class="s2">&#34;*.md&#34;</span>
./test/README.md
./test/._README.md
./mawar_deploy/README.md
./mawar_deploy/._README.md

tangzixiang@dev-lyy-web5:~$ find ./ -name <span class="s2">&#34;*.md&#34;</span> <span class="p">|</span> xargs file
./test/README.md:           UTF-8 Unicode text, with very long lines
./test/._README.md:         AppleDouble encoded Macintosh file
./mawar_deploy/README.md:   UTF-8 Unicode text, with very long lines
./mawar_deploy/._README.md: AppleDouble encoded Macintosh file
</code></pre></div><ol start="2">
<li>é€’å½’å½“å‰ç›®å½•åŠå­ç›®å½•åˆ é™¤æ‰€æœ‰ txt æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ ls
mawar_deploy readelf_out.txt  <span class="nb">test</span>
tangzixiang@dev-lyy-web5:~$ find ./ -name <span class="s2">&#34;*.txt&#34;</span> -exec rm <span class="o">{</span><span class="o">}</span> <span class="se">\;</span>
tangzixiang@dev-lyy-web5:~$ ls
mawar_deploy  <span class="nb">test</span>
</code></pre></div><ol start="3">
<li>å¯»æ‰¾åŒ…å«æœ‰ <code>superv</code> çš„è·¯å¾„</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ locate supervisord
/etc/supervisor/supervisord.conf
/usr/local/bin/echo_supervisord_conf
/usr/local/bin/supervisord
</code></pre></div><ol start="4">
<li>æ›´æ–° <code>locate</code> çš„ç´¢å¼•æ•°æ®åº“</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ sudo updatedb
</code></pre></div><h3 id="heading5">æŸ¥çœ‹æ–‡ä»¶å†…å®¹</h3>
<ol>
<li>æ˜¾ç¤ºæ–‡ä»¶å†…å®¹åŠ è¡Œå·</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ cat -n test.txt
</code></pre></div><ol start="2">
<li>åˆ†é¡µæŸ¥çœ‹åˆ—è¡¨é¡¹</li>
</ol>
<pre><code>tangzixiang@dev-lyy-web5:~$ ls -al |more
tangzixiang@dev-lyy-web5:~$ ls -al |less
</code></pre><ol start="3">
<li>æŸ¥çœ‹æ–‡ä»¶å‰ 10 è¡Œ</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~<span class="nv">$head</span> <span class="m">10</span> test.txt
</code></pre></div><ol start="4">
<li>æŸ¥çœ‹æ–‡ä»¶æœ€å 10 è¡Œ</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~<span class="nv">$tail</span> <span class="m">10</span> test.txt
</code></pre></div><ol start="5">
<li>æŸ¥çœ‹æ–‡ä»¶çš„åŒºåˆ«</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~/test$ date &gt;&gt; b.txt
tangzixiang@dev-lyy-web5:~<span class="nv">$diff</span> a.txt b.txt
230a231
&gt; Thu Feb <span class="m">21</span> 19:51:25 CST <span class="m">2019</span>
</code></pre></div><ol start="6">
<li>åŠ¨æ€å±•ç¤ºæ–‡ä»¶æœ€æ–°å†…å®¹</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ tail -f /data/log/supervisor/mawar/supervisor_stdout.log
<span class="o">[</span>REQUEST<span class="o">]</span> 0c1f57b5-fffa-498c-9420-e318dce68a4a

tangzixiang@dev-lyy-web5:~$ tailf /data/log/supervisor/mawar/supervisor_stdout.log
<span class="o">[</span>REQUEST<span class="o">]</span> 0c1f57b5-fffa-498c-9420-e318dce68a4a
</code></pre></div><h3 id="heading6">æŸ¥æ‰¾æ–‡ä»¶å†…å®¹</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ egrep logCamerasChangeGroupMsg /data/log/supervisor_stdout.log -C5
<span class="o">[</span>REQUEST<span class="o">]</span> 40ab5634-366d-41d9-9a03-66d8df986898
<span class="o">[</span>GIN<span class="o">]</span> 2019/02/20 - 02:15:56 <span class="p">|</span> <span class="m">200</span> <span class="p">|</span>    5.262809ms <span class="p">|</span> 192.168.100.238 <span class="p">|</span>  POST     
<span class="o">[</span>logCamerasChangeGroupMsg<span class="o">]</span> log api request error: The dotted field <span class="s1">&#39;config.inte_face_min_size&#39;</span> in <span class="s1">&#39;properties.last_data.config.inte_face_min_size&#39;</span> is not valid <span class="k">for</span> storage.
<span class="o">[</span>REQUEST<span class="o">]</span> 6cdebd11-aebb-4756-84c6-26347be152a0
</code></pre></div><h3 id="heading7">æ–‡ä»¶ä¸ç›®å½•æƒé™ä¿®æ”¹</h3>
<ul>
<li>æ”¹å˜æ–‡ä»¶çš„æ‹¥æœ‰è€… <code>chown</code></li>
<li>æ”¹å˜æ–‡ä»¶è¯»ã€å†™ã€æ‰§è¡Œç­‰æƒé™ <code>chmod</code></li>
<li>é€’å½’å­ç›®å½•ä¿®æ”¹ <code>chown -R user dir/</code></li>
<li>å¢åŠ è„šæœ¬å¯æ‰§è¡Œæƒé™ <code>chmod a+x myscript</code></li>
</ul>
<h3 id="heading8">ç»™æ–‡ä»¶å¢åŠ åˆ«å</h3>
<p>åˆ›å»ºç¬¦å·é“¾æ¥/ç¡¬é“¾æ¥</p>
<ul>
<li><code>ln cc ccAgain</code> ç¡¬é“¾æ¥ï¼›åˆ é™¤æºä»ç„¶èƒ½æ‰¾åˆ°ï¼Œcc æ˜¯æº</li>
<li><code>ln -s cc ccTo</code> è½¯é“¾æ¥ï¼›ç¬¦å·é“¾æ¥(è½¯é“¾æ¥) ,åˆ é™¤æºå¦ä¸€ä¸ªæ— æ³•ä½¿ç”¨ï¼Œcc æ˜¯æº</li>
</ul>
<h3 id="heading9">ç®¡é“å’Œé‡å®šå‘</h3>
<ul>
<li>æ‰¹å¤„ç†å‘½ä»¤è¿æ¥æ‰§è¡Œï¼Œä½¿ç”¨ <code>|</code></li>
<li>ä¸²è”ä½¿ç”¨ <code>;</code></li>
<li>å‰é¢æˆåŠŸåˆ™æ‰§è¡Œåé¢ä¸€æ¡ï¼Œå¦åˆ™ä¸æ‰§è¡Œ <code>&amp;&amp;</code></li>
<li>å‰é¢å¤±è´¥åˆ™åé¢æ‰§è¡Œ <code>||</code></li>
<li>æ¸…ç©ºæ–‡ä»¶ <code>:&gt; a.txt</code></li>
</ul>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web5:~$ ls ./ <span class="o">&amp;&amp;</span> <span class="nb">echo</span>  suss! <span class="o">||</span> <span class="nb">echo</span> failed
mawar_deploy  mawar_deploy-v3.2.7-20181129.tar.gz  mawar-linux-amd64  <span class="nb">test</span>
suss!

tangzixiang@dev-lyy-web5:~$ <span class="k">if</span> <span class="nb">true</span> <span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> success<span class="p">;</span><span class="k">else</span> <span class="nb">echo</span> failed<span class="p">;</span><span class="k">fi</span>
success
tangzixiang@dev-lyy-web5:~$ <span class="k">if</span> <span class="nb">false</span> <span class="p">;</span><span class="k">then</span> <span class="nb">echo</span> success<span class="p">;</span><span class="k">else</span> <span class="nb">echo</span> failed<span class="p">;</span><span class="k">fi</span>
failed
</code></pre></div><h3 id="bash--">Bash å¿«æ·é”® è¾“å…¥æˆ–åˆ é™¤</h3>
<ul>
<li><code>CTRL-U</code> åˆ é™¤å…¨è¡Œ</li>
<li><code>CTRL-W</code> åˆ é™¤å½“å‰å…‰æ ‡åˆ°å‰é¢ä¸€ä¸ªç©ºæ ¼çš„å†…å®¹</li>
<li><code>CTRL-H</code> åˆ é™¤å…‰æ ‡å‰é¢çš„å­—ç¬¦</li>
<li><code>CTRL-R</code> åˆ·å±(iterm2)</li>
</ul>
<h3 id="heading10">ç»¼åˆåº”ç”¨</h3>
<pre><code>tangzixiang@dev-lyy-web4:~$ cat -b /var/www/mawar.yaml |egrep app_id
    34	    app_id: &quot;devt&quot;
   103	  app_id: &quot;mawa&quot;
   
tangzixiang@dev-lyy-web4:~$ cat -b /var/www/mawar.yaml |egrep app_id | egrep -v devt
   103	  app_id: &quot;mawa&quot;
   
tangzixiang@dev-lyy-web4:~$ cat -b /var/www/mawar.yaml |egrep app_id | egrep -v devt |wc -l
1
</code></pre><h2 id="heading11">æ–‡æœ¬å¤„ç†</h2>
<h3 id="heading12">åŸºç¡€æŸ¥æ‰¾</h3>
<ol>
<li>æŸ¥æ‰¾ text æ–‡ä»¶å’Œ md æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -name <span class="s2">&#34;*.md&#34;</span> -o -name <span class="s2">&#34;*.txt&#34;</span>
./mawar_deploy/README.md
./mawar_deploy/._README.md
./a.txt
</code></pre></div><ol start="2">
<li>æ­£åˆ™æ–¹å¼æŸ¥æ‰¾</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -regex <span class="s2">&#34;</span><span class="s2">.*\(\.txt\|\.md\)</span>$<span class="s2">&#34;</span>
./a.txt
./mawar_deploy/README.md
./mawar_deploy/._README.md
</code></pre></div><ol start="3">
<li>å–åï¼Œå¦å®šå‚æ•° <code>!</code></li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . ! -regex <span class="s2">&#34;</span><span class="s2">.*\(\.txt\|\.md\)</span>$<span class="s2">&#34;</span>
.
./.lesshst
./.bashrc
./.cache
</code></pre></div><ol start="4">
<li>æŒ‡å®šæ·±åº¦ï¼ŒæŸ¥æ‰¾æŒ‡å®šç±»å‹ä¸ºæ–‡ä»¶çš„</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -maxdepth <span class="m">1</span> -type f
./.lesshst
./.bashrc
./a.txt
</code></pre></div><h3 id="heading13">å®šåˆ¶æœç´¢</h3>
<ul>
<li>
<p><code>d</code> ä»£è¡¨ç›®å½• <code>f</code> ä»£è¡¨æ–‡ä»¶ <code>l</code> ä»£ç é“¾æ¥</p>
</li>
<li>
<p><code>find</code> æ”¯æŒçš„æ–‡ä»¶ç±»å‹æ£€ç´¢å¯ä»¥åŒºåˆ†æ™®é€šæ–‡ä»¶æˆ–æ˜¯ç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œç›®å½•ç­‰ï¼Œä½†æ— æ³•åŒºåˆ†æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶è¿˜æ˜¯æ™®é€šæ–‡æœ¬æ–‡ä»¶ã€‚</p>
</li>
</ul>
<ol>
<li>æŸ¥æ‰¾æŒ‡å®šç±»å‹</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type d
.
./.cache
./mawar_deploy
./mawar_deploy/bin
</code></pre></div><ol start="2">
<li><code>file</code> å‘½ä»¤å¯ä»¥æ£€æŸ¥æ–‡ä»¶çš„å…·ä½“ç±»å‹ äºŒé™æ­¢æˆ–åˆ™æ–‡æœ¬æ–‡ä»¶ç­‰</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ file .profile
.profile: ASCII text

tangzixiang@dev-lyy-web4:~$ file mawar-linux-amd64
mawar-linux-amd64: ELF 64-bit LSB executable, x86-64, version <span class="m">1</span> <span class="o">(</span>SYSV<span class="o">)</span>, statically linked, not stripped
</code></pre></div><ol start="3">
<li>æŸ¥è¯¢ç©ºæ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -empty
./.cache/motd.legal-displayed
./a.txt
</code></pre></div><h4 id="heading14">æŒ‰æ—¶é—´æœç´¢</h4>
<ul>
<li>atime è®¿é—®æ—¶é—´å•ä½æ˜¯å¤©</li>
<li>amin è®¿é—®æ—¶é—´å•ä½æ˜¯åˆ†é’Ÿ</li>
<li>mtime ä¿®æ”¹æ—¶é—´(å†…å®¹è¢«ä¿®æ”¹)</li>
<li>ctime å˜åŒ–æ—¶é—´(å…ƒæ•°æ®æˆ–æƒé™å˜åŒ–)</li>
</ul>
<ol>
<li>æœ€è¿‘ 7 å¤©å†…è¢«è®¿é—®è¿‡çš„æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find -atime -7 -type f
./.lesshst
./.bashrc
./.cache/motd.legal-displayed
./a.txt
</code></pre></div><ol start="2">
<li>æœ€è¿‘ç¬¬ 7 å¤©è¢«è®¿é—®è¿‡çš„æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find -atime -7 -type f
</code></pre></div><ol start="3">
<li>æŸ¥è¯¢ 7å¤©å‰è¢«è®¿é—®è¿‡çš„æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find -atime +7 -type f
./.viminfo
</code></pre></div><h4 id="heading15">æŒ‰å¤§å°æœç´¢</h4>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"> -size n<span class="o">[</span>cwbkMG<span class="o">]</span>
     File uses n units of space, rounding up.  The following suffixes can be used:
    <span class="sb">`</span>b<span class="s1">&#39;    for 512-byte blocks (this is the default if no suffix is used)
</span><span class="s1">    `c&#39;</span>    <span class="k">for</span> bytes
    <span class="sb">`</span>w<span class="s1">&#39;    for two-byte words
</span><span class="s1">    `k&#39;</span>    <span class="k">for</span> Kilobytes <span class="o">(</span>units of <span class="m">1024</span> bytes<span class="o">)</span>
    <span class="sb">`</span>M<span class="s1">&#39;    for Megabytes (units of 1048576 bytes)
</span><span class="s1">    `G&#39;</span>    <span class="k">for</span> Gigabytes <span class="o">(</span>units of <span class="m">1073741824</span> bytes<span class="o">)</span>
</code></pre></div><ol>
<li>å¯»æ‰¾å¤§äº 18M çš„æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -size +18M
./mawar-linux-amd64
</code></pre></div><h4 id="heading16">æŒ‰æƒé™æŸ¥æ‰¾</h4>
<ol>
<li>æŸ¥æ‰¾å…·æœ‰å¯æ‰§è¡Œæƒé™çš„æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -perm <span class="m">644</span>
./.bashrc
./mawar_deploy-v3.2.7-20181129.tar.gz
</code></pre></div><h4 id="heading17">æŒ‰ç”¨æˆ·æŸ¥æ‰¾</h4>
<ol>
<li>æŸ¥æ‰¾ç”¨æˆ· x æ‰€æ‹¥æœ‰çš„æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -user tangzixiang
./.lesshst
./.bashrc
</code></pre></div><h3 id="heading18">æŸ¥æ‰¾å®Œæˆåç»­åŠ¨ä½œ</h3>
<ol>
<li>åˆ é™¤å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ swp æ–‡ä»¶</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -name <span class="s2">&#34;*.swp&#34;</span> -delete
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -name <span class="s2">&#34;*.swp&#34;</span> <span class="p">|</span> xargs rm
</code></pre></div><ol start="2">
<li>å˜æ›´æ‰€æœ‰æƒä¸º weber</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -user root -exec chown weber <span class="o">{</span><span class="o">}</span> <span class="se">\;</span>
</code></pre></div><ul>
<li><code>{}</code> æ˜¯ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ï¼Œå¯¹äºæ¯ä¸€ä¸ªåŒ¹é…çš„æ–‡ä»¶ï¼Œ<code>{}</code> ä¼šè¢«æ›¿æ¢æˆç›¸åº”çš„æ–‡ä»¶å</li>
</ul>
<ol start="3">
<li>å°†æ‰¾åˆ°çš„æ–‡ä»¶æ‹·è´åˆ°å¦ä¸€ä¸ªç›®å½•</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -mtime +10 -name <span class="s2">&#34;*.txt&#34;</span> -exec cp <span class="o">{</span><span class="o">}</span> newdir <span class="se">\;</span>
</code></pre></div><ol start="4">
<li>ç»“åˆå¤šä¸ªå‘½ä»¤</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ find . -type f -exec ./commands.sh <span class="o">{</span><span class="o">}</span> <span class="se">\;</span>
</code></pre></div><ul>
<li>å¦‚æœéœ€è¦åç»­æ‰§è¡Œå¤šä¸ªå‘½ä»¤ï¼Œå¯ä»¥å°†å¤šä¸ªå‘½ä»¤å†™æˆä¸€ä¸ªè„šæœ¬ï¼Œç„¶å <code>-exec</code> è°ƒç”¨æ—¶æ‰§è¡Œè„šæœ¬å³å¯</li>
</ul>
<h3 id="grep-">grep æ–‡æœ¬æœç´¢</h3>
<p><code>grep match_patten file</code> é»˜è®¤è®¿é—®åŒ¹é…è¡Œ</p>
<p>å¸¸ç”¨å‚æ•°</p>
<ul>
<li>
<p><code>-o</code> åªè¾“å‡ºåŒ¹é…çš„æ–‡æœ¬è¡Œï¼Œ<code>-v</code> åªè¾“å‡ºæ²¡æœ‰åŒ¹é…çš„æ–‡æœ¬è¡Œ</p>
</li>
<li>
<p><code>-c</code> ç»Ÿè®¡æ–‡ä»¶ä¸­åŒ…å«æ–‡æœ¬çš„æ¬¡æ•°</p>
</li>
<li>
<p><code>-n</code> æœç´¢å¹¶æ‰“å°è¡Œå·</p>
</li>
<li>
<p><code>-i</code> æœç´¢æ—¶å¿½ç•¥å¤§å°å†™</p>
</li>
<li>
<p><code>-l</code> åªæ‰“å°æœç´¢åˆ°çš„æ–‡ä»¶åï¼Œé€‚ç”¨äºç›®å½•æœç´¢ <code>-R</code> æ—¶ä½¿ç”¨</p>
</li>
</ul>
<ol>
<li>åœ¨å¤šçº§ç›®å½•ä¸­å¯¹æ–‡æœ¬è¿›è¡Œæœç´¢</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ sudo grep pack  -R -n .
./mawar_deploy/Makefile:55:pack
</code></pre></div><ol start="2">
<li>ç¬¦åˆå¤šæ¡ä»¶ä¹‹ä¸€</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ grep -e <span class="s2">&#34;pack&#34;</span> -e <span class="s2">&#34;PHONY&#34;</span> -R ./
./mawar_deploy/Makefile:pack:
./mawar_deploy/Makefile:.PHONY: pack
</code></pre></div><ol start="3">
<li>å°† <code>sql</code> ä¸­çš„ <code>where</code> æŸ¥è¯¢å‡ºæ¥</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang@dev-lyy-web4:~$ cat xxx.Log <span class="p">|</span> tr a-z A-Z <span class="p">|</span>grep <span class="s2">&#34;FROM&#34;</span> <span class="p">|</span> grep <span class="s2">&#34;WHERE&#34;</span>
</code></pre></div><h3 id="awk">awk</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>[Lua] Lua æ¨¡å—ä¸åŒ…</title>
			<link>https://tangzixiang.github.io/posts/lua-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/</link>
			<pubDate>Sun, 24 Jun 2018 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/lua-%E6%A8%A1%E5%9D%97%E4%B8%8E%E5%8C%85/</guid>
			<description>æ‘˜è¦  æ¨¡å—çš„æ¦‚å¿µ å¦‚ä½•å®ç°ä¸€ä¸ªæ¨¡å— å¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å— æ¨¡å—åŠ è½½è·¯å¾„ package.path ç¯å¢ƒå˜é‡ LUA_PATH çš„è®¾ç½® è·¨ç›®å½•ä¸‹çš„æ¨¡å—å¼•ç”¨ ç¼“å­˜æœºåˆ¶ æ‰§è¡Œç¯å¢ƒ å‚è€ƒ  Lua ä¸­æ¨¡å—çš„æ¦‚å¿µ  æ¨¡å—ç±»ä¼¼äºä¸€ä¸ªå°è£…åº“ï¼Œä» Lua 5.1 å¼€å§‹ï¼ŒLua åŠ å…¥äº†æ ‡å‡†çš„æ¨¡å—ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥æŠŠä¸€äº›å…¬ç”¨çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä»¥ API æ¥å£çš„å½¢å¼åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨ï¼Œæœ‰åˆ©äºä»£ç çš„é‡ç”¨å’Œé™ä½ä»£ç è€¦åˆåº¦ã€‚ Lua çš„æ¨¡å—æ˜¯ç”±å˜é‡ã€å‡½æ•°ç­‰å·²çŸ¥å…ƒç´ ç»„æˆçš„ tableï¼Œå› æ­¤åˆ›å»ºä¸€ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª tableï¼Œç„¶åæŠŠéœ€è¦å¯¼å‡ºçš„å¸¸é‡ã€å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ª table å°±è¡Œã€‚  å¦‚ä½•å®ç°ä¸€ä¸ªæ¨¡å— -- åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡ local Account = {balance = 0} -- å¯¹å¤–å¼€æ”¾ withdraw å‡½æ•° function Account.withDraw(v) Account.balance = Account.balance - v end -- ä¸å¯¹å¤–å¼€æ”¾  function getBalance() return Account.balance end return Account æ–°å»º Account.lua æ–‡ä»¶ï¼Œå¦‚ä¸Šç¤ºä¾‹å®ç°äº†ä¸€ä¸ªåä¸º Account çš„æ¨¡å—ï¼Œé€šè¿‡ return å…³é”®å­—å®ç°å†…å®¹çš„å¯¼å‡º,å…¶ä¸­å¤–éƒ¨å¯è®¿é—®çš„å†…å®¹ä¸º Account.</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ol>
<li>æ¨¡å—çš„æ¦‚å¿µ</li>
<li>å¦‚ä½•å®ç°ä¸€ä¸ªæ¨¡å—</li>
<li>å¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å—</li>
<li>æ¨¡å—åŠ è½½è·¯å¾„ <code>package.path</code></li>
<li>ç¯å¢ƒå˜é‡ <code>LUA_PATH</code> çš„è®¾ç½®</li>
<li>è·¨ç›®å½•ä¸‹çš„æ¨¡å—å¼•ç”¨</li>
<li>ç¼“å­˜æœºåˆ¶</li>
<li>æ‰§è¡Œç¯å¢ƒ</li>
<li>å‚è€ƒ</li>
</ol>
<h2 id="lua-">Lua ä¸­æ¨¡å—çš„æ¦‚å¿µ</h2>
<ul>
<li>æ¨¡å—ç±»ä¼¼äºä¸€ä¸ªå°è£…åº“ï¼Œä» Lua 5.1 å¼€å§‹ï¼ŒLua åŠ å…¥äº†æ ‡å‡†çš„æ¨¡å—ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥æŠŠä¸€äº›å…¬ç”¨çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä»¥ API æ¥å£çš„å½¢å¼åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨ï¼Œæœ‰åˆ©äºä»£ç çš„é‡ç”¨å’Œé™ä½ä»£ç è€¦åˆåº¦ã€‚</li>
<li>Lua çš„æ¨¡å—æ˜¯ç”±å˜é‡ã€å‡½æ•°ç­‰å·²çŸ¥å…ƒç´ ç»„æˆçš„ tableï¼Œå› æ­¤åˆ›å»ºä¸€ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª tableï¼Œç„¶åæŠŠéœ€è¦å¯¼å‡ºçš„å¸¸é‡ã€å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ª table å°±è¡Œã€‚</li>
</ul>
<h2 id="heading1">å¦‚ä½•å®ç°ä¸€ä¸ªæ¨¡å—</h2>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="c1">-- åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡</span>
<span class="kd">local</span> <span class="n">Account</span> <span class="o">=</span> <span class="p">{</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">}</span>

<span class="c1">-- å¯¹å¤–å¼€æ”¾ withdraw å‡½æ•°</span>
<span class="kr">function</span> <span class="nc">Account</span><span class="p">.</span><span class="nf">withDraw</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
  <span class="n">Account.balance</span> <span class="o">=</span> <span class="n">Account.balance</span> <span class="o">-</span> <span class="n">v</span>
<span class="kr">end</span>

<span class="c1">-- ä¸å¯¹å¤–å¼€æ”¾ </span>
<span class="kr">function</span> <span class="nf">getBalance</span><span class="p">(</span><span class="p">)</span>
  <span class="kr">return</span> <span class="n">Account.balance</span>
<span class="kr">end</span>

<span class="kr">return</span> <span class="n">Account</span>
</code></pre></div><p>æ–°å»º <code>Account.lua</code> æ–‡ä»¶ï¼Œå¦‚ä¸Šç¤ºä¾‹å®ç°äº†ä¸€ä¸ªåä¸º <code>Account</code> çš„æ¨¡å—ï¼Œé€šè¿‡ <code>return</code> å…³é”®å­—å®ç°å†…å®¹çš„å¯¼å‡º,å…¶ä¸­å¤–éƒ¨å¯è®¿é—®çš„å†…å®¹ä¸º <code>Account.blance</code> å­—æ®µä»¥åŠ <code>Account.withDraw</code> å‡½æ•°ã€‚</p>
<h2 id="heading2">å¦‚ä½•å¼•ç”¨ä¸€ä¸ªæ¨¡å—</h2>
<p>åœ¨ lua ä¸­é€šè¿‡å…¨å±€å‡½æ•° <code>require</code> æ¥å®ç°å¯¹å…¶ä»–æ¨¡å—çš„å¼•ç”¨ã€‚</p>
<p>ä½¿ç”¨æ–¹å¼:</p>
<ul>
<li><code>require(&quot;&lt;æ¨¡å—å&gt;&quot;)</code></li>
<li><code>require &quot;&lt;æ¨¡å—å&gt;&quot;</code></li>
</ul>
<p>ç¤ºä¾‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="cp">#!/usr/local/bin/lua</span>

<span class="c1">-- åŠ è½½ Account.lua æ–‡ä»¶</span>
<span class="kd">local</span> <span class="n">Account</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">Account</span><span class="s2">&#34;</span><span class="p">)</span>

<span class="n">print</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>

<span class="c1">-- [[ éå†å†…å®¹ ]]</span>
<span class="kr">function</span> <span class="nf">printTable</span><span class="p">(</span><span class="n">_tab</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">_tab</span><span class="p">)</span> <span class="kr">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">printTable</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œç»“æœå¦‚ä¸‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./Account_test.lua
table: 0x7ffc6b406a20
balance	<span class="m">0</span>
withDraw	<span class="k">function</span>: 0x7ffc6b407190
</code></pre></div><p>ä»æ‰§è¡Œç»“æœå¯ä»¥çœ‹å‡ºå¯¼å…¥çš„æ¨¡å—å®é™…ä¾¿æ˜¯ä¸€ä¸ª table çš„å®ç°ã€‚å¯¼å…¥çš„ <code>Account</code> æ¨¡å—åŒ…å« <code>balance</code> å­—æ®µä»¥åŠ <code>withDraw</code> æ–¹æ³•ã€‚</p>
<p>ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹éƒ½åªæ˜¯è®²åˆ°è¿™é‡Œï¼Œå®é™…ä¸Šå¿½ç•¥äº†ä¸€ä¸ªå¾ˆé‡è¦çš„é—®é¢˜ä¾¿æ˜¯ä¸åŒè·¯å¾„ä¸‹çš„æ¨¡å—çš„å¼•ç”¨ã€‚</p>
<h2 id="-packagepath">æ¨¡å—åŠ è½½è·¯å¾„ <code>package.path</code></h2>
<p>åœ¨ Lua ä¸­ä½ æ— æ³•åƒå…¶ä»–è¯­è¨€é‚£æ ·ç›´æ¥é€šè¿‡ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„æ¥å¼•ç”¨æ¨¡å—ï¼ŒLua çš„æ¨¡å—å¼•ç”¨ä¸å…¶åŠ è½½æœºåˆ¶æœ‰å…³ï¼Œå…·ä½“åŠ è½½è·¯å¾„å¯ä»¥é€šè¿‡å…¨å±€å¯¹è±¡ <code>package </code> å¯¹è±¡çš„<code>package.path</code> å­—æ®µè·å–é»˜è®¤çš„åŠ è½½è·¯å¾„:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="cp">#!/usr/local/bin/lua</span>

<span class="n">print</span><span class="p">(</span><span class="n">package.path</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./package_path.lua
/usr/local/share/lua/5.3/?.lua<span class="p">;</span>/usr/local/share/lua/5.3/?/init.lua<span class="p">;</span>/usr/local/lib/lua/5.3/?.lua<span class="p">;</span>/usr/local/lib/lua/5.3/?/init.lua<span class="p">;</span>./?.lua<span class="p">;</span>./?/init.lua
</code></pre></div><p>ä¸Šè¿°ç¤ºä¾‹çš„ <code>?</code> å·å³ä»£è¡¨æˆ‘ä»¬åœ¨ <code>require</code> å‡½æ•°ä¸­çš„æ¨¡å—åï¼Œå¦‚å‰é¢çš„ç¤ºä¾‹ <code>Account</code>ã€‚</p>
<p>ç¤ºä¾‹å¼•ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„æ¨¡å—:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="cp">#!/usr/local/bin/lua</span>

<span class="n">require</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">XXX</span><span class="s2">&#34;</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./package_path.lua
/usr/local/bin/lua: ./package_path.lua:3: module <span class="s1">&#39;XXX&#39;</span> not found:
	no field package.preload<span class="o">[</span><span class="s1">&#39;XXX&#39;</span><span class="o">]</span>
	no file <span class="s1">&#39;/usr/local/share/lua/5.3/XXX.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/share/lua/5.3/XXX/init.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/XXX.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/XXX/init.lua&#39;</span>
	no file <span class="s1">&#39;./XXX.lua&#39;</span>
	no file <span class="s1">&#39;./XXX/init.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/XXX.so&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/loadall.so&#39;</span>
	no file <span class="s1">&#39;./XXX.so&#39;</span>
stack traceback:
	<span class="o">[</span>C<span class="o">]</span>: in <span class="k">function</span> <span class="s1">&#39;require&#39;</span>
	./package_path.lua:5: in main chunk
	<span class="o">[</span>C<span class="o">]</span>: in ?
</code></pre></div><p>æˆ‘ä»¬é€šè¿‡ <code>require</code> çš„å®é™…åŠ è½½æƒ…å†µå‘ç°å…¶å¯¹ <code>XXX</code> çš„æŸ¥æ‰¾è·¯å¾„ä¸å‰é¢è¾“å‡ºçš„ <code>package.path</code> ä¸€è‡´ã€‚æœ€åå¦‚æœæ‰¾ä¸åˆ°åˆ™å»æ‰¾ so æ–‡ä»¶( C ç¨‹åºåº“)ã€‚</p>
<p><code>require</code> ç”¨äºæœç´¢ Lua æ–‡ä»¶çš„è·¯å¾„æ˜¯å­˜æ”¾åœ¨å…¨å±€å˜é‡ <code>package.path</code> ä¸­ï¼Œå½“ Lua å¯åŠ¨åï¼Œä¼šä»¥ç¯å¢ƒå˜é‡ <code>LUA_PATH</code> çš„å€¼æ¥åˆå§‹è¿™ä¸ªç¯å¢ƒå˜é‡ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¯¥ç¯å¢ƒå˜é‡ï¼Œåˆ™ä½¿ç”¨ä¸€ä¸ªç¼–è¯‘æ—¶å®šä¹‰çš„é»˜è®¤è·¯å¾„æ¥åˆå§‹åŒ–ï¼Œæˆ‘ä»¬å‰é¢çœ‹åˆ°çš„ä¾¿æ˜¯é»˜è®¤è·¯å¾„ã€‚</p>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°±çŸ¥é“äº†ä¸ºä»€ä¹ˆå‰é¢æˆ‘ä»¬å¯ä»¥æˆåŠŸé€šè¿‡ <code>require(&quot;Account&quot;)</code> åŠ è½½ <code>Account.lua</code> ,å› ä¸ºé»˜è®¤çš„ <code>package.path</code> ä¸­åŒ…å«äº† <code>./?.lua;</code> ï¼Œè¡¨ç¤ºä¼šåœ¨å½“å‰åŒç›®å½•ä¸‹å¯»æ‰¾æŒ‡å®šæ¨¡å—ã€‚</p>
<h2 id="-luapath-">ç¯å¢ƒå˜é‡ <code>LUA_PATH</code> çš„è®¾ç½®</h2>
<p>å¦‚æœæ²¡æœ‰ <code>LUA_PATH</code> è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¾ç½®ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸ªé¡¹ç›®åº“å« <code>lua</code> ï¼Œæ”¾åœ¨äº†æ ¹ç›®å½•ä¸‹ï¼Œä¸ºäº†å¹³æ—¶å¯ä»¥æ›´æ–¹ä¾¿çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–° <code>LUA_PATH</code> è®©å…¶åŒ…å«è¯¥é¡¹ç›®ã€‚ åœ¨å½“å‰ç”¨æˆ·æ ¹ç›®å½•ä¸‹æ‰“å¼€ <code>.profile</code> æ–‡ä»¶ï¼Œå¹¶è¿½åŠ :</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1">#LUA_PATH</span>
<span class="nb">export</span> <span class="nv">LUA_PATH</span><span class="o">=</span><span class="s2">&#34;~/lua/?.lua;;&#34;</span>
</code></pre></div><p>æ–‡ä»¶è·¯å¾„ä»¥ &ldquo;;&rdquo; å·åˆ†éš”ï¼Œæœ€åçš„ 2 ä¸ª &ldquo;;;&rdquo; è¡¨ç¤ºæ–°åŠ çš„è·¯å¾„åé¢åŠ ä¸ŠåŸæ¥çš„é»˜è®¤è·¯å¾„ã€‚</p>
<p>æ¥ç€ï¼Œæ›´æ–°ç¯å¢ƒå˜é‡å‚æ•°ï¼Œä½¿ä¹‹ç«‹å³ç”Ÿæ•ˆã€‚</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">source</span> ~/.profile
</code></pre></div><p>æˆ‘ä»¬è¿™æ—¶å†æ¥çœ‹ä¸‹ <code>package.path</code> çš„è¾“å‡º:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./package_path.lua
~/lua/?.lua<span class="p">;</span>/usr/local/share/lua/5.3/?.lua<span class="p">;</span>/usr/local/share/lua/5.3/?/init.lua<span class="p">;</span>/usr/local/lib/lua/5.3/?.lua<span class="p">;</span>/usr/local/lib/lua/5.3/?/init.lua<span class="p">;</span>./?.lua<span class="p">;</span>./?/init.lua<span class="p">;</span>
</code></pre></div><p>å¯ä»¥çœ‹åˆ°æ­¤æ—¶çš„ <code>package.path</code> å·²ç»åŒ…å«äº†æˆ‘ä»¬éœ€è¦çš„åº“è·¯å¾„ã€‚</p>
<p>æ³¨ï¼šå¦‚æœ  <code>.profile</code>  ä¸ç”Ÿæ•ˆï¼Œåˆ™å¯ä»¥åœ¨å°è¯• <code>.bash_profile</code> æˆ–åˆ™ <code>.bashrc</code> æ–‡ä»¶é‡å¤ä¸Šè¿°æ“ä½œã€‚</p>
<h2 id="heading3">è·¨ç›®å½•ä¸‹çš„æ¨¡å—å¼•ç”¨</h2>
<p>é€šå¸¸æˆ‘ä»¬åœ¨å®é™…å¼€å‘æ˜¯éƒ½ä¼šåœ¨å·¥ä½œç›®å½•ä¸‹é€šè¿‡ä¸åŒçš„ç›®å½•æ¥å¯¹åŠŸèƒ½æ¨¡å—è¿›è¡Œåˆ’åˆ†ï¼Œè¿™æ—¶ä¾¿éœ€è¦åŠ¨æ€çš„æ›´æ”¹åŠ è½½è·¯å¾„ã€‚</p>
<p>å‡è®¾æœ‰å¦‚ä¸‹è·¯å¾„:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ tree
.
â”œâ”€â”€ package_path.lua
â”œâ”€â”€ model
â”‚Â Â  â”œâ”€â”€ Account.lua
â””â”€â”€ <span class="nb">test</span>
    â””â”€â”€ Account_test.lua

<span class="m">2</span> directories, <span class="m">3</span> files
</code></pre></div><p>æˆ‘ä»¬éœ€è¦åœ¨ test ç›®å½•ä¸‹æ‰§è¡Œ <code>Account_test.lua</code> æ–‡ä»¶ï¼Œå…¶ä¸­ä¾èµ–äº model ç›®å½•çš„ <code>Account.lua</code> æ–‡ä»¶</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="cp">#!/usr/local/bin/lua</span>

<span class="n">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">test/Account_test.lua</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>

<span class="c1">-- åŠ è½½ Account.lua æ–‡ä»¶</span>
<span class="kd">local</span> <span class="n">Account</span> <span class="o">=</span> <span class="n">require</span> <span class="s2">&#34;</span><span class="s2">Account</span><span class="s2">&#34;</span>

<span class="n">print</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">printTable</span><span class="p">(</span><span class="n">_tab</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">_tab</span><span class="p">)</span> <span class="kr">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">printTable</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./Account_test.lua
test/Account_test.lua

/usr/local/bin/lua: ./Account_test.lua:7: module <span class="s1">&#39;Account&#39;</span> not found:
	no field package.preload<span class="o">[</span><span class="s1">&#39;Account&#39;</span><span class="o">]</span>
	no file <span class="s1">&#39;~/lua/Account.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/share/lua/5.3/Account.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/share/lua/5.3/Account/init.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/Account.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/Account/init.lua&#39;</span>
	no file <span class="s1">&#39;./Account.lua&#39;</span>
	no file <span class="s1">&#39;./Account/init.lua&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/Account.so&#39;</span>
	no file <span class="s1">&#39;/usr/local/lib/lua/5.3/loadall.so&#39;</span>
	no file <span class="s1">&#39;./Account.so&#39;</span>
stack traceback:
	<span class="o">[</span>C<span class="o">]</span>: in <span class="k">function</span> <span class="s1">&#39;require&#39;</span>
	./Account_test.lua:7: in main chunk
	<span class="o">[</span>C<span class="o">]</span>: in ?
</code></pre></div><p>ä¸å‡ºæ„å¤–çš„å‘ç°å¼‚å¸¸äº†ï¼Œå› ä¸ºæˆ‘ä»¬å¼•ç”¨çš„ <code>Account</code> ä¸åœ¨ä»»ä½•å·²æœ‰çš„åŠ è½½è·¯å¾„ä¸‹ã€‚å¦‚æœæƒ³è¦èƒ½å¤Ÿæ­£ç¡®çš„åŠ¨æ€å¼•ç”¨æˆ‘ä»¬éœ€è¦çš„æ¨¡å—ï¼Œåˆ™éœ€è¦åœ¨å®é™…å¼•ç”¨å‰åŠ¨æ€çš„æ›´æ–° <code>package.path</code> :</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="cp">#!/usr/local/bin/lua</span>

<span class="n">print</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">test/Account_test.lua</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>

<span class="c1">-- æ›´æ–° package.path</span>
<span class="n">package.path</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="s2">;../model/?.lua;</span><span class="s2">&#34;</span> <span class="o">..</span> <span class="n">package.path</span>

<span class="kd">local</span> <span class="n">Account</span> <span class="o">=</span> <span class="n">require</span> <span class="s2">&#34;</span><span class="s2">Account</span><span class="s2">&#34;</span>

<span class="n">print</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>

<span class="kr">function</span> <span class="nf">printTable</span><span class="p">(</span><span class="n">_tab</span><span class="p">)</span>
  <span class="kr">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="kr">in</span> <span class="n">pairs</span><span class="p">(</span><span class="n">_tab</span><span class="p">)</span> <span class="kr">do</span>
    <span class="n">print</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
  <span class="kr">end</span>
<span class="kr">end</span>

<span class="n">printTable</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œç»“æœï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./Account_test.lua
test/Account_test.lua

table: 0x7f93f9d00830
balance	<span class="m">0</span>
withDraw	<span class="k">function</span>: 0x7f93f9d00150
</code></pre></div><p>æ•ˆæœå®Œç¾ã€‚</p>
<p>æ³¨æ„ï¼šç”±äº <code>package.path</code> æ˜¯å…¨å±€çš„æ•…ä¸€æ—¦æ›´æ–°åˆ™ä¼šåœ¨å½“å‰é¡¹ç›®å†…ç”Ÿæ•ˆã€‚</p>
<h2 id="heading4">ç¼“å­˜æœºåˆ¶</h2>
<p>Lua ä¹Ÿç±»ä¼¼å…¶ä»–å¤§éƒ¨åˆ†è¯­è¨€çš„æ¨¡å—å¯¼å…¥æœºåˆ¶ï¼Œå­˜åœ¨ç¼“å­˜æœºåˆ¶ï¼Œæ¨¡å—ä¸€æ—¦å¯¼å…¥æœ‰ä¸”åªåœ¨ç¬¬ä¸€æ¬¡å¯¼å…¥æ—¶æ‰§è¡Œä¸€æ¬¡æ¨¡å—å†…å®¹ã€‚</p>
<p>A.lua</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="kd">local</span> <span class="n">Account</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">Account</span><span class="s2">&#34;</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>
</code></pre></div><p>B.lua:</p>
<div class="highlight"><pre class="chroma"><code class="language-lua" data-lang="lua"><span class="cp">#!/usr/local/bin/lua</span>

<span class="n">package.path</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="s2">;./model/?.lua;</span><span class="s2">&#34;</span> <span class="o">..</span> <span class="n">package.path</span>

<span class="n">require</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">A</span><span class="s2">&#34;</span><span class="p">)</span>

<span class="kd">local</span> <span class="n">Account</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s2">&#34;</span><span class="s2">Account</span><span class="s2">&#34;</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">Account</span><span class="p">)</span>
</code></pre></div><p>æ‰§è¡Œç»“æœ:</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang$ ./B.lua
table: 0x7fabd8600880
table: 0x7fabd8600880
</code></pre></div><p>å¯ä»¥çœ‹å‡º <code>Account</code> å¯¹è±¡åªå®ä¾‹åŒ–äº†ä¸€æ¬¡ã€‚</p>
<h2 id="heading5">æ‰§è¡Œç¯å¢ƒ</h2>
<p><img src="/assets/QQ20180624-113702@2x.jpg" alt=""></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tangzixiang:~ tangzixiang$ lua -v
Lua 5.3.4  Copyright <span class="o">(</span>C<span class="o">)</span> 1994-2017 Lua.org, PUC-Rio
</code></pre></div><h2 id="heading6">å‚è€ƒ</h2>
<ol>
<li><a href="http://www.runoob.com/lua/lua-modules-packages.html">http://www.runoob.com/lua/lua-modules-packages.html</a></li>
<li>ã€Nginx Lua å¼€å‘å®æˆ˜ã€‘</li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>[Go] å¤šæ¡ä»¶æ’åºè®¾è®¡</title>
			<link>https://tangzixiang.github.io/posts/%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%8E%92%E5%BA%8F%E8%AE%BE%E8%AE%A1/</link>
			<pubDate>Tue, 01 May 2018 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%8E%92%E5%BA%8F%E8%AE%BE%E8%AE%A1/</guid>
			<description>åœ¨ go æºç ä¸­çœ‹åˆ°ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå¦‚ä½•è®¾è®¡å¯¹åˆ—è¡¨æ•°æ®è¿›è¡Œå¤šæ¡ä»¶æ’åº
ä»£ç ä½ç½®ï¼š go/src/sort/example_multi_test.go
// Copyright 2013 The Go Authors. All rights reserved. // Use of this source code is governed by a BSD-style // license that can be found in the LICENSE file.  package sort_test import ( &amp;#34;fmt&amp;#34; &amp;#34;sort&amp;#34; ) // A Change is a record of source code changes, recording user, language, and delta size. type Change struct { user string language string lines int } type lessFunc func(p1, p2 *Change) bool // multiSorter implements the Sort interface, sorting the changes within.</description>
			<content type="html"><![CDATA[<p>åœ¨ go æºç ä¸­çœ‹åˆ°ä¸€ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå¦‚ä½•è®¾è®¡å¯¹åˆ—è¡¨æ•°æ®è¿›è¡Œå¤šæ¡ä»¶æ’åº</p>
<p>ä»£ç ä½ç½®ï¼š <a href="https://github.com/golang/go/blob/master/src/sort/example_multi_test.go"><code>go/src/sort/example_multi_test.go</code></a></p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Copyright 2013 The Go Authors. All rights reserved.
</span><span class="c1"></span><span class="c1">// Use of this source code is governed by a BSD-style
</span><span class="c1"></span><span class="c1">// license that can be found in the LICENSE file.
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">sort_test</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;sort&#34;</span>
<span class="p">)</span>

<span class="c1">// A Change is a record of source code changes, recording user, language, and delta size.
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Change</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">user</span>     <span class="kt">string</span>
	<span class="nx">language</span> <span class="kt">string</span>
	<span class="nx">lines</span>    <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">lessFunc</span> <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Change</span><span class="p">)</span> <span class="kt">bool</span>

<span class="c1">// multiSorter implements the Sort interface, sorting the changes within.
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">multiSorter</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">changes</span> <span class="p">[</span><span class="p">]</span><span class="nx">Change</span>
	<span class="nx">less</span>    <span class="p">[</span><span class="p">]</span><span class="nx">lessFunc</span>
<span class="p">}</span>

<span class="c1">// Sort sorts the argument slice according to the less functions passed to OrderedBy.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">ms</span> <span class="o">*</span><span class="nx">multiSorter</span><span class="p">)</span> <span class="nf">Sort</span><span class="p">(</span><span class="nx">changes</span> <span class="p">[</span><span class="p">]</span><span class="nx">Change</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span> <span class="p">=</span> <span class="nx">changes</span>
	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">ms</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// OrderedBy returns a Sorter that sorts using the less functions, in order.
</span><span class="c1"></span><span class="c1">// Call its Sort method to sort the data.
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">OrderedBy</span><span class="p">(</span><span class="nx">less</span> <span class="o">...</span><span class="nx">lessFunc</span><span class="p">)</span> <span class="o">*</span><span class="nx">multiSorter</span> <span class="p">{</span>
	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">multiSorter</span><span class="p">{</span>
		<span class="nx">less</span><span class="p">:</span> <span class="nx">less</span><span class="p">,</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Len is part of sort.Interface.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">ms</span> <span class="o">*</span><span class="nx">multiSorter</span><span class="p">)</span> <span class="nf">Len</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Swap is part of sort.Interface.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">ms</span> <span class="o">*</span><span class="nx">multiSorter</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">,</span> <span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="p">,</span> <span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1">// Less is part of sort.Interface. It is implemented by looping along the
</span><span class="c1"></span><span class="c1">// less functions until it finds a comparison that discriminates between
</span><span class="c1"></span><span class="c1">// the two items (one is less than the other). Note that it can call the
</span><span class="c1"></span><span class="c1">// less functions twice per call. We could change the functions to return
</span><span class="c1"></span><span class="c1">// -1, 0, 1 and reduce the number of calls for greater efficiency: an
</span><span class="c1"></span><span class="c1">// exercise for the reader.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">ms</span> <span class="o">*</span><span class="nx">multiSorter</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="nx">p</span><span class="p">,</span> <span class="nx">q</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">ms</span><span class="p">.</span><span class="nx">changes</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span>
	<span class="c1">// Try all but the last comparison.
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">k</span> <span class="kt">int</span>
	<span class="k">for</span> <span class="nx">k</span> <span class="p">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span> <span class="p">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="nx">ms</span><span class="p">.</span><span class="nx">less</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">less</span> <span class="o">:=</span> <span class="nx">ms</span><span class="p">.</span><span class="nx">less</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span>
		<span class="k">switch</span> <span class="p">{</span>
		<span class="k">case</span> <span class="nf">less</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">q</span><span class="p">)</span><span class="p">:</span>
			<span class="c1">// p &lt; q, so we have a decision.
</span><span class="c1"></span>			<span class="k">return</span> <span class="kc">true</span>
		<span class="k">case</span> <span class="nf">less</span><span class="p">(</span><span class="nx">q</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span><span class="p">:</span>
			<span class="c1">// p &gt; q, so we have a decision.
</span><span class="c1"></span>			<span class="k">return</span> <span class="kc">false</span>
		<span class="p">}</span>
		<span class="c1">// p == q; try the next comparison.
</span><span class="c1"></span>	<span class="p">}</span>
	<span class="c1">// All comparisons to here said &#34;equal&#34;, so just return whatever
</span><span class="c1"></span>	<span class="c1">// the final comparison reports.
</span><span class="c1"></span>	<span class="k">return</span> <span class="nx">ms</span><span class="p">.</span><span class="nx">less</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">q</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">changes</span> <span class="p">=</span> <span class="p">[</span><span class="p">]</span><span class="nx">Change</span><span class="p">{</span>
	<span class="p">{</span><span class="s">&#34;gri&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">100</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;ken&#34;</span><span class="p">,</span> <span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="mi">150</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;glenda&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">200</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;rsc&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">200</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;r&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">100</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;ken&#34;</span><span class="p">,</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">200</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;dmr&#34;</span><span class="p">,</span> <span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="mi">100</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;r&#34;</span><span class="p">,</span> <span class="s">&#34;C&#34;</span><span class="p">,</span> <span class="mi">150</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;gri&#34;</span><span class="p">,</span> <span class="s">&#34;Smalltalk&#34;</span><span class="p">,</span> <span class="mi">80</span><span class="p">}</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">// ExampleMultiKeys demonstrates a technique for sorting a struct type using different
</span><span class="c1"></span><span class="c1">// sets of multiple fields in the comparison. We chain together &#34;Less&#34; functions, each of
</span><span class="c1"></span><span class="c1">// which compares a single field.
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Example_sortMultiKeys</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// Closures that order the Change structure.
</span><span class="c1"></span>	<span class="nx">user</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span> <span class="nx">c2</span> <span class="o">*</span><span class="nx">Change</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">user</span> <span class="p">&lt;</span> <span class="nx">c2</span><span class="p">.</span><span class="nx">user</span>
	<span class="p">}</span>
	<span class="nx">language</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span> <span class="nx">c2</span> <span class="o">*</span><span class="nx">Change</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">language</span> <span class="p">&lt;</span> <span class="nx">c2</span><span class="p">.</span><span class="nx">language</span>
	<span class="p">}</span>
	<span class="nx">increasingLines</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span> <span class="nx">c2</span> <span class="o">*</span><span class="nx">Change</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">lines</span> <span class="p">&lt;</span> <span class="nx">c2</span><span class="p">.</span><span class="nx">lines</span>
	<span class="p">}</span>
	<span class="nx">decreasingLines</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">c1</span><span class="p">,</span> <span class="nx">c2</span> <span class="o">*</span><span class="nx">Change</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">c1</span><span class="p">.</span><span class="nx">lines</span> <span class="p">&gt;</span> <span class="nx">c2</span><span class="p">.</span><span class="nx">lines</span> <span class="c1">// Note: &gt; orders downwards.
</span><span class="c1"></span>	<span class="p">}</span>

	<span class="c1">// Simple use: Sort by user.
</span><span class="c1"></span>	<span class="nf">OrderedBy</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By user:&#34;</span><span class="p">,</span> <span class="nx">changes</span><span class="p">)</span>

	<span class="c1">// More examples.
</span><span class="c1"></span>	<span class="nf">OrderedBy</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">increasingLines</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By user,&lt;lines:&#34;</span><span class="p">,</span> <span class="nx">changes</span><span class="p">)</span>

	<span class="nf">OrderedBy</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">decreasingLines</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By user,&gt;lines:&#34;</span><span class="p">,</span> <span class="nx">changes</span><span class="p">)</span>

	<span class="nf">OrderedBy</span><span class="p">(</span><span class="nx">language</span><span class="p">,</span> <span class="nx">increasingLines</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By language,&lt;lines:&#34;</span><span class="p">,</span> <span class="nx">changes</span><span class="p">)</span>

	<span class="nf">OrderedBy</span><span class="p">(</span><span class="nx">language</span><span class="p">,</span> <span class="nx">increasingLines</span><span class="p">,</span> <span class="nx">user</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">changes</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By language,&lt;lines,user:&#34;</span><span class="p">,</span> <span class="nx">changes</span><span class="p">)</span>

	<span class="c1">// Output:
</span><span class="c1"></span>	<span class="c1">// By user: [{dmr C 100} {glenda Go 200} {gri Go 100} {gri Smalltalk 80} {ken C 150} {ken Go 200} {r Go 100} {r C 150} {rsc Go 200}]
</span><span class="c1"></span>	<span class="c1">// By user,&lt;lines: [{dmr C 100} {glenda Go 200} {gri Smalltalk 80} {gri Go 100} {ken C 150} {ken Go 200} {r Go 100} {r C 150} {rsc Go 200}]
</span><span class="c1"></span>	<span class="c1">// By user,&gt;lines: [{dmr C 100} {glenda Go 200} {gri Go 100} {gri Smalltalk 80} {ken Go 200} {ken C 150} {r C 150} {r Go 100} {rsc Go 200}]
</span><span class="c1"></span>	<span class="c1">// By language,&lt;lines: [{dmr C 100} {ken C 150} {r C 150} {r Go 100} {gri Go 100} {ken Go 200} {glenda Go 200} {rsc Go 200} {gri Smalltalk 80}]
</span><span class="c1"></span>	<span class="c1">// By language,&lt;lines,user: [{dmr C 100} {ken C 150} {r C 150} {gri Go 100} {r Go 100} {glenda Go 200} {ken Go 200} {rsc Go 200} {gri Smalltalk 80}]
</span><span class="c1"></span>
<span class="p">}</span>

</code></pre></div><ol>
<li>é‡ç‚¹éœ€è¦å…³æ³¨çš„æ˜¯ <code>multiSorter</code> çš„è®¾è®¡</li>
<li>åœ¨è¿™ä¸ª <code>multiSorter</code> å¯¹è±¡ä¸­åŒ…å«å¤šä¸ªæ’åºè§„åˆ™ï¼Œæ¯ä¸€é¡¹æ•°æ®éœ€è¦åˆ¤æ–­æ˜¯å¦æ‰§è¡Œå¤šä¸ªæ’åºè§„åˆ™å‡½æ•°</li>
<li>æ¯ä¸ªæ³¨å†Œçš„æ’åºè§„åˆ™åˆ¤æ–­å‡½æ•° less è¿”å› bool å€¼ï¼Œç¡®è®¤å‰ä¸€é¡¹æ˜¯å¦æ¯”åä¸€é¡¹å°</li>
<li>æ¯ä¸ªæ³¨å†Œçš„æ’åºè§„åˆ™åˆ¤æ–­å‡½æ•° less å¯ä»¥æ‰§è¡Œä¸¤æ¬¡ï¼Œå› ä¸ºå‰ä¸€é¡¹ä¸æ¯”åä¸€é¡¹å°çš„è¯è¿˜æœ‰ä¸¤ç§å¯èƒ½ï¼Œè¦ä¸å°±æ˜¯å‰ä¸€é¡¹æ¯”åä¸€é¡¹å¤§ï¼Œè¦ä¸å°±æ˜¯ä¸€æ ·å¤§</li>
<li>è‹¥å½“å‰æ‰§è¡Œçš„æ’åºè§„åˆ™åˆ¤æ–­å‡½æ•° less èƒ½å¤Ÿåˆ¤æ–­å‡ºå¤§å°,åˆ™æ— éœ€æ‰§è¡Œä¸‹ä¸€ä¸ªåˆ¤æ–­å‡½æ•°ï¼Œå½“ä¸”ä»…å½“å‰ä¸€é¡¹å’Œåä¸€é¡¹çš„æ•°æ®ä¸€è‡´ï¼Œæ‰éœ€è¦ä¾èµ–ä¸‹ä¸€ä¸ªåˆ¤æ–­å‡½æ•°åšåˆ¤æ–­ï¼Œè¿™é‡Œåˆ¤æ–­ä¸¤é¡¹æ•°æ®ä¸€è‡´çš„ä¾æ®æ˜¯ï¼Œåœ¨ switch ä¸­ä¸¤ä¸ª case éƒ½æ‰§è¡Œäº†ä½†æ²¡æœ‰å‘½ä¸­è¿”å›ã€‚</li>
<li>åœ¨å¤šä¸ªæ’åºè§„åˆ™åˆ¤æ–­å‡½æ•°ä¸­ï¼Œæœ€åä¸€é¡¹æ— éœ€é‡å¤ä¹‹å‰çš„ switch åˆ¤æ–­è§„åˆ™å› ä¸º â¬‡</li>
<li>åœ¨æ­£å¸¸çš„æ’åº <code>sort</code> æ¥å£çš„<code>Less</code> å‡½æ•°ä¸­ä¹Ÿæ˜¯åªéœ€è¿”å› bool åˆ¤æ–­å‰ä¸€é¡¹æ˜¯å¦æ¯”åä¸€é¡¹å°</li>
<li>æ‰€ä»¥åœ¨å¤šä¸ªæ’åºè§„åˆ™åˆ¤æ–­å‡½æ•°ä¸­ï¼Œæœ€åä¸€é¡¹ä¿ç•™ä¸€è‡´é€»è¾‘ï¼Œå¦‚æœä¿ç•™åœ¨ switch ä¸­ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œä½†æ˜¯å¾—è€ƒè™‘æœ€åæœ‰å¯èƒ½å‰ä¸€é¡¹æ•°æ®ä¸åä¸€é¡¹æ•°æ®å®Œå…¨ä¸€è‡´çš„æƒ…å†µã€‚</li>
<li>è‹¥æ•°æ®æ˜¯ä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œè¿”å›çš„æ˜¯ true è¿˜æ˜¯ false å·²ç»æ— æ‰€è°“äº†ã€‚</li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>The wire dataï¼ˆwire æ•°æ®ï¼‰</title>
			<link>https://tangzixiang.github.io/posts/the-wire-datawire-%E6%95%B0%E6%8D%AE/</link>
			<pubDate>Wed, 25 Apr 2018 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/the-wire-datawire-%E6%95%B0%E6%8D%AE/</guid>
			<description>æœ¬æ–‡ä¸º wiki ä¸Šå…³äº wire data çš„ç¿»è¯‘ï¼Œä¸ä¿è¯å‡†ç¡®æ€§ã€‚
ç®€ä»‹ wire data æ˜¯ä¸€ç§å®šä¹‰äº†å®¢æˆ·ç«¯è®¾å¤‡ä¸æœåŠ¡å™¨è®¾å¤‡å¦‚ä½•åŸºäºè®¡ç®—æœºå’Œç”µä¿¡ç½‘ç»œè¿›è¡Œé€šä¿¡çš„ä¿¡æ¯ã€‚å®ƒæ˜¯ wire protocol ï¼ˆä¸€ç§ä¼ è¾“åè®®ï¼‰çš„å…¨åŒå·¥ data payload [1]è§£ç åå¾—åˆ°çš„å†…å®¹ã€‚æ›´ç¡®åˆ‡çš„è¯´ï¼Œwire data ä½œä¸ºä¸€ç§é€šä¿¡çš„ä¿¡æ¯å­˜åœ¨äº OSI model é‡Œé™¤ç‰©ç†å±‚ä¹‹å¤–çš„å„ä¸ªå±‚çº§ä¹‹ä¸­ï¼ˆæ²¡æœ‰åŒ…å«ç‰©ç†å±‚ï¼Œæ˜¯å› ä¸ºç‰©ç†å±‚çš„åè®®æ˜¯ç”¨äºå»ºç«‹è¿æ¥è€Œéé€šä¿¡ï¼‰
æ³¨é‡Šå¼•ç”¨  å…¨åŒå·¥ data payloadï¼šbi-directional data payload  </description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡ä¸º <a href="https://en.wikipedia.org/wiki/Wire_data">wiki</a> ä¸Šå…³äº <strong>wire data</strong> çš„ç¿»è¯‘ï¼Œä¸ä¿è¯å‡†ç¡®æ€§ã€‚</p>
<h2 id="heading">ç®€ä»‹</h2>
<p><strong>wire data</strong> æ˜¯ä¸€ç§å®šä¹‰äº†å®¢æˆ·ç«¯è®¾å¤‡ä¸æœåŠ¡å™¨è®¾å¤‡å¦‚ä½•åŸºäºè®¡ç®—æœºå’Œç”µä¿¡ç½‘ç»œè¿›è¡Œé€šä¿¡çš„ä¿¡æ¯ã€‚å®ƒæ˜¯ <strong>wire protocol</strong> ï¼ˆä¸€ç§ä¼ è¾“åè®®ï¼‰çš„å…¨åŒå·¥ data payload <!-- raw HTML omitted -->[1]<!-- raw HTML omitted --> è§£ç åå¾—åˆ°çš„å†…å®¹ã€‚æ›´ç¡®åˆ‡çš„è¯´ï¼Œ<strong>wire data</strong> ä½œä¸ºä¸€ç§é€šä¿¡çš„ä¿¡æ¯å­˜åœ¨äº  <a href="https://en.wikipedia.org/wiki/OSI_model">OSI model</a> é‡Œé™¤ç‰©ç†å±‚ä¹‹å¤–çš„å„ä¸ªå±‚çº§ä¹‹ä¸­ï¼ˆæ²¡æœ‰åŒ…å«ç‰©ç†å±‚ï¼Œæ˜¯å› ä¸ºç‰©ç†å±‚çš„åè®®æ˜¯ç”¨äºå»ºç«‹è¿æ¥è€Œéé€šä¿¡ï¼‰</p>
<h2 id="heading1">æ³¨é‡Šå¼•ç”¨</h2>
<ol>
<li>å…¨åŒå·¥ data payloadï¼šbi-directional data payload</li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>The wire protocolï¼ˆwire ä¼ è¾“åè®®ï¼‰</title>
			<link>https://tangzixiang.github.io/posts/the-wire-protocolwire%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/</link>
			<pubDate>Wed, 25 Apr 2018 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/the-wire-protocolwire%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/</guid>
			<description>æœ¬æ–‡ä¸º wiki ä¸Šå…³äº wire protocol çš„ç¿»è¯‘ï¼Œä¸ä¿è¯å‡†ç¡®æ€§ã€‚
ç®€ä»‹ åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œwire protocol æŒ‡çš„æ˜¯ä¸€ç§ç«¯åˆ°ç«¯ï¼ˆç‚¹åˆ°ç‚¹ï¼‰çš„æ•°æ®è·å–æ–¹å¼ï¼Œæ˜¯å¤šä¸ªåº”ç”¨[1]ä¹‹é—´è¿›è¡Œäº¤äº’çš„å¿…éœ€å“ã€‚å®ƒé€šå¸¸æŒ‡çš„æ˜¯ä¸€ç§é«˜äºç‰©ç†å±‚çš„åè®®ã€‚ç›¸è¾ƒäºä¼ è¾“å±‚çš„å„ç§ä¼ è¾“åè®® ï¼ˆTCPã€UDPï¼‰ï¼Œwire protocol æœ¯è¯­ä¹ æƒ¯äºè¢«ç”¨æ¥æè¿°ä¿¡æ¯ä½äºåº”ç”¨å±‚ä¸Šçš„ä¸€ç§é€šç”¨è¡¨ç°å½¢å¼ï¼Œæ˜¯ä¸€ç§åº”ç”¨å±‚ä¸Šçš„é€šç”¨åè®®è€Œéå„ç±»åº”ç”¨ç¨‹åºçš„é€šç”¨å‹å¯¹è±¡æè¿°è¯­æ„[2]ã€‚å°±åƒæ˜¯ XML[3]ä¸ XSD[4]ä¹‹é—´çš„å…³ç³»ï¼ŒXML å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œæè¿°ï¼Œè€Œ XSD å¯¹ XML æœ¬èº«çš„æ–‡æ¡£ç»“æ„çš„å…ƒç´ åŠè¯­æ³•è¿›è¡Œæè¿°ã€‚
wire protocol è¦ä¹ˆæ˜¯ä¸€ç§æ–‡æœ¬æ ¼å¼åè®®è¦ä¹ˆæ˜¯ä¸€ç§äºŒè¿›åˆ¶æ ¼å¼åè®®ã€‚è™½ç„¶å†³å®šé‡‡ç”¨é‚£ç§æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ¶æ„è®¾è®¡ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ wire protocol ä¸ç¨‹åºAPIä¹‹é—´çš„åŒºåˆ«ã€‚
åœ¨ç”µå­ä¿¡æ¯æŠ€æœ¯é¢†åŸŸä¸­[5]ï¼Œä¸€ç§ wire protocol æè¿°å…¶è®²æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹ä¼ è¾“åˆ°å…¶ä»–åœ°æ–¹çš„æœºåˆ¶ã€‚
åŠŸèƒ½æ€§ [Functionality] wire protocol æä¾›åº”ç”¨ä¸åº”ç”¨ä¹‹é—´åœ¨äº’è”ç½‘ä¸­è¿›è¡Œäº¤äº’çš„æ‰‹æ®µï¼Œé€šå¸¸æŒ‡çš„æ˜¯å„ç§åˆ†å¸ƒå¼å¯¹è±¡åè®®[6]ï¼Œå…¶å¯èƒ½æ˜¯ä¸€ç§ä½¿ç”¨ä¸“é—¨è®¾è®¡ç”¨æ¥ååŒå·¥ä½œçš„åº”ç”¨ç¨‹åºã€‚é¡¾åæ€ä¹‰ï¼Œè¿™äº›åˆ†å¸ƒå¼å¯¹è±¡åè®®è¿è¡Œåœ¨äº’è”ç½‘ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªè®¡ç®—æœºçš„ä¸åŒè¿›ç¨‹ä¹‹é—´ã€‚
åˆ†ç±» [Types] wire protocol æä¾›äº†ä¸€ç§äº’è”ç½‘ä¸Šè¿è¡Œäºä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´çš„ç¨‹åºè¿›è¡Œäº¤æµçš„æ‰‹æ®µï¼Œå°±ç®—æ˜¯ä¸åŒçš„å¹³å°æˆ–å¼€å‘è¯­è¨€ã€‚
ä»¥ä¸‹æ˜¯ä¸€äº› wire prootocol :
 IIOP for CORBA RTPS for DDS Java Debug Wire Protocol (JDWP) for Java debugging JRMP for RMI SOAP for Web services AMQP for message-oriented middleware  æ³¨é‡Šå¼•ç”¨  åº”ç”¨ï¼šå³ applicationã€‚ é€šç”¨å‹å¯¹è±¡æè¿°è¯­æ„ï¼šcommon object semantic XMLï¼šExtensible Markup Language XSDï¼šXML Schema Definition ç”µå­ä¿¡æ¯æŠ€æœ¯ï¼šElectronics åˆ†å¸ƒå¼å¯¹è±¡åè®®ï¼šdistributed object protocols  </description>
			<content type="html"><![CDATA[<p>æœ¬æ–‡ä¸º <a href="https://en.wikipedia.org/wiki/Wire_protocol">wiki</a> ä¸Šå…³äº <strong>wire protocol</strong> çš„ç¿»è¯‘ï¼Œä¸ä¿è¯å‡†ç¡®æ€§ã€‚</p>
<h2 id="heading">ç®€ä»‹</h2>
<p>åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œ<strong>wire protocol</strong> æŒ‡çš„æ˜¯ä¸€ç§ç«¯åˆ°ç«¯ï¼ˆç‚¹åˆ°ç‚¹ï¼‰çš„æ•°æ®è·å–æ–¹å¼ï¼Œæ˜¯å¤šä¸ªåº”ç”¨<!-- raw HTML omitted -->[1]<!-- raw HTML omitted -->ä¹‹é—´è¿›è¡Œäº¤äº’çš„å¿…éœ€å“ã€‚å®ƒé€šå¸¸æŒ‡çš„æ˜¯ä¸€ç§é«˜äºç‰©ç†å±‚çš„åè®®ã€‚ç›¸è¾ƒäºä¼ è¾“å±‚çš„å„ç§ä¼ è¾“åè®® ï¼ˆTCPã€UDPï¼‰ï¼Œ<strong>wire protocol</strong> æœ¯è¯­ä¹ æƒ¯äºè¢«ç”¨æ¥æè¿°ä¿¡æ¯ä½äºåº”ç”¨å±‚ä¸Šçš„ä¸€ç§é€šç”¨è¡¨ç°å½¢å¼ï¼Œæ˜¯ä¸€ç§åº”ç”¨å±‚ä¸Šçš„é€šç”¨åè®®è€Œéå„ç±»åº”ç”¨ç¨‹åºçš„é€šç”¨å‹å¯¹è±¡æè¿°è¯­æ„<!-- raw HTML omitted -->[2]<!-- raw HTML omitted -->ã€‚å°±åƒæ˜¯ XML<!-- raw HTML omitted -->[3]<!-- raw HTML omitted --> ä¸ XSD<!-- raw HTML omitted -->[4]<!-- raw HTML omitted --> ä¹‹é—´çš„å…³ç³»ï¼ŒXML å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œæè¿°ï¼Œè€Œ XSD å¯¹ XML æœ¬èº«çš„æ–‡æ¡£ç»“æ„çš„å…ƒç´ åŠè¯­æ³•è¿›è¡Œæè¿°ã€‚</p>
<p><strong>wire protocol</strong> è¦ä¹ˆæ˜¯ä¸€ç§æ–‡æœ¬æ ¼å¼åè®®è¦ä¹ˆæ˜¯ä¸€ç§äºŒè¿›åˆ¶æ ¼å¼åè®®ã€‚è™½ç„¶å†³å®šé‡‡ç”¨é‚£ç§æ ¼å¼ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸é‡è¦çš„æ¶æ„è®¾è®¡ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯ wire protocol ä¸ç¨‹åºAPIä¹‹é—´çš„åŒºåˆ«ã€‚</p>
<p>åœ¨ç”µå­ä¿¡æ¯æŠ€æœ¯é¢†åŸŸä¸­<!-- raw HTML omitted -->[5]<!-- raw HTML omitted -->ï¼Œä¸€ç§ wire protocol æè¿°å…¶è®²æ•°æ®ä»ä¸€ä¸ªåœ°æ–¹ä¼ è¾“åˆ°å…¶ä»–åœ°æ–¹çš„æœºåˆ¶ã€‚</p>
<h2 id="-functionality">åŠŸèƒ½æ€§ [Functionality]</h2>
<p><strong>wire protocol</strong> æä¾›åº”ç”¨ä¸åº”ç”¨ä¹‹é—´åœ¨äº’è”ç½‘ä¸­è¿›è¡Œäº¤äº’çš„æ‰‹æ®µï¼Œé€šå¸¸æŒ‡çš„æ˜¯å„ç§åˆ†å¸ƒå¼å¯¹è±¡åè®®<!-- raw HTML omitted -->[6]<!-- raw HTML omitted -->ï¼Œå…¶å¯èƒ½æ˜¯ä¸€ç§ä½¿ç”¨ä¸“é—¨è®¾è®¡ç”¨æ¥ååŒå·¥ä½œçš„åº”ç”¨ç¨‹åºã€‚é¡¾åæ€ä¹‰ï¼Œè¿™äº›åˆ†å¸ƒå¼å¯¹è±¡åè®®è¿è¡Œåœ¨äº’è”ç½‘ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªè®¡ç®—æœºçš„ä¸åŒè¿›ç¨‹ä¹‹é—´ã€‚</p>
<h2 id="-types">åˆ†ç±» [Types]</h2>
<p><strong>wire protocol</strong> æä¾›äº†ä¸€ç§äº’è”ç½‘ä¸Šè¿è¡Œäºä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´çš„ç¨‹åºè¿›è¡Œäº¤æµçš„æ‰‹æ®µï¼Œå°±ç®—æ˜¯ä¸åŒçš„å¹³å°æˆ–å¼€å‘è¯­è¨€ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº› wire prootocol :</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/IIOP">IIOP</a> for <a href="https://en.wikipedia.org/wiki/CORBA">CORBA</a></li>
<li><a href="https://en.wikipedia.org/wiki/Real-Time_Publish-Subscribe_(RTPS)_Protocol">RTPS</a> for <a href="https://en.wikipedia.org/wiki/Data_Distribution_Service">DDS</a></li>
<li>Java Debug Wire Protocol (<a href="https://en.wikipedia.org/wiki/JDWP">JDWP</a>) for Java debugging</li>
<li><a href="https://en.wikipedia.org/w/index.php?title=Java_Remote_Method_Protocol&amp;action=edit&amp;redlink=1">JRMP</a> for <a href="https://en.wikipedia.org/wiki/Java_remote_method_invocation">RMI</a></li>
<li><a href="https://en.wikipedia.org/wiki/SOAP">SOAP</a> for <a href="https://en.wikipedia.org/wiki/Web_services">Web services</a></li>
<li><a href="https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol">AMQP</a> for <a href="https://en.wikipedia.org/wiki/Message-oriented_middleware">message-oriented middleware</a></li>
</ul>
<h2 id="heading1">æ³¨é‡Šå¼•ç”¨</h2>
<ol>
<li>åº”ç”¨ï¼šå³ applicationã€‚</li>
<li>é€šç”¨å‹å¯¹è±¡æè¿°è¯­æ„ï¼šcommon object semantic</li>
<li>XMLï¼š<a href="https://en.wikipedia.org/wiki/XML">Extensible Markup Language</a></li>
<li>XSDï¼š<a href="https://en.wikipedia.org/wiki/XML_Schema_(W3C)">XML Schema Definition</a></li>
<li>ç”µå­ä¿¡æ¯æŠ€æœ¯ï¼š<a href="https://en.wikipedia.org/wiki/Electronics">Electronics</a></li>
<li>åˆ†å¸ƒå¼å¯¹è±¡åè®®ï¼šdistributed object protocols</li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>[Go] åˆ©ç”¨å¯ç¼–ç¨‹æ’åºå‡†åˆ™å¯¹ç»“æ„ç±»å‹è¿›è¡Œæ’åº</title>
			<link>https://tangzixiang.github.io/posts/sorting-a-struct-type-using-programmable-sort-criteria-%E5%88%A9%E7%94%A8%E5%8F%AF%E7%BC%96%E7%A8%8B%E6%8E%92%E5%BA%8F%E5%87%86%E5%88%99%E5%AF%B9%E7%BB%93%E6%9E%84%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F/</link>
			<pubDate>Wed, 28 Mar 2018 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/sorting-a-struct-type-using-programmable-sort-criteria-%E5%88%A9%E7%94%A8%E5%8F%AF%E7%BC%96%E7%A8%8B%E6%8E%92%E5%BA%8F%E5%87%86%E5%88%99%E5%AF%B9%E7%BB%93%E6%9E%84%E7%B1%BB%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F/</guid>
			<description>sorting a struct type using programmable sort criteria åˆ©ç”¨å¯ç¼–ç¨‹æ’åºå‡†åˆ™å¯¹ç»“æ„ç±»å‹è¿›è¡Œæ’åº
åœ¨ go æºç ä¸­çœ‹åˆ°ä¸€ä¸ªè®¾è®¡æ¨¡å¼
ä»£ç ä½ç½®ï¼š go/src/sort/example_keys_test.go
// Copyright 2013 The Go Authors. All rights reserved. // Use of this source code is governed by a BSD-style // license that can be found in the LICENSE file.  package sort_test import ( &amp;#34;fmt&amp;#34; &amp;#34;sort&amp;#34; ) // A couple of type definitions to make the units clear. type earthMass float64 type au float64 // A Planet defines the properties of a solar system object.</description>
			<content type="html"><![CDATA[<p>sorting a struct type using programmable sort criteria åˆ©ç”¨å¯ç¼–ç¨‹æ’åºå‡†åˆ™å¯¹ç»“æ„ç±»å‹è¿›è¡Œæ’åº</p>
<p>åœ¨ go æºç ä¸­çœ‹åˆ°ä¸€ä¸ªè®¾è®¡æ¨¡å¼</p>
<p>ä»£ç ä½ç½®ï¼š <a href="https://github.com/golang/go/blob/master/src/sort/example_keys_test.go"><code>go/src/sort/example_keys_test.go</code></a></p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="c1">// Copyright 2013 The Go Authors. All rights reserved.
</span><span class="c1"></span><span class="c1">// Use of this source code is governed by a BSD-style
</span><span class="c1"></span><span class="c1">// license that can be found in the LICENSE file.
</span><span class="c1"></span>
<span class="kn">package</span> <span class="nx">sort_test</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;sort&#34;</span>
<span class="p">)</span>

<span class="c1">// A couple of type definitions to make the units clear.
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">earthMass</span> <span class="kt">float64</span>
<span class="kd">type</span> <span class="nx">au</span> <span class="kt">float64</span>

<span class="c1">// A Planet defines the properties of a solar system object.
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">Planet</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">name</span>     <span class="kt">string</span>
	<span class="nx">mass</span>     <span class="nx">earthMass</span>
	<span class="nx">distance</span> <span class="nx">au</span>
<span class="p">}</span>

<span class="c1">// By is the type of a &#34;less&#34; function that defines the ordering of its Planet arguments.
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">By</span> <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Planet</span><span class="p">)</span> <span class="kt">bool</span>

<span class="c1">// Sort is a method on the function type, By, that sorts the argument slice according to the function.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">by</span> <span class="nx">By</span><span class="p">)</span> <span class="nf">Sort</span><span class="p">(</span><span class="nx">planets</span> <span class="p">[</span><span class="p">]</span><span class="nx">Planet</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">ps</span> <span class="o">:=</span> <span class="o">&amp;</span><span class="nx">planetSorter</span><span class="p">{</span>
		<span class="nx">planets</span><span class="p">:</span> <span class="nx">planets</span><span class="p">,</span>
		<span class="nx">by</span><span class="p">:</span>      <span class="nx">by</span><span class="p">,</span> <span class="c1">// The Sort method&#39;s receiver is the function (closure) that defines the sort order.
</span><span class="c1"></span>	<span class="p">}</span>
	<span class="nx">sort</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">ps</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// planetSorter joins a By function and a slice of Planets to be sorted.
</span><span class="c1"></span><span class="kd">type</span> <span class="nx">planetSorter</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">planets</span> <span class="p">[</span><span class="p">]</span><span class="nx">Planet</span>
	<span class="nx">by</span>      <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Planet</span><span class="p">)</span> <span class="kt">bool</span> <span class="c1">// Closure used in the Less method.
</span><span class="c1"></span><span class="p">}</span>

<span class="c1">// Len is part of sort.Interface.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">planetSorter</span><span class="p">)</span> <span class="nf">Len</span><span class="p">(</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Swap is part of sort.Interface.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">planetSorter</span><span class="p">)</span> <span class="nf">Swap</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1">// Less is part of sort.Interface. It is implemented by calling the &#34;by&#34; closure in the sorter.
</span><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span><span class="nx">planetSorter</span><span class="p">)</span> <span class="nf">Less</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nf">by</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">s</span><span class="p">.</span><span class="nx">planets</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">planets</span> <span class="p">=</span> <span class="p">[</span><span class="p">]</span><span class="nx">Planet</span><span class="p">{</span>
	<span class="p">{</span><span class="s">&#34;Mercury&#34;</span><span class="p">,</span> <span class="mf">0.055</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;Venus&#34;</span><span class="p">,</span> <span class="mf">0.815</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;Earth&#34;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">}</span><span class="p">,</span>
	<span class="p">{</span><span class="s">&#34;Mars&#34;</span><span class="p">,</span> <span class="mf">0.107</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">}</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">// ExampleSortKeys demonstrates a technique for sorting a struct type using programmable sort criteria.
</span><span class="c1"></span><span class="kd">func</span> <span class="nf">Example_sortKeys</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
	<span class="c1">// Closures that order the Planet structure.
</span><span class="c1"></span>	<span class="nx">name</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Planet</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">name</span> <span class="p">&lt;</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">name</span>
	<span class="p">}</span>
	<span class="nx">mass</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Planet</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">mass</span> <span class="p">&lt;</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">mass</span>
	<span class="p">}</span>
	<span class="nx">distance</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Planet</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nx">p1</span><span class="p">.</span><span class="nx">distance</span> <span class="p">&lt;</span> <span class="nx">p2</span><span class="p">.</span><span class="nx">distance</span>
	<span class="p">}</span>
	<span class="nx">decreasingDistance</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">p2</span> <span class="o">*</span><span class="nx">Planet</span><span class="p">)</span> <span class="kt">bool</span> <span class="p">{</span>
		<span class="k">return</span> <span class="nf">distance</span><span class="p">(</span><span class="nx">p2</span><span class="p">,</span> <span class="nx">p1</span><span class="p">)</span>
	<span class="p">}</span>

	<span class="c1">// Sort the planets by the various criteria.
</span><span class="c1"></span>	<span class="nf">By</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">planets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By name:&#34;</span><span class="p">,</span> <span class="nx">planets</span><span class="p">)</span>

	<span class="nf">By</span><span class="p">(</span><span class="nx">mass</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">planets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By mass:&#34;</span><span class="p">,</span> <span class="nx">planets</span><span class="p">)</span>

	<span class="nf">By</span><span class="p">(</span><span class="nx">distance</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">planets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By distance:&#34;</span><span class="p">,</span> <span class="nx">planets</span><span class="p">)</span>

	<span class="nf">By</span><span class="p">(</span><span class="nx">decreasingDistance</span><span class="p">)</span><span class="p">.</span><span class="nf">Sort</span><span class="p">(</span><span class="nx">planets</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;By decreasing distance:&#34;</span><span class="p">,</span> <span class="nx">planets</span><span class="p">)</span>

	<span class="c1">// Output: By name: [{Earth 1 1} {Mars 0.107 1.5} {Mercury 0.055 0.4} {Venus 0.815 0.7}]
</span><span class="c1"></span>	<span class="c1">// By mass: [{Mercury 0.055 0.4} {Mars 0.107 1.5} {Venus 0.815 0.7} {Earth 1 1}]
</span><span class="c1"></span>	<span class="c1">// By distance: [{Mercury 0.055 0.4} {Venus 0.815 0.7} {Earth 1 1} {Mars 0.107 1.5}]
</span><span class="c1"></span>	<span class="c1">// By decreasing distance: [{Mars 0.107 1.5} {Earth 1 1} {Venus 0.815 0.7} {Mercury 0.055 0.4}]
</span><span class="c1"></span><span class="p">}</span>

</code></pre></div><ol>
<li>ä¼ ç»Ÿçš„æ’åºæˆ‘ä»¬æ˜¯é€šè¿‡å®ç° <code>sort</code> æ¥å£ï¼Œåœ¨å…¶ <code>Less</code> æ–¹æ³•ä¸­å¯¹éœ€è¦æ’åºçš„å†…å®¹è¿›è¡Œé¡ºåºåˆ¤æ–­</li>
<li>ä¸Šè¿°ä¾‹å­èƒ½å¤Ÿçµæ´»çš„ä½¿ç”¨ç»“æ„ä½“çš„ä»»æ„å­—æ®µä½œä¸ºæ’åºè§„åˆ™ä¾æ®(name/mass/distance) â¬‡</li>
<li>ä½¿ç”¨ç»„åˆçš„æ–¹å¼å°†å¾…æ’åºå†…å®¹ <code>planets</code> åŠè‡ªå®šä¹‰æ’åºåŠŸèƒ½ <code>by</code> è¿›è¡Œç»„åˆ å¾—åˆ°ä¸€ä¸ªæ–°çš„ç»“æ„ä½“ <code>planetSorter</code></li>
<li>åœ¨ <code>planetSorter</code> ä¸Šå®ç° <code>sort</code> æ¥å£åï¼Œ ä¾¿å¯ç›´æ¥è°ƒç”¨ <code>sort.Sort(ps)</code> å¯¹è¿›è¡Œæ’åºï¼Œæ’åºçš„å®é™…è§„åˆ™åœ¨ <code>func (s *planetSorter) Less(i, j int) bool</code> å†…å®ç°ï¼Œåœ¨ <code>Less</code> æ–¹æ³•ä¸­è°ƒç”¨äº†è‡ªå·±çš„ <code>by</code></li>
<li><code>planetSorter</code> æ˜¯ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨çš„ç»“æ„ä½“ï¼Œå¤–éƒ¨æ— éœ€äº†è§£</li>
<li>æœ€åå¾—åˆ°çš„æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼š(åŠŸèƒ½).(å¯¹è±¡) å’Œä»¥å¾€çš„è®¾è®¡æ¨¡å¼ä¸åŒï¼Œä»¥å¾€éƒ½æ˜¯é¢å‘å¯¹è±¡çš„è®¾è®¡æ¨¡å¼å³ (å¯¹è±¡).(åŠŸèƒ½)</li>
<li>è¿™ç§è®¾è®¡æ¨¡å¼çš„å¥½å¤„æ˜¯ä¸€ä¸ªåŠŸèƒ½å¯ä»¥å¤šå¤„å¤ç”¨åœ¨ä¸åŒå¯¹è±¡ä¸Š</li>
<li>è¿™ç§æ¨¡å¼é¦–å…ˆå¯¹åŠŸèƒ½å®šä¹‰è¿›è¡ŒæŠ½è±¡ï¼Œç„¶åä¸ºè¿™ä¸ªåŠŸèƒ½å®šä¹‰æ¥æ”¶å°†ä½œç”¨æ­¤åŠŸèƒ½çš„å¯¹è±¡çš„æ–¹æ³• è¿™é‡Œæ˜¯ <code>func (by By) Sort(planets []Planet) </code></li>
<li>è¿™é‡Œçš„åŠŸèƒ½å®šä¹‰å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè­¬å¦‚ä¸Šè¿°çš„ <code>By</code></li>
</ol>
]]></content>
		</item>
		
		<item>
			<title>[Go] &#34;==&#34; ä¸ reflect.DeepEqual</title>
			<link>https://tangzixiang.github.io/posts/go-%E4%B8%8E-reflect.deepequal/</link>
			<pubDate>Sun, 25 Mar 2018 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/go-%E4%B8%8E-reflect.deepequal/</guid>
			<description>æ‘˜è¦  ä»€ä¹ˆæ—¶å€™ == ä¸ç®¡ç”¨  åŸºç¡€ç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ èšåˆç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ   reflect.DeepEqual ä»‹ç» reflect.DeepEqual å®è·µ  é’ˆå¯¹åŸºç¡€ç±»å‹çš„ä½¿ç”¨ é’ˆå¯¹èšåˆç±»å‹çš„ä½¿ç”¨ é’ˆå¯¹å¼•ç”¨ç±»å‹çš„ä½¿ç”¨ ç‰¹æ®Šæƒ…å†µ   æ³¨ æ€»ç»“  ä»€ä¹ˆæ—¶å€™ &amp;ldquo;==&amp;rdquo; ä¸ç®¡ç”¨ è¦çŸ¥é“ == ä»€ä¹ˆæ—¶å€™ä¸ç®¡ç”¨é¦–å…ˆå¾—çŸ¥é“å…¶ä»€ä¹ˆæ—¶å€™ç®¡ç”¨
åŸºç¡€ç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ  è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸€è‡´ä¸”å‡ä¸ºåŸºç¡€ç±»å‹ï¼Œæ­¤æ—¶ç›´æ¥æ¯”è¾ƒå€¼çš„å†…å®¹ã€‚ è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸ä¸€è‡´ä¸”å‡ä¸ºåŸºç¡€ç±»å‹ï¼Œå°†ä¼šå‡ºç°è¯­æ³•é”™è¯¯ï¼Œç¼–è¯‘å¤±è´¥ã€‚ è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸ä¸€è‡´ï¼Œä¸”å­˜åœ¨ä¸€æ–¹ä¸º inteface ç±»å‹åŒ…è£…åŸºç¡€ç±»å‹  è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„ç±»å‹ä¸ä¸€è‡´ï¼Œæ¯”è¾ƒç»“æŸè¿”å› false è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„ç±»å‹ä¸€è‡´ï¼Œæ¯”è¾ƒå®é™…å€¼çš„å†…å®¹ã€‚   è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸€è‡´ä¸”å‡ä¸º inteface ç±»å‹åŒ…è£…åŸºç¡€ç±»å‹  è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„å®é™…ç±»å‹ä¸ä¸€è‡´ï¼Œæ¯”è¾ƒç»“æŸè¿”å› false è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„å®é™…ç±»å‹ä¸€è‡´ï¼Œæ¯”è¾ƒå®é™…å€¼çš„å†…å®¹ã€‚    åŸºç¡€ç±»å‹çš„æ¯”è¾ƒæ¯”è¾ƒç®€å•å°±ä¸ä¸Šä»£ç å•¦~
èšåˆç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ æ•°ç»„  è‹¥å…¶å†…éƒ¨å…ƒç´ ä¸ºåŸºç¡€ç±»å‹æ—¶ä¸”é•¿åº¦ï¼Œç±»å‹ï¼Œå€¼å‡ä¸€è‡´æ—¶ï¼Œæ¯”è¾ƒæˆåŠŸè¿”å› trueï¼Œå¦åˆ™ä¸º falseã€‚ è‹¥å…¶å†…éƒ¨å…ƒç´ ä¸ºæ•°ç»„æ—¶å‚è€ƒä¸Šä¸€æ¡æ¯”è¾ƒã€‚ è‹¥å…¶å†…éƒ¨å…ƒç´ ä¸ºç»“æ„ä½“æ—¶ï¼Œå‚è€ƒä¸‹ä¸€æ¡ç»“æ„ä½“çš„æ¯”è¾ƒ  ç»“æ„ä½“  å½“ç»“æ„ä½“å†…éƒ¨å­˜åœ¨ map  ç±»å‹/slice ç±»å‹/channel ç±»å‹/å‡½æ•°ç±»å‹ å­—æ®µæ—¶ï¼Œåˆ™è¯¥ç»“æ„ä½“ä¸å¯ä½¿ç”¨ == è¿›è¡Œç›´æ¥æ¯”è¾ƒï¼Œå¦åˆ™è¯­æ³•é”™è¯¯ï¼Œç¼–è¯‘å¤±è´¥ã€‚ æŒ‰ç…§é¡ºåºæ¯”è¾ƒä¸¤è€…ç»“æ„ä½“å˜é‡çš„æˆå‘˜å˜é‡ï¼Œè‹¥æ»¡è¶³æ‰€æœ‰æ¯”è¾ƒåˆ™ä¸¤è€…æ¯”è¾ƒæˆåŠŸè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚  more code less talk</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ol>
<li>ä»€ä¹ˆæ—¶å€™ <strong><code>==</code></strong> ä¸ç®¡ç”¨
<ul>
<li>åŸºç¡€ç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ</li>
<li>èšåˆç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ</li>
</ul>
</li>
<li>reflect.DeepEqual ä»‹ç»</li>
<li>reflect.DeepEqual å®è·µ
<ul>
<li>é’ˆå¯¹åŸºç¡€ç±»å‹çš„ä½¿ç”¨</li>
<li>é’ˆå¯¹èšåˆç±»å‹çš„ä½¿ç”¨</li>
<li>é’ˆå¯¹å¼•ç”¨ç±»å‹çš„ä½¿ç”¨</li>
<li>ç‰¹æ®Šæƒ…å†µ</li>
</ul>
</li>
<li>æ³¨</li>
<li>æ€»ç»“</li>
</ol>
<h2 id="--">ä»€ä¹ˆæ—¶å€™ &ldquo;<strong>==</strong>&rdquo; ä¸ç®¡ç”¨</h2>
<p>è¦çŸ¥é“  <strong><code>==</code></strong> ä»€ä¹ˆæ—¶å€™ä¸ç®¡ç”¨é¦–å…ˆå¾—çŸ¥é“å…¶ä»€ä¹ˆæ—¶å€™ç®¡ç”¨</p>
<h3 id="heading1">åŸºç¡€ç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ</h3>
<ol>
<li>è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸€è‡´ä¸”å‡ä¸ºåŸºç¡€ç±»å‹ï¼Œæ­¤æ—¶ç›´æ¥æ¯”è¾ƒå€¼çš„å†…å®¹ã€‚</li>
<li>è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸ä¸€è‡´ä¸”å‡ä¸ºåŸºç¡€ç±»å‹ï¼Œå°†ä¼šå‡ºç°è¯­æ³•é”™è¯¯ï¼Œç¼–è¯‘å¤±è´¥ã€‚</li>
<li>è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸ä¸€è‡´ï¼Œä¸”å­˜åœ¨ä¸€æ–¹ä¸º inteface ç±»å‹åŒ…è£…åŸºç¡€ç±»å‹
<ul>
<li>è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„ç±»å‹ä¸ä¸€è‡´ï¼Œæ¯”è¾ƒç»“æŸè¿”å› false</li>
<li>è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„ç±»å‹ä¸€è‡´ï¼Œæ¯”è¾ƒå®é™…å€¼çš„å†…å®¹ã€‚</li>
</ul>
</li>
<li>è‹¥æ¯”è¾ƒçš„ç±»å‹ä¸€è‡´ä¸”å‡ä¸º inteface ç±»å‹åŒ…è£…åŸºç¡€ç±»å‹
<ul>
<li>è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„å®é™…ç±»å‹ä¸ä¸€è‡´ï¼Œæ¯”è¾ƒç»“æŸè¿”å› false</li>
<li>è‹¥ inteface ç±»å‹çš„å®é™…ç±»å‹ä¸å¦ä¸€æ–¹çš„å®é™…ç±»å‹ä¸€è‡´ï¼Œæ¯”è¾ƒå®é™…å€¼çš„å†…å®¹ã€‚</li>
</ul>
</li>
</ol>
<p>åŸºç¡€ç±»å‹çš„æ¯”è¾ƒæ¯”è¾ƒç®€å•å°±ä¸ä¸Šä»£ç å•¦~</p>
<h3 id="heading2">èšåˆç±»å‹ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ</h3>
<h3 id="heading3">æ•°ç»„</h3>
<ol>
<li>è‹¥å…¶å†…éƒ¨å…ƒç´ ä¸ºåŸºç¡€ç±»å‹æ—¶ä¸”é•¿åº¦ï¼Œç±»å‹ï¼Œå€¼å‡ä¸€è‡´æ—¶ï¼Œæ¯”è¾ƒæˆåŠŸè¿”å› trueï¼Œå¦åˆ™ä¸º falseã€‚</li>
<li>è‹¥å…¶å†…éƒ¨å…ƒç´ ä¸ºæ•°ç»„æ—¶å‚è€ƒä¸Šä¸€æ¡æ¯”è¾ƒã€‚</li>
<li>è‹¥å…¶å†…éƒ¨å…ƒç´ ä¸ºç»“æ„ä½“æ—¶ï¼Œå‚è€ƒä¸‹ä¸€æ¡ç»“æ„ä½“çš„æ¯”è¾ƒ</li>
</ol>
<h3 id="heading4">ç»“æ„ä½“</h3>
<ol>
<li>å½“ç»“æ„ä½“å†…éƒ¨å­˜åœ¨ <code>map </code> ç±»å‹/<code>slice</code> ç±»å‹/<code>channel</code> ç±»å‹/å‡½æ•°ç±»å‹ å­—æ®µæ—¶ï¼Œåˆ™è¯¥ç»“æ„ä½“ä¸å¯ä½¿ç”¨ <strong><code>==</code></strong> è¿›è¡Œç›´æ¥æ¯”è¾ƒï¼Œå¦åˆ™è¯­æ³•é”™è¯¯ï¼Œç¼–è¯‘å¤±è´¥ã€‚</li>
<li>æŒ‰ç…§é¡ºåºæ¯”è¾ƒä¸¤è€…ç»“æ„ä½“å˜é‡çš„æˆå‘˜å˜é‡ï¼Œè‹¥æ»¡è¶³æ‰€æœ‰æ¯”è¾ƒåˆ™ä¸¤è€…æ¯”è¾ƒæˆåŠŸè¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚</li>
</ol>
<p>more code less talk</p>
<p>ç¬¬ä¸€ç§æƒ…å†µ:</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Mapper</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Map</span> <span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">string</span>
<span class="p">}</span>
<span class="nx">m1</span><span class="p">,</span> <span class="nx">m2</span> <span class="o">:=</span> <span class="nx">Mapper</span><span class="p">{</span><span class="p">}</span><span class="p">,</span> <span class="nx">Mapper</span><span class="p">{</span><span class="p">}</span>
<span class="c1">// ç¼–è¯‘å¤±è´¥ 
</span><span class="c1"></span><span class="c1">// invalid operation: m1 == m2 (struct containing map[int]string cannot be compared)
</span><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">m1</span> <span class="o">==</span> <span class="nx">m2</span><span class="p">)</span>
</code></pre></div><p>ç¬¬äºŒç§æƒ…å†µ:</p>
<div class="highlight"><pre class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Point</span> <span class="kd">struct</span><span class="p">{</span> <span class="nx">X</span><span class="p">,</span> <span class="nx">Y</span> <span class="kt">int</span> <span class="p">}</span>

<span class="nx">p</span> <span class="o">:=</span> <span class="nx">Point</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">}</span>
<span class="nx">q</span> <span class="o">:=</span> <span class="nx">Point</span><span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>

<span class="c1">// ä»¥ä¸‹ä¸¤ç§æ¯”è¾ƒæ— å¼‚
</span><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">X</span> <span class="o">==</span> <span class="nx">q</span><span class="p">.</span><span class="nx">X</span> <span class="o">&amp;&amp;</span> <span class="nx">p</span><span class="p">.</span><span class="nx">Y</span> <span class="o">==</span> <span class="nx">q</span><span class="p">.</span><span class="nx">Y</span><span class="p">)</span> <span class="c1">// false
</span><span class="c1"></span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">p</span> <span class="o">==</span> <span class="nx">q</span><span class="p">)</span>                   <span class="c1">// false
</span></code></pre></div><p>æœªå®Œå¾…ç»­</p>
<h2 id="heading5">æ³¨</h2>
<ol>
<li>åŸºç¡€ç±»å‹åˆ†ä¸º: æ•°å­—ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€å¸ƒå°”ç±»å‹ã€‚</li>
<li>èšåˆç±»å‹åˆ†ä¸º: æ•°ç»„ç±»å‹ã€ç»“æ„ä½“ç±»å‹ã€‚</li>
<li>å¼•ç”¨ç±»å‹: æŒ‡é’ˆç±»å‹ã€sliceç±»å‹ã€mapç±»å‹ã€å‡½æ•°ç±»å‹ã€channelç±»å‹</li>
</ol>
<h2 id="heading6">å‚è€ƒï¼š</h2>
<ul>
<li><strong>[The Laws of Reflection]</strong>: <a href="https://blog.golang.org/laws-of-reflection">https://blog.golang.org/laws-of-reflection</a></li>
<li><strong>[The Laws of Reflection]</strong> ç¿»è¯‘ç‰ˆ: <strong>[Go è¯­è¨€åå°„ä¸‰å®šå¾‹]</strong> : <a href="https://segmentfault.com/a/1190000006190038">https://segmentfault.com/a/1190000006190038</a></li>
<li><strong>[Goè¯­è¨€ä¸­æ–‡ç½‘]</strong> : <a href="https://studygolang.com/">https://studygolang.com/</a></li>
<li><strong>[Go ç¨‹åºè®¾è®¡è¯­è¨€]</strong></li>
</ul>
]]></content>
		</item>
		
		<item>
			<title> [JS] æµ…è°ˆ JS å¯¹è±¡ä¹‹æ‰©å±•ã€å¯†å°åŠå†»ç»“ä¸‰å¤§ç‰¹æ€§</title>
			<link>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-js-%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%89%A9%E5%B1%95%E5%AF%86%E5%B0%81%E5%8F%8A%E5%86%BB%E7%BB%93%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/</link>
			<pubDate>Thu, 30 Jun 2016 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-js-%E5%AF%B9%E8%B1%A1%E4%B9%8B%E6%89%A9%E5%B1%95%E5%AF%86%E5%B0%81%E5%8F%8A%E5%86%BB%E7%BB%93%E4%B8%89%E5%A4%A7%E7%89%B9%E6%80%A7/</guid>
			<description>æ‘˜è¦  æ‰©å±•ç‰¹æ€§  Object.isExtensible æ–¹æ³• Object.preventExtensions æ–¹æ³•   å¯†å°ç‰¹æ€§  Object.isSealed æ–¹æ³• Object.seal æ–¹æ³•   å†»ç»“ç‰¹æ€§  Object.isFrozen æ–¹æ³• Object.freeze æ–¹æ³•  æµ…å†»ç»“ ä¸ æ·±å†»ç»“      æ‰©å±•ç‰¹æ€§ å¦‚æœä¸€ä¸ªå¯¹è±¡å¯ä»¥æ·»åŠ æ–°çš„å±æ€§ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡æ˜¯å¯æ‰©å±•çš„ã€‚ è®©è¿™ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å†æœ‰æ–°çš„å±æ€§
æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å±æ€§æè¿°ç¬¦åˆ›å»ºå±æ€§ä¸å¯é…ç½®å¯¹è±¡ å¦‚ä½•è®©å¯¹è±¡å±æ€§ä¸å¯é…ç½®æˆ–æšä¸¾, åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸å¯æ‰©å±•å±æ€§çš„å¯¹è±¡
Object.isExtensible æ–¹æ³• MDNï¼š
æ¦‚è¿° Object.isExtensible() æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯æ‰©å±•çš„ï¼ˆæ˜¯å¦å¯ä»¥åœ¨å®ƒä¸Šé¢æ·»åŠ æ–°çš„å±æ€§ï¼‰ã€‚ è¯­æ³• Object.isExtensible(obj) å‚æ•° obj éœ€è¦æ£€æµ‹çš„å¯¹è±¡  ä½¿ç”¨ï¼š
//æ–°å¯¹è±¡é»˜è®¤æ˜¯å¯æ‰©å±•çš„æ— è®ºä½•ç§æ–¹å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯å­—é¢é‡æ–¹å¼  var empty = {a:1}; console.log(Object.isExtensible(empty) === true);//true  //ç­‰ä»·äº ä½¿ç”¨å±æ€§æè¿°ç¬¦ empty = Object.create({},{ &amp;#34;a&amp;#34;:{ value : 1, configurable : true,//å¯é…ç½®  enumerable : true,//å¯æšä¸¾  writable : true//å¯å†™  } }); console.</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>æ‰©å±•ç‰¹æ€§
<ul>
<li><code>Object.isExtensible</code> æ–¹æ³•</li>
<li><code>Object.preventExtensions</code> æ–¹æ³•</li>
</ul>
</li>
<li>å¯†å°ç‰¹æ€§
<ul>
<li><code>Object.isSealed</code> æ–¹æ³•</li>
<li><code>Object.seal</code> æ–¹æ³•</li>
</ul>
</li>
<li>å†»ç»“ç‰¹æ€§
<ul>
<li><code>Object.isFrozen</code> æ–¹æ³•</li>
<li><code>Object.freeze</code> æ–¹æ³•
<ul>
<li><code>æµ…å†»ç»“</code> ä¸ <code>æ·±å†»ç»“</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="heading1"><strong>æ‰©å±•ç‰¹æ€§</strong></h2>
<p>å¦‚æœä¸€ä¸ªå¯¹è±¡å¯ä»¥æ·»åŠ æ–°çš„å±æ€§ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡æ˜¯å¯æ‰©å±•çš„ã€‚
è®©è¿™ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å†æœ‰æ–°çš„å±æ€§</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>å±æ€§æè¿°ç¬¦</code>åˆ›å»ºå±æ€§ä¸å¯é…ç½®å¯¹è±¡ <a href="../%E6%B5%85%E8%B0%88-js-%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0-getter%E4%B8%8E-setter-%E7%9A%845%E7%A7%8D%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E4%B8%8D%E5%8F%AF%E9%85%8D%E7%BD%AE%E6%88%96%E6%9E%9A%E4%B8%BE">å¦‚ä½•è®©å¯¹è±¡å±æ€§ä¸å¯é…ç½®æˆ–æšä¸¾</a>,
åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸å¯æ‰©å±•å±æ€§çš„å¯¹è±¡</p>
<h3 id="objectisextensible-"><strong>Object.isExtensible æ–¹æ³•</strong></h3>
<p>MDNï¼š</p>
<pre><code>æ¦‚è¿°
    Object.isExtensible() æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯æ‰©å±•çš„ï¼ˆæ˜¯å¦å¯ä»¥åœ¨å®ƒä¸Šé¢æ·»åŠ æ–°çš„å±æ€§ï¼‰ã€‚
è¯­æ³•
    Object.isExtensible(obj)
å‚æ•°
    obj éœ€è¦æ£€æµ‹çš„å¯¹è±¡
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//æ–°å¯¹è±¡é»˜è®¤æ˜¯å¯æ‰©å±•çš„æ— è®ºä½•ç§æ–¹å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯å­—é¢é‡æ–¹å¼
</span><span class="c1"></span>
<span class="kd">var</span> <span class="nx">empty</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">}</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
<span class="c1">//ç­‰ä»·äº ä½¿ç”¨å±æ€§æè¿°ç¬¦
</span><span class="c1"></span><span class="nx">empty</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="p">{</span><span class="p">}</span><span class="p">,</span><span class="p">{</span>
    <span class="s2">&#34;a&#34;</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">value</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span><span class="c1">//å¯é…ç½®
</span><span class="c1"></span>        <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span><span class="c1">//å¯æšä¸¾
</span><span class="c1"></span>        <span class="nx">writable</span> <span class="o">:</span> <span class="kc">true</span><span class="c1">//å¯å†™
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
<span class="c1">//å¯¹è±¡æ˜¯å¦å¯ä»¥æ‰©å±•ä¸å¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥é…ç½®æ— å…³
</span><span class="c1"></span><span class="nx">empty</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="p">{</span><span class="p">}</span><span class="p">,</span><span class="p">{</span>
    <span class="s2">&#34;a&#34;</span><span class="o">:</span><span class="p">{</span>
        <span class="nx">value</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span><span class="c1">//ä¸å¯é…ç½®
</span><span class="c1"></span>        <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span><span class="c1">//å¯æšä¸¾
</span><span class="c1"></span>        <span class="nx">writable</span> <span class="o">:</span> <span class="kc">true</span><span class="c1">//å¯å†™
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span></code></pre></div><p>é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è®©ä¸€ä¸ªå¯¹è±¡å˜æˆä¸å¯æ‰©å±•ï¼š</p>
<h3 id="objectpreventextensions-"><strong>Object.preventExtensions æ–¹æ³•</strong></h3>
<p>MDN:</p>
<pre><code>æ¦‚è¿°
    Object.preventExtensions() æ–¹æ³•è®©ä¸€ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯æ°¸è¿œä¸èƒ½å†æ·»åŠ æ–°çš„å±æ€§ã€‚
è¯­æ³•
    Object.preventExtensions(obj)
å‚æ•°
    obj å°†è¦å˜å¾—ä¸å¯æ‰©å±•çš„å¯¹è±¡
æè¿°
    å¦‚æœä¸€ä¸ªå¯¹è±¡å¯ä»¥æ·»åŠ æ–°çš„å±æ€§ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡æ˜¯å¯æ‰©å±•çš„ã€‚
    preventExtensions å¯ä»¥è®©è¿™ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å†æœ‰æ–°çš„å±æ€§ã€‚
    éœ€è¦æ³¨æ„çš„æ˜¯ä¸å¯æ‰©å±•çš„å¯¹è±¡çš„å±æ€§é€šå¸¸ä»ç„¶å¯ä»¥è¢«åˆ é™¤ã€‚
    å°è¯•ç»™ä¸€ä¸ªä¸å¯æ‰©å±•å¯¹è±¡æ·»åŠ æ–°å±æ€§çš„æ“ä½œå°†ä¼šå¤±è´¥ï¼Œä¸è¿‡å¯èƒ½æ˜¯é™é»˜å¤±è´¥ï¼Œä¹Ÿå¯èƒ½ä¼šæŠ›å‡º TypeError å¼‚å¸¸ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ã€‚        
    Object.preventExtensions åªèƒ½é˜»æ­¢ä¸€ä¸ªå¯¹è±¡ä¸èƒ½å†æ·»åŠ æ–°çš„è‡ªèº«å±æ€§ï¼Œä»ç„¶å¯ä»¥ä¸ºè¯¥å¯¹è±¡çš„åŸå‹æ·»åŠ å±æ€§ã€‚
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Object.preventExtensions å°†åŸå¯¹è±¡å˜å¾—ä¸å¯æ‰©å±•,å¹¶ä¸”è¿”å›åŸå¯¹è±¡.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span> <span class="o">===</span> <span class="nx">obj2</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//æ–°åˆ›å»ºçš„å¯¹è±¡é»˜è®¤æ˜¯å¯æ‰©å±•çš„
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">empty</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nx">empty</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//æ·»åŠ æˆåŠŸ
</span><span class="c1"></span>
    <span class="c1">//å°†å…¶å˜ä¸ºä¸å¯æ‰©å±•å¯¹è±¡
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ä¸ºä¸å¯æ‰©å±•å¯¹è±¡æ·»åŠ å±æ€§
</span><span class="c1"></span>    <span class="nx">empty</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥,ä¸æŠ›å‡ºé”™è¯¯
</span><span class="c1"></span>    <span class="nx">empty</span><span class="p">[</span><span class="s2">&#34;c&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥,ä¸æŠ›å‡ºé”™è¯¯
</span><span class="c1"></span>
    <span class="c1">//åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­,ä¸ºä¸å¯æ‰©å±•å¯¹è±¡æ·»åŠ å±æ€§å°†æŠ›å‡ºé”™è¯¯
</span><span class="c1"></span>    <span class="p">(</span><span class="kd">function</span> <span class="nx">fail</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
        <span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
        <span class="nx">empty</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="s2">&#34;4&#34;</span><span class="p">;</span><span class="c1">//throws a TypeError
</span><span class="c1"></span>    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//ä½¿ç”¨ Object.definePropertyæ–¹æ³•ä¸ºä¸å¯æ‰©å±•å¯¹è±¡æ·»åŠ æ–°å±æ€§ä¼šæŠ›å‡ºå¼‚å¸¸
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">empty</span><span class="p">,</span><span class="s2">&#34;e&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span> <span class="mi">5</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">empty</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span> <span class="mi">2</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">empty</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span><span class="c1">//è¾“å‡º2
</span><span class="c1"></span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>åœ¨ä¸Šè¿°ä»£ç çš„æœ€åä¸¤è¡Œå¯ä»¥çœ‹åˆ°å¦‚æœä¸ºå½“å‰ä¸å¯æ‰©å±•å¯¹è±¡ empty ä¿®æ”¹å±æ€§æ˜¯æˆåŠŸçš„ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ä¸è¯¥å¯¹è±¡æ˜¯å¦å¯ä»¥æ‰©å±•æ— å…³ï¼Œè€Œæ˜¯ä¸è¯¥å¯¹è±¡åœ¨åˆ›å»ºçš„æ—¶å€™æ˜¯å¦å£°æ˜ä¸ºä¸å¯é‡å†™æœ‰å…³ï¼ˆ<a href="../%E6%B5%85%E8%B0%88-js-%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0-getter%E4%B8%8E-setter-%E7%9A%845%E7%A7%8D%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E4%B8%8D%E5%8F%AF%E9%85%8D%E7%BD%AE%E6%88%96%E6%9E%9A%E4%B8%BE">Writable</a>ï¼‰</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è®©ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½<code>ä¸å¯é…ç½®</code>åŒæ—¶ä¹Ÿä¸å…è®¸ä¸ºè¯¥å¯¹è±¡è¿›è¡Œ<code>æ‰©å±•</code>æ€ä¹ˆåšï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡,åŒæ—¶å£°æ˜å…¶æ‰€æœ‰å±æ€§å‡ä¸ºä¸å¯é…ç½®ä¸”ä¸å¯å†™
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span> <span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">c</span><span class="o">:</span><span class="mi">3</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="p">{</span>
       <span class="s2">&#34;a&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">,</span>
       <span class="s2">&#34;b&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">,</span>
       <span class="s2">&#34;c&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//ç­‰ä»·äº
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="p">{</span><span class="p">}</span><span class="p">,</span><span class="p">{</span>
        <span class="s2">&#34;a&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">congigurable</span> <span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">enumerable</span> <span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">writable</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span><span class="p">,</span>
        <span class="s2">&#34;b&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">congigurable</span> <span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">enumerable</span> <span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">writable</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span><span class="p">,</span>
        <span class="s2">&#34;c&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">3</span><span class="p">,</span><span class="nx">congigurable</span> <span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">enumerable</span> <span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="nx">writable</span><span class="o">:</span><span class="kc">true</span><span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//å°†å…¶è½¬åŒ–ä¸ºä¸å¯æ‰©å±•å¯¹è±¡
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//æµ‹è¯•è¯¥å¯¹è±¡æ˜¯å¦å³ä¸å¯æ‰©å±•åŒæ—¶å…¶æ‰€æœ‰å±æ€§å‡ä¸å¯é…ç½®
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//false
</span><span class="c1"></span>    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">of</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">)</span><span class="p">{</span><span class="c1">//éå†è¯¥å¯¹è±¡çš„æ‰€æœ‰å¯æšä¸¾å±æ€§å,ä¸åŒ…æ‹¬ç»§æ‰¿è€Œæ¥çš„å±æ€§
</span><span class="c1"></span>        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="nx">name</span><span class="p">,</span><span class="p">{</span><span class="nx">enumerable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//å°†è¯¥å±æ€§çš„ enumerable ç‰¹æ€§é‡æ–°é…ç½®ä¸º true
</span><span class="c1"></span>    <span class="p">}</span><span class="c1">//æŠ›å‡ºå¼‚å¸¸
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è™½ç„¶è¯´ä¸Šé¢çš„ç¨‹åºå®ç°äº†éœ€æ±‚ï¼Œä½†æœªå…å¤ªéº»çƒ¦ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JS å¯¹è±¡çš„å¦ä¸€ç‰¹æ€§ <code>å¯†å°</code></p>
<h2 id="heading2"><strong>å¯†å°ç‰¹æ€§</strong></h2>
<p>å¯†å°å¯¹è±¡æ˜¯æŒ‡é‚£äº›ä¸å¯ æ‰©å±• çš„ï¼Œä¸”æ‰€æœ‰è‡ªèº«å±æ€§éƒ½ä¸å¯é…ç½®çš„ï¼ˆnon-configurableï¼‰å¯¹è±¡ã€‚</p>
<p>æˆ–åˆ™è¯´ å¯†å°å¯¹è±¡æ˜¯æŒ‡é‚£äº›ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼Œä½†å¯èƒ½å¯ä»¥ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼çš„å¯¹è±¡ã€‚</p>
<h3 id="objectissealed-"><strong>Object.isSealed æ–¹æ³•</strong></h3>
<p>MDNï¼š</p>
<pre><code>æ¦‚è¿° 
    Object.isSealed() æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¯†å°çš„ï¼ˆsealedï¼‰ã€‚
è¯­æ³• 
    Object.isSealed(obj)
å‚æ•°
    obj å°†è¦æ£€æµ‹çš„å¯¹è±¡
æè¿°
    å¦‚æœè¿™ä¸ªå¯¹è±¡æ˜¯å¯†å°çš„ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//æ–°å»ºçš„å¯¹è±¡é»˜è®¤ä¸æ˜¯å¯†å°çš„
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">empty</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//å¦‚æœæŠŠä¸€ä¸ªç©ºå¯¹è±¡å˜å¾—ä¸å¯æ‰©å±•,åˆ™å®ƒåŒæ—¶ä¹Ÿä¼šå˜æˆä¸ªå¯†å°å¯¹è±¡.
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">empty</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä½†å¦‚æœè¿™ä¸ªå¯¹è±¡ä¸æ˜¯ç©ºå¯¹è±¡,åˆ™å®ƒä¸ä¼šå˜æˆå¯†å°å¯¹è±¡,å› ä¸ºå¯†å°å¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§å¿…é¡»æ˜¯ä¸å¯é…ç½®çš„.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">hasProp</span> <span class="o">=</span> <span class="p">{</span><span class="nx">fee</span> <span class="o">:</span> <span class="s2">&#34;fie foe fum&#34;</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">hasProp</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">hasProp</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//å¦‚æœæŠŠè¿™ä¸ªå±æ€§å˜å¾—ä¸å¯é…ç½®,åˆ™è¿™ä¸ªå¯¹è±¡ä¹Ÿå°±æˆäº†å¯†å°å¯¹è±¡.
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">hasProp</span><span class="p">,</span><span class="s2">&#34;fee&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">hasProp</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><h3 id="objectseal-"><strong>Object.seal æ–¹æ³•</strong></h3>
<p>MDNï¼š</p>
<pre><code>æ¦‚è¿°
    Object.seal() æ–¹æ³•å¯ä»¥è®©ä¸€ä¸ªå¯¹è±¡å¯†å°ï¼Œå¹¶è¿”å›è¢«å¯†å°åçš„å¯¹è±¡ã€‚
    å¯†å°å¯¹è±¡æ˜¯æŒ‡é‚£äº›ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼Œä½†å¯èƒ½å¯ä»¥ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼çš„å¯¹è±¡ã€‚
è¯­æ³•
    Object.seal(obj)
å‚æ•°
    obj å°†è¦è¢«å¯†å°çš„å¯¹è±¡
æè¿°
    é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡æ˜¯å¯æ‰©å±•çš„ï¼ˆå¯ä»¥æ·»åŠ æ–°çš„å±æ€§ï¼‰ã€‚
    å¯†å°ä¸€ä¸ªå¯¹è±¡ä¼šè®©è¿™ä¸ªå¯¹è±¡å˜çš„ä¸èƒ½æ·»åŠ æ–°å±æ€§ï¼Œä¸”æ‰€æœ‰å·²æœ‰å±æ€§ä¼šå˜çš„ä¸å¯é…ç½®ã€‚
    å±æ€§ä¸å¯é…ç½®çš„æ•ˆæœå°±æ˜¯å±æ€§å˜çš„ä¸å¯åˆ é™¤ï¼Œä»¥åŠä¸€ä¸ªæ•°æ®å±æ€§ä¸èƒ½è¢«é‡æ–°å®šä¹‰æˆä¸ºè®¿é—®å™¨å±æ€§ï¼Œæˆ–è€…åä¹‹ã€‚
    ä½†å±æ€§çš„å€¼ä»ç„¶å¯ä»¥ä¿®æ”¹ã€‚
    å°è¯•åˆ é™¤ä¸€ä¸ªå¯†å°å¯¹è±¡çš„å±æ€§æˆ–è€…å°†æŸä¸ªå¯†å°å¯¹è±¡çš„å±æ€§ä»æ•°æ®å±æ€§è½¬æ¢æˆè®¿é—®å™¨å±æ€§ï¼Œç»“æœä¼šé™é»˜å¤±è´¥æˆ–æŠ›å‡º TypeError å¼‚å¸¸ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰ã€‚
    ä¸ä¼šå½±å“ä»åŸå‹é“¾ä¸Šç»§æ‰¿çš„å±æ€§ã€‚ä½† __proto__ (  ) å±æ€§çš„å€¼ä¹Ÿä¼šä¸èƒ½ä¿®æ”¹ã€‚
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>             <span class="c1">//å£°æ˜ä¸€ä¸ªå¯¹è±¡
</span><span class="c1"></span>        <span class="nx">prop</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="p">}</span><span class="p">,</span>
        <span class="nx">foo</span><span class="o">:</span><span class="s2">&#34;bar&#34;</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="c1">//å¯ä»¥æ·»åŠ æ–°çš„å±æ€§,å·²æœ‰å±æ€§çš„å€¼å¯ä»¥ä¿®æ”¹,å¯ä»¥åˆ é™¤
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">&#34;baz&#34;</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">lumpy</span> <span class="o">=</span> <span class="s2">&#34;woof&#34;</span><span class="p">;</span>
    <span class="k">delete</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">prop</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">;</span><span class="c1">//å°† obj å¯†å°,ä¸”è¿”å›åŸå¯¹è±¡
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä»ç„¶å¯ä»¥ä¿®æ”¹å¯†å°å¯¹è±¡ä¸Šçš„å±æ€§çš„å€¼
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">&#34;quux&#34;</span><span class="p">;</span><span class="c1">//ä¿®æ”¹æˆåŠŸ
</span><span class="c1"></span>
    <span class="c1">//ä½†ä¸èƒ½æŠŠå¯†å°å¯¹è±¡çš„å±æ€§è¿›è¡Œé‡æ–°é…ç½®,è­¬å¦‚è®²æ•°æ®å±æ€§é‡å®šä¹‰æˆè®¿é—®å™¨å±æ€§.
</span><span class="c1"></span>    <span class="c1">//Object.defineProperty(obj,&#34;foo&#34;,{get : function(){return &#34;g&#34;;}});//æŠ›å‡º TypeError
</span><span class="c1"></span>
    <span class="c1">//ä»»ä½•é™¤ä¿®æ”¹å±æ€§å€¼ä»¥å¤–çš„æ“ä½œéƒ½ä¼šå¤±è´¥
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">quaxxor</span> <span class="o">=</span> <span class="s2">&#34;the friendly duck&#34;</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥,å±æ€§æ²¡æœ‰æˆåŠŸæ·»åŠ 
</span><span class="c1"></span>    <span class="k">delete</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥,å±æ€§æ²¡æœ‰åˆ é™¤æˆåŠŸ
</span><span class="c1"></span>
    <span class="c1">//åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­,ä¼šæŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>    <span class="p">(</span><span class="kd">function</span> <span class="nx">fail</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
        <span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
        <span class="c1">//delete obj.foo;//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>        <span class="c1">//obj.sparky = &#34;arf&#34;;//æŠ›å‡º TYpeError å¼‚å¸¸
</span><span class="c1"></span>    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;ohai&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">17</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//æ·»åŠ å±æ€§å¤±è´¥
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;foo&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span> <span class="s2">&#34;eit&#34;</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//ä¿®æ”¹æˆåŠŸ
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span><span class="p">)</span><span class="p">;</span><span class="c1">//â€œeitâ€
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>å¦‚ä¸Šé¢ç¨‹åºæ‰€ç¤ºï¼Œå°†ä¸€ä¸ªå¯¹è±¡<code>å¯†å°</code>åä»…èƒ½ä¿è¯è¯¥å¯¹è±¡<code>ä¸è¢«æ‰©å±•</code>ä¸”å±æ€§<code>ä¸å¯é‡é…ç½®</code>ï¼Œä½†æ˜¯åŸå±æ€§å€¼å´æ˜¯æœ‰å¯èƒ½è¢«ä¿®æ”¹çš„ï¼Œè‹¥è¦è¾¾åˆ°å³<code>å¯†å°</code>åˆ<code>ä¸å¯ä¿®æ”¹åŸå±æ€§å€¼</code>å¯ä»¥è¿™æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//åˆ›å»ºä¸å¯ä¿®æ”¹å€¼çš„å¯†å°å¯¹è±¡
</span><span class="c1"></span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//æ–¹å¼ä¸€
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="nx">writable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span><span class="c1">//1
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span><span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//æ–¹å¼äºŒ
</span><span class="c1"></span>    <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="p">{</span><span class="s2">&#34;a&#34;</span><span class="o">:</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">writable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">seal</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span><span class="c1">//1
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span><span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    
    <span class="c1">//æ–¹å¼...
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>åŒæ ·çš„ï¼Œè™½ç„¶å®ç°äº†éœ€æ±‚ï¼Œä¾æ—§å¯ä»¥ä½¿ç”¨å¦ä¸€ç‰¹æ€§ <code>å†»ç»“</code></p>
<h2 id="heading3"><strong>å†»ç»“ç‰¹æ€§</strong></h2>
<p>ä¸€ä¸ªå¯¹è±¡æ˜¯å†»ç»“çš„ï¼ˆfrozenï¼‰æ˜¯æŒ‡å®ƒä¸å¯æ‰©å±•ï¼Œæ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯é…ç½®çš„ï¼ˆnon-configurableï¼‰ï¼Œä¸”æ‰€æœ‰æ•°æ®å±æ€§ï¼ˆdata propertiesï¼‰éƒ½æ˜¯ä¸å¯å†™çš„ï¼ˆnon-writableï¼‰ã€‚</p>
<p>æ•°æ®å±æ€§æ˜¯å€¼é‚£äº›æ²¡æœ‰å–å€¼å™¨ï¼ˆgetterï¼‰æˆ–èµ‹å€¼å™¨ï¼ˆsetterï¼‰çš„å±æ€§ã€‚</p>
<p>æˆ–åˆ™è¯´ å†»ç»“å¯¹è±¡æ˜¯æŒ‡é‚£äº›ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§çš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå¯¹è±¡æ°¸è¿œæ˜¯ä¸å¯å˜çš„ã€‚</p>
<h3 id="objectisfrozen-"><strong>Object.isFrozen æ–¹æ³•</strong></h3>
<p>MDNï¼š</p>
<pre><code>æ¦‚è¿°
    Object.isFrozen() æ–¹æ³•åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«å†»ç»“ï¼ˆfrozenï¼‰ã€‚
è¯­æ³•
    Object.isFrozen(obj)
å‚æ•°
obj è¢«æ£€æµ‹çš„å¯¹è±¡
æè¿°
    ä¸€ä¸ªå¯¹è±¡æ˜¯å†»ç»“çš„ï¼ˆfrozenï¼‰æ˜¯æŒ‡å®ƒä¸å¯æ‰©å±•ï¼Œæ‰€æœ‰å±æ€§éƒ½æ˜¯ä¸å¯é…ç½®çš„ï¼ˆnon-configurableï¼‰ï¼Œä¸”æ‰€æœ‰æ•°æ®å±æ€§ï¼ˆdata propertiesï¼‰éƒ½æ˜¯ä¸å¯å†™çš„ï¼ˆnon-writableï¼‰ã€‚æ•°æ®å±æ€§æ˜¯å€¼é‚£äº›æ²¡æœ‰å–å€¼å™¨ï¼ˆgetterï¼‰æˆ–èµ‹å€¼å™¨ï¼ˆsetterï¼‰çš„å±æ€§ã€‚
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//ä¸€ä¸ªå¯¹è±¡é»˜è®¤æ˜¯å¯æ‰©å±•çš„,æ‰€ä»¥ä»–ä¹Ÿæ˜¯éå†»ç»“çš„.
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="p">{</span><span class="p">}</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä¸€ä¸ªä¸å¯æ‰©å±•çš„ç©ºå¯¹è±¡åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå†»ç»“å¯¹è±¡.ä¸€ä¸ªä¸å¯æ‰©å±•çš„ç©ºå¯¹è±¡ä¹Ÿæ˜¯å¯†å°å¯¹è±¡
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">vacuouslyFrozen</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="p">{</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">vacuouslyFrozen</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">vacuouslyFrozen</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä¸€ä¸ªéç©ºå¯¹è±¡é»˜è®¤ä¹Ÿæ˜¯éå†»ç»“çš„.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">oneProp</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span><span class="mi">42</span> <span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">oneProp</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//è®©è¿™ä¸ªå¯¹è±¡å˜çš„ä¸å¯æ‰©å±•,å¹¶ä¸æ„å‘³ç€è¿™ä¸ªå¯¹è±¡å˜æˆäº†å†»ç»“å¯¹è±¡,å› ä¸º p å±æ€§ä»ç„¶æ˜¯å¯ä»¥é…ç½®çš„(è€Œä¸”å¯å†™çš„).
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span> <span class="nx">oneProp</span> <span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">oneProp</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//å¦‚æœåˆ é™¤äº†è¿™ä¸ªå±æ€§,åˆ™å®ƒæˆä¸ºç©ºå¯¹è±¡,ä¼šæˆä¸ºä¸€ä¸ªå†»ç»“å¯¹è±¡.
</span><span class="c1"></span>    <span class="k">delete</span> <span class="nx">oneProp</span><span class="p">.</span><span class="nx">p</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">oneProp</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//ä¸€ä¸ªä¸å¯æ‰©å±•çš„å¯¹è±¡,æ‹¥æœ‰ä¸€ä¸ªä¸å¯å†™ä½†å¯é…ç½®çš„å±æ€§,åˆ™å®ƒä»ç„¶æ˜¯éå†»ç»“çš„.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">nonWritable</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">e</span> <span class="o">:</span> <span class="s2">&#34;plep&#34;</span> <span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">nonWritable</span><span class="p">)</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">nonWritable</span><span class="p">,</span><span class="s2">&#34;e&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">writable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//ä¸å¯å†™
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">nonWritable</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//æŠŠè¿™ä¸ªå±æ€§æ”¹ä¸ºä¸å¯é…ç½®,ä¼šè®©è¿™ä¸ªå¯¹è±¡æˆä¸ºå†»ç»“å¯¹è±¡
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">nonWritable</span><span class="p">,</span><span class="s2">&#34;e&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//ä¸å¯é…ç½®
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">nonWritable</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä¸€ä¸ªä¸å¯æ‰©å±•çš„å¯¹è±¡,æ‹¥æœ‰ä¸€ä¸ªä¸å¯é…ç½®ä½†å¯å†™çš„å±æ€§,åˆ™å®ƒä»ç„¶æ˜¯éå†»ç»“çš„.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">nonConfigurable</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">release</span> <span class="o">:</span> <span class="s2">&#34;the kraken!&#34;</span> <span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">nonConfigurable</span><span class="p">)</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">nonConfigurable</span><span class="p">,</span><span class="s2">&#34;release&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">nonConfigurable</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//æŠŠè¿™ä¸ªå±æ€§æ”¹ä¸ºä¸å¯å†™,ä¼šè®©è¿™ä¸ªå¯¹è±¡æˆä¸ºå†»ç»“å¯¹è±¡.
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">nonConfigurable</span><span class="p">,</span><span class="s2">&#34;release&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">writable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">nonConfigurable</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä¸€ä¸ªä¸å¯æ‰©å±•çš„å¯¹è±¡,å€¼æ‹¥æœ‰ä¸€ä¸ªè®¿é—®å™¨,åˆ™å®ƒä»ç„¶æ˜¯éå†»ç»“çš„.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">accessor</span> <span class="o">=</span> <span class="p">{</span><span class="nx">get</span> <span class="nx">food</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="s2">&#34;yum&#34;</span><span class="p">;</span><span class="p">}</span><span class="p">}</span><span class="p">;</span><span class="c1">//è¿™é‡Œä½¿ç”¨çš„æ˜¯å­—é¢å€¼æ³•åˆ›å»ºå¯¹è±¡,é»˜è®¤å¯é…ç½®
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">preventExtensions</span><span class="p">(</span><span class="nx">accessor</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">accessor</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//æŠŠè¿™ä¸ªå±æ€§æ”¹ä¸ºä¸å¯é…ç½®,ä¼šè®©è¿™ä¸ªå¯¹è±¡æˆä¸ºå†»ç»“å¯¹è±¡.
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">accessor</span><span class="p">,</span><span class="s2">&#34;food&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">accessor</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>

    <span class="c1">//ä½¿ç”¨ Object.freeze æ˜¯å†»ç»“ä¸€ä¸ªå¯¹è±¡çš„æœ€æ–¹ä¾¿çš„æ–¹æ³•.
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">frozen</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="o">:</span><span class="mi">81</span><span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">frozen</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">frozen</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">frozen</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä¸€ä¸ªå†»ç»“å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå¯†å°å¯¹è±¡
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isSealed</span><span class="p">(</span><span class="nx">frozen</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//ä¸€ä¸ªå†»ç»“å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªä¸å¯æ‰©å±•å¯¹è±¡
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isExtensible</span><span class="p">(</span><span class="nx">frozen</span><span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><h3 id="objectfreeze-"><strong>Object.freeze æ–¹æ³•</strong></h3>
<p>MDNï¼š</p>
<pre><code>æ¦‚è¿°
    Object.freeze() æ–¹æ³•å¯ä»¥å†»ç»“ä¸€ä¸ªå¯¹è±¡ã€‚
    å†»ç»“å¯¹è±¡æ˜¯æŒ‡é‚£äº›ä¸èƒ½æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§çš„å¯¹è±¡ã€‚
    ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå¯¹è±¡æ°¸è¿œæ˜¯ä¸å¯å˜çš„ã€‚è¯¥æ–¹æ³•è¿”å›è¢«å†»ç»“çš„å¯¹è±¡ã€‚
è¯­æ³•
    Object.freeze(obj)
å‚æ•°
    obj å°†è¦è¢«å†»ç»“çš„å¯¹è±¡
æè¿°
    å†»ç»“å¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§éƒ½ä¸å¯èƒ½ä»¥ä»»ä½•æ–¹å¼è¢«ä¿®æ”¹ã€‚
    ä»»ä½•å°è¯•ä¿®æ”¹è¯¥å¯¹è±¡çš„æ“ä½œéƒ½ä¼šå¤±è´¥ï¼Œå¯èƒ½æ˜¯é™é»˜å¤±è´¥ï¼Œä¹Ÿå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸­ï¼‰ã€‚
    æ•°æ®å±æ€§çš„å€¼ä¸å¯æ›´æ”¹ï¼Œè®¿é—®å™¨å±æ€§ï¼ˆæœ‰getterå’Œsetterï¼‰ä¹ŸåŒæ ·ï¼ˆä½†ç”±äºæ˜¯å‡½æ•°è°ƒç”¨ï¼Œç»™äººçš„é”™è§‰æ˜¯è¿˜æ˜¯å¯ä»¥ä¿®æ”¹è¿™ä¸ªå±æ€§ï¼‰ã€‚
    å¦‚æœä¸€ä¸ªå±æ€§çš„å€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ä¸­çš„å±æ€§æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œé™¤éå®ƒä¹Ÿæ˜¯ä¸ªå†»ç»“å¯¹è±¡ã€‚
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">prop</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="p">}</span><span class="p">,</span>
        <span class="nx">foo</span><span class="o">:</span><span class="s2">&#34;bar&#34;</span>
    <span class="p">}</span><span class="p">;</span>

    <span class="c1">//å¯ä»¥æ·»åŠ æ–°çš„å±æ€§,å·²æœ‰çš„å±æ€§å¯ä»¥è¢«ä¿®æ”¹æˆ–åˆ é™¤
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">&#34;baz&#34;</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">lumpy</span> <span class="o">=</span> <span class="s2">&#34;woof&#34;</span><span class="p">;</span>
    <span class="k">delete</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">prop</span><span class="p">;</span>

    <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">;</span><span class="c1">//å†»ç»“
</span><span class="c1"></span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>
    <span class="c1">//å¯¹å†»ç»“å¯¹è±¡çš„ä»»ä½•æ“ä½œéƒ½ä¼šå¤±è´¥
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">&#34;quux&#34;</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥;
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">quaxxor</span> <span class="o">=</span> <span class="s2">&#34;the friendly duck&#34;</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥
</span><span class="c1"></span>
    <span class="c1">//åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ä¼šæŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
        <span class="nx">obj</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s2">&#34;sparky&#34;</span><span class="p">;</span><span class="c1">//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>        <span class="k">delete</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">quaxxor</span><span class="p">;</span><span class="c1">//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>        <span class="nx">obj</span><span class="p">.</span><span class="nx">sparky</span> <span class="o">=</span> <span class="s2">&#34;arf&#34;</span><span class="p">;</span><span class="c1">//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//ä½¿ç”¨ Object.definePropertyæ–¹æ³•åŒæ ·ä¼šæŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;ohai&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="mi">17</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;foo&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="s2">&#34;eit&#34;</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//æŠ›å‡º TypeError å¼‚å¸¸
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>å¦‚è¯¥æ–¹æ³• MDN çš„æè¿°æ‰€è¿°ï¼Œå€˜è‹¥ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå¤–éƒ¨å¯¹è±¡è¿›è¡Œå†»ç»“ï¼Œå†…éƒ¨å¯¹è±¡çš„å±æ€§æ˜¯ä¾æ—§å¯ä»¥æ”¹å˜çš„ï¼Œè¿™å°±å«æµ…å†»ç»“ï¼Œè‹¥æŠŠå¤–éƒ¨å¯¹è±¡å†»ç»“çš„åŒæ—¶æŠŠå…¶æ‰€æœ‰å†…éƒ¨å¯¹è±¡ç”šè‡³æ˜¯å†…éƒ¨çš„å†…éƒ¨æ— é™å»¶ä¼¸çš„å¯¹è±¡å±æ€§ä¹Ÿå†»ç»“äº†ï¼Œè¿™å°±å«æ·±å†»ç»“ã€‚</p>
<p><strong>æµ…å†»ç»“ä¸æ·±å†»ç»“</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">internal</span> <span class="o">:</span><span class="p">{</span><span class="p">}</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">;</span><span class="c1">//æµ…å†»ç»“
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">internal</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="s2">&#34;aValue&#34;</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">internal</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span><span class="c1">//&#34;aValue&#34;
</span><span class="c1"></span>
    <span class="c1">//æƒ³è®©ä¸€ä¸ªå¯¹è±¡å˜å¾—å®Œå…¨å†»ç»“,å†»ç»“æ‰€æœ‰å¯¹è±¡ä¸­çš„å¯¹è±¡,å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‡½æ•°.
</span><span class="c1"></span>    <span class="kd">function</span> <span class="nx">deepFreeze</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="p">{</span>
        <span class="kd">var</span> <span class="nx">prop</span><span class="p">,</span><span class="nx">propKey</span><span class="p">;</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">freeze</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="p">;</span><span class="c1">//é¦–å…ˆå†»ç»“ç¬¬ä¸€å±‚å¯¹è±¡
</span><span class="c1"></span>        <span class="k">for</span><span class="p">(</span><span class="nx">propKey</span> <span class="k">in</span> <span class="nx">o</span><span class="p">)</span><span class="p">{</span>
            <span class="nx">prop</span> <span class="o">=</span> <span class="nx">o</span><span class="p">[</span><span class="nx">propKey</span><span class="p">]</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">o</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">propKey</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">prop</span> <span class="o">===</span> <span class="s2">&#34;object&#34;</span><span class="p">)</span> <span class="o">||</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">isFrozen</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span><span class="p">)</span><span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">deepFreeze</span><span class="p">(</span><span class="nx">prop</span><span class="p">)</span><span class="p">;</span><span class="c1">//é€’å½’
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">deepFreeze</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">internal</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="s2">&#34;bValue&#34;</span><span class="p">;</span><span class="c1">//é™é»˜å¤±è´¥
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">internal</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span><span class="p">;</span><span class="c1">//undefined
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>[JS] é«˜èƒ½ï¼typeof Function.prototype å¼•å‘çš„å…ˆæœ‰ Function è¿˜æ˜¯å…ˆæœ‰ Object çš„æ¢è®¨</title>
			<link>https://tangzixiang.github.io/posts/%E9%AB%98%E8%83%BDtypeof-function.prototype-%E5%BC%95%E5%8F%91%E7%9A%84%E5%85%88%E6%9C%89-function-%E8%BF%98%E6%98%AF%E5%85%88%E6%9C%89-object-%E7%9A%84%E6%8E%A2%E8%AE%A8/</link>
			<pubDate>Wed, 29 Jun 2016 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E9%AB%98%E8%83%BDtypeof-function.prototype-%E5%BC%95%E5%8F%91%E7%9A%84%E5%85%88%E6%9C%89-function-%E8%BF%98%E6%98%AF%E5%85%88%E6%9C%89-object-%E7%9A%84%E6%8E%A2%E8%AE%A8/</guid>
			<description>æ¥ä¸ªæ‘¸åº•æµ‹è¯•ï¼Œè¯´å‡ºä»¥ä¸‹æ¯ä¸ªè¡¨è¾¾å¼çš„ç»“æœ
function F(){}; var o = {}; typeof F; typeof o; typeof F.prototype; typeof o.prototype; typeof new F; typeof (new F).prototype; typeof (new F).__proto__; typeof F.__proto__; typeof o.__proto__; typeof Object; typeof Function; typeof (new Function).prototype; typeof (new Function).__proto__; typeof (new Object).prototype; typeof (new Object).__proto__; typeof Object.prototype; typeof Object.__proto__; typeof Function.prototype; typeof Function.__proto__;  function F(){}; var o = {}; typeof F; //==&amp;gt; function typeof o; //==&amp;gt; object typeof F.prototype; //==&amp;gt; object typeof o.</description>
			<content type="html"><![CDATA[<p>æ¥ä¸ªæ‘¸åº•æµ‹è¯•ï¼Œè¯´å‡ºä»¥ä¸‹æ¯ä¸ªè¡¨è¾¾å¼çš„ç»“æœ</p>
<pre><code>function F(){};
var o = {};

typeof F;
typeof o;
typeof F.prototype;
typeof o.prototype;
typeof new F;
typeof (new F).prototype;
typeof (new F).__proto__;
typeof F.__proto__;
typeof o.__proto__;
typeof Object;
typeof Function;
typeof (new Function).prototype;
typeof (new Function).__proto__;
typeof (new Object).prototype;
typeof (new Object).__proto__;
typeof Object.prototype;
typeof Object.__proto__;
typeof Function.prototype;
typeof Function.__proto__;
</code></pre><hr>
<pre><code>function F(){};
var o = {};
                
typeof F;                          //==&gt; function
typeof o;                          //==&gt; object
typeof F.prototype;                //==&gt; object
typeof o.prototype;                //==&gt; undefinded
typeof new F;                      //==&gt; object
typeof (new F).prototype;          //==&gt; undefined
typeof (new F).__proto__;          //==&gt; object
typeof F.__proto__;                //==&gt; function
typeof o.__proto__;                //==&gt; object
typeof Object;                     //==&gt; function
typeof Function;                   //==&gt; function
typeof (new Function).prototype;   //==&gt; object
typeof (new Function).__proto__;   //==&gt; function
typeof (new Object).prototype;     //==&gt; undefined
typeof (new Object).__proto__;     //==&gt; object
typeof Object.prototype;           //==&gt; object
typeof Object.__proto__;           //==&gt; function
typeof Function.prototype;         //==&gt; function
typeof Function.__proto__;         //==&gt; function

</code></pre><p>çœ‹åˆ°è¿™é‡Œç›¸ä¿¡æœ‰ä¸å°‘å…¥é—¨ä¸ä¹…çš„åŒå­¦å·²ç»äº§ç”Ÿç–‘æƒ‘äº†ï¼Œæ˜¯çœŸçš„å—ï¼Ÿç„¶ååœ¨æµè§ˆå™¨è¯•è¿‡ä¸€ç•ªå‘ç°çœŸæ˜¯å¦‚æ­¤ã€‚</p>
<p>è§£å¼€ç–‘æƒ‘ä¹‹å‰å…ˆå›é¡¾äº›å¤§å®¶éƒ½çŸ¥é“çš„çŸ¥è¯†ç‚¹ï¼š</p>
<p>å¼•ç”¨ MDN å…³äº å¯¹è±¡å®ä¾‹å’Œå¯¹è±¡åŸå‹å¯¹è±¡ çš„é˜è¿°ï¼š</p>
<blockquote>
<p>JavaScript è¯­è¨€çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç”± Object è¡ç”Ÿçš„å¯¹è±¡ï¼›
æ‰€æœ‰å¯¹è±¡éƒ½ç»§æ‰¿äº† Object.prototype çš„æ–¹æ³•å’Œå±æ€§ï¼Œå°½ç®¡å®ƒä»¬å¯èƒ½è¢«è¦†ç›–ã€‚
ä¾‹å¦‚ï¼Œå…¶å®ƒçš„æ„é€ å™¨åŸå‹è¦†ç›–äº† constructor å±æ€§å¹¶æä¾›äº†å…¶è‡ªå·±çš„ toString æ–¹æ³•ã€‚
åŸå‹å¯¹è±¡çš„æ›´æ”¹ä¼šä¼ æ’­ç»™æ‰€æœ‰çš„å¯¹è±¡ï¼Œé™¤éè¿™äº›å±æ€§å’Œæ–¹æ³•åœ¨åŸå‹é“¾ä¸­è¢«å†æ¬¡è¦†ç›–ã€‚</p>
</blockquote>
<p>å°±å¦‚æˆ‘ä»¬ç»å¸¸åœ¨å„ç±»æ•™ç§‘ä¸­çœ‹åˆ°çš„ æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½æ˜¯ Object ç±»å‹çš„å®ä¾‹</p>
<p>é‚£ä¹ˆæˆ‘ä»¬å¹³æ—¶éƒ½æ˜¯å¦‚ä½•ç¡®å®šä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯å¦ä¸€ä¸ªç±»å‹æˆ–å¯¹è±¡çš„å®ä¾‹çš„å‘¢ï¼Ÿ</p>
<p>å¯¹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ typeof å…³é”®å­— äº¦æˆ–å¯ä»¥ä½¿ç”¨å…³é”®å­— instanceof æ¥ç¡®å®šæŸä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹æˆ–å¯¹è±¡çš„å®ä¾‹ï¼š</p>
<pre><code>typeof {} //object
({}) instanceof Object //true

typeof Date                      //function
Date instanceof Function         //true
typeof Date.prototype            //obejct
Date.prototype instanceof Object //true
</code></pre><p>ç„¶è€Œé’ˆå¯¹ Object çš„ prototype å±æ€§ï¼š</p>
<pre><code>typeof Object.prototype //object

Object.prototype instanceof Object // false
</code></pre><p>ä¸ºä»€ä¹ˆ,è¦æƒ³ææ¸…æ¥šä¸ºä»€ä¹ˆå°±å¾—æ˜ç™½ instanceof è¿™ä¸ªå…³é”®å­—åœ¨è¡¨è¾¾å¼ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ?</p>
<p>åœ¨å¼„æ¸…æ¥š instanceof ä¹‹å‰ è¿˜å¾—å¼„æ¸…æ¥šä¸€æ ·ä¸œè¥¿ å°±æ˜¯ new ä¸€ä¸ªå¯¹è±¡åˆ°åº•åšäº†ä»€ä¹ˆï¼š</p>
<p>å¦‚ <code>var a = new A();</code> è®¤ä¸º â€œaä¸ºAå‡½æ•°çš„å®ä¾‹å¯¹è±¡â€</p>
<p>newæ“ä½œçš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆ? å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ol>
<li>new åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡{}</li>
<li>ç„¶åå°† A.prototype çš„å¼•ç”¨æ”¾ç½®åˆ°è¯¥å¯¹è±¡çš„åŸå‹é“¾ä¸Šã€‚å³ a.__proto__ æŒ‡å‘ A.prototype</li>
<li>æ‰§è¡Œ A å‡½æ•°ï¼Œå°† A ä¸­ this æŒ‡å‘è¯¥å¯¹è±¡ï¼Œæ‰§è¡Œç»“æŸï¼Œå¦‚æœæ²¡æœ‰ return é‚£ä¹ˆé»˜è®¤è¿”å›thiså¼•ç”¨</li>
</ol>
<p>é‚£ä¹ˆnewçš„å…¶ä¸­ä¸€ä¸ªçš„ä½œç”¨ä¾¿æ˜¯æŠŠ A.prototype çš„æŒ‡å‘æ·»åŠ åˆ°äº† a çš„åŸå‹é“¾ä¸­ã€‚</p>
<p>è‡³æ­¤æˆ‘ä»¬ä¾¿çŸ¥é“äº†å¦‚ä¸‹å…³ç³»ï¼š</p>
<pre><code>a.\_\_proto__ === A.prototype //true

a instanceof A //true
</code></pre>
<p>æ•…ä¸ºä½•ä¸å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š</p>
<p>instanceof æ“ä½œç¬¦å…¶å®å°±æ˜¯æ£€æŸ¥å·¦ä¾§çš„å…ƒç´ çš„ __proto__ é“¾ä¸Šæœ‰æ²¡æœ‰å³ä¾§ç±»æˆ–å¯¹è±¡çš„ prototype å­˜åœ¨ã€‚
åŒç† å½“æŸæŸæŸæ˜¯æŸæŸæŸçš„å®ä¾‹æ—¶ï¼Œå…¶å®ä¹Ÿæ˜¯è¯æ˜å·¦ä¾§çš„ __proto__ é“¾ä¸Šæœ‰å³ä¾§ç±»æˆ–å¯¹è±¡çš„ prototype å­˜åœ¨ã€‚</p>
<p>ç»†èŠ‚å‰–æå¦‚ä¸‹ï¼š</p>
<ol>
<li>çœ‹å³ä¾§çš„ A è·å–å…¶ prototype å¾—åˆ° A.prototypeã€‚</li>
<li>çœ‹å·¦ä¾§ a å¯¹è±¡çš„åŸå‹é“¾ä¸Šæ˜¯å¦æœ‰ç¬¬ä¸€æ­¥å¾—åˆ° A.prototypeã€‚
<ul>
<li>è·å– a.__proto__ å¯¹è±¡çœ‹æ˜¯å¦ä¸º A.prototypeï¼Œæ˜¯åˆ™è¿”å› true</li>
<li>è·å– a.__proto__.__proto__ å¯¹è±¡çœ‹æ˜¯å¦ä¸º A.prototype,æ˜¯åˆ™è¿”å› true</li>
<li>é‡å¤è·å–å·¦ä¾§çš„åŸå‹é“¾ä¸Šçš„ <code>[[Prototype]]</code> ç‰¹æ€§å³ __proto__ å±æ€§è¿›è¡Œåˆ¤æ–­ç›´åˆ°ä¸ºç©ºè¿”å› falseã€‚</li>
</ul>
</li>
</ol>
<p>æ ¡éªŒçœŸç†ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ js æœ‰å‡ å¤§å†…ç½®ç±»å‹ è¿™äº›ç±»å‹éƒ½æ˜¯ Function çš„å®ä¾‹ï¼Œæ˜¯ Function ç±»å‹ï¼š</p>
<pre><code>out(typeof Date)     //Function
out(typeof RegExp)   //Function
out(typeof Number)   //Function
out(typeof Boolean)  //Function
out(typeof String)   //Function
out(typeof Array)    //Function
out(typeof Error)    //Function
//...

out(Date.__proto__  === Function.prototype)    //true
out(RegExp.__proto__ === Function.prototype)   //true
out(Number.__proto__ === Function.prototype)   //true
out(Boolean.__proto__ === Function.prototype)  //true
out(String.__proto__ === Function.prototype)   //true
out(Array.__proto__ === Function.prototype)    //true
out(Error.__proto__ === Function.prototype)    //true
//...

out(Object.getPrototypeOf(Date)  === Function.prototype)    //true
out(Object.getPrototypeOf(RegExp) === Function.prototype)   //true
out(Object.getPrototypeOf(Number) === Function.prototype)   //true
out(Object.getPrototypeOf(Boolean) === Function.prototype)  //true
out(Object.getPrototypeOf(String) === Function.prototype)   //true
out(Object.getPrototypeOf(Array) === Function.prototype)    //true
out(Object.getPrototypeOf(Error) === Function.prototype)    //true
//...

out( Date instanceof Function)    //true
out( RegExp instanceof Function)  //true
out( Number instanceof Function)  //true
out( Boolean instanceof Function) //true
out( String instanceof Function)  //true
out( Array instanceof Function)   //true
out( Error instanceof Function)   //true
//...
</code></pre>
<p>å›åˆ°ä¸Šè¿°é’ˆå¯¹ Object çš„ prototype å±æ€§ç–‘æƒ‘ ä¸ºä»€ä¹ˆåˆ°äº† Object å°±å¾—ä¸å‡ºä¸€æ ·çš„ç»“æœäº†å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“æ¯ä¸ªå‡½æ•°å¯¹è±¡äº¦æˆ–å‡½æ•°ç±»å‹éƒ½ä¼šæœ‰ä¸ª prototype å±æ€§ï¼Œåœ¨å…¶ä¸ŠæŒ‚è½½çš„æ–¹æ³•å’Œå±æ€§å‡èƒ½å¤Ÿè¢«è¯¥ç±»å‹å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡å…±äº«ï¼Œå› ä¸ºå®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡æ‹¥æœ‰ <code>[[Prototype]]</code> ç‰¹æ€§å³ <code>\_\_proto__</code> å±æ€§ï¼Œjs ä¾¿æ˜¯é€šè¿‡è¯¥ç‰¹æ€§å®ç°åŸå‹é“¾æœºåˆ¶ã€‚</p>
<p>é‚£ä¹ˆè¿™äº›å‡½æ•°çš„ prototype å±æ€§å¯¹è±¡æ˜¯å¦ä¹Ÿæœ‰è‡ªå·±çš„ <code>[[Prototype]]</code> ç‰¹æ€§å³ <code>\_\_proto__</code> å±æ€§å‘¢ï¼Ÿ</p>
<pre><code>out(typeof Date.prototype)    //object
out(typeof RegExp.prototype)  //object
out(typeof Number.prototype)  //object
out(typeof Boolean.prototype) //object
out(typeof String.prototype)  //object
out(typeof Array.prototype)   //object
out(typeof Error.prototype)   //object

out(typeof Object.getPrototypeOf(Date.prototype))        //object
out(typeof Object.getPrototypeOf(RegExp.prototype))      //object
out(typeof Object.getPrototypeOf(Number.prototype))      //object
out(typeof Object.getPrototypeOf(Boolean.prototype))     //object
out(typeof Object.getPrototypeOf(String.prototype))      //object
out(typeof Object.getPrototypeOf(Array.prototype))       //object
out(typeof Object.getPrototypeOf(Error.prototype))       //object

out(Object.getPrototypeOf(Date.prototype) === Object.prototype)    //true
out(Object.getPrototypeOf(RegExp.prototype) === Object.prototype)  //true
out(Object.getPrototypeOf(Number.prototype) === Object.prototype)  //true
out(Object.getPrototypeOf(Boolean.prototype) === Object.prototype) //true
out(Object.getPrototypeOf(String.prototype) === Object.prototype)  //true
out(Object.getPrototypeOf(Array.prototype) === Object.prototype)   //true
out(Object.getPrototypeOf(Error.prototype) === Object.prototype)   //true
</code></pre>
<p>å¯ä»¥çœ‹å‡ºæ¯ä¸ªå‡½æ•°å¯¹è±¡çš„ prototype å±æ€§ä¹Ÿæœ‰è‡ªå·±çš„ <code>[[Prototype]]</code> ç‰¹æ€§ è€Œä¸”æŒ‡å‘çš„æ˜¯ <code>Object.prototype</code></p>
<p>é‚£ä¹ˆæ˜¯å¦æ‰€æœ‰å¯¹è±¡éƒ½ä¼šæœ‰ç›´æ¥çš„ <code>[[Prototype]]</code> ç‰¹æ€§ å‘¢ï¼Ÿ</p>
<pre><code>out( Object.getPrototypeOf( Object.getPrototypeOf(Date.prototype)))     //null
out( Object.getPrototypeOf( Object.getPrototypeOf(RegExp.prototype)))   //null
out( Object.getPrototypeOf( Object.getPrototypeOf(Number.prototype)))   //null
out( Object.getPrototypeOf( Object.getPrototypeOf(Boolean.prototype)))  //null
out( Object.getPrototypeOf( Object.getPrototypeOf(String.prototype)))   //null
out( Object.getPrototypeOf( Object.getPrototypeOf(Array.prototype)))    //null
out( Object.getPrototypeOf( Object.getPrototypeOf(Error.prototype)))    //null
out( Object.getPrototypeOf( Object.prototype))                          //null
</code></pre>
<p>ç­”æ¡ˆæ˜¯å¦ã€‚</p>
<p>æœ‰ä¸ªä¾‹å¤–ä»–å°±æ˜¯ <code>Object.prototype</code>ã€‚</p>
<p>å›çœ‹å‰é¢çš„ Demo:</p>
<pre><code>Object.prototype instanceof Object // false
</code></pre><p>ä»å‰é¢çš„ä»£ç è¾“å‡ºæˆ‘ä»¬çœ‹åˆ° Object.prototype å¯¹è±¡æ˜¯æ²¡æœ‰ <code>[[Prototype]]</code> ç‰¹æ€§çš„ï¼ŒåŒæ—¶å‰é¢æˆ‘ä»¬ä¹Ÿè®¨è®ºè¿‡ <code>instanceof</code> è¿™ä¸ªå…³é”®å­—æ‰€æ¶‰åŠçš„å…·ä½“æ“ä½œã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å…·ä½“å‰–æå¦‚ä¸‹ï¼š</p>
<ol>
<li>çœ‹å³ä¾§çš„ Object è·å–å…¶ prototype å¾—åˆ° Object.prototypeã€‚</li>
<li>çœ‹å·¦ä¾§ Object.prototype å¯¹è±¡çš„åŸå‹é“¾ä¸Šæ˜¯å¦æœ‰ç¬¬ä¸€æ­¥å¾—åˆ° Object.prototypeã€‚
<ul>
<li>è·å– Object.prototype.__proto__ å¯¹è±¡ä¸ºç©ºç›´æ¥è¿”å› falseã€‚</li>
</ul>
</li>
</ol>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆæ‰€æœ‰çš„å¯¹è±¡éƒ½æœ‰ <code>[[Prototype]]</code> ç‰¹æ€§ï¼Œå”¯ç‹¬ <code>Object.prototype</code> æ²¡æœ‰å‘¢ã€‚ç­”æ¡ˆå¾ˆç®€å•ï¼šæ—¢ç„¶ JSçš„ç»§æ‰¿æœºåˆ¶æ˜¯åŸºäºåŸå‹é“¾çš„é‚£æ€»è¯¥æœ‰ä¸ªå¤´å§ï¼Œè¿™ä¸ªå¤´ä¾¿æ˜¯ <code>Object.prototype</code> ã€‚</p>
<p>å†æ¥ä¸€å‘:</p>
<pre><code>out( typeof Function)                                          //function
out( typeof Object)                                            //function
out( Object instanceof Function)                               //true
out( Function instanceof Function)                             //true
</code></pre>
<p>åœ¨å­¦ä¹  JS çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å·²ç»çŸ¥é“æ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½æ˜¯ <code>Function</code> ç±»å‹çš„å®ä¾‹ï¼ŒåŒ…æ‹¬ <code>Object</code> åœ¨å†…ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯ Object çš„å®ä¾‹ï¼Œè¿™æ—¶ä¾¿å¼•å‡ºæ–‡ç« çš„é¢˜ç›®</p>
<h2 id="-function--object">åˆ°åº•æ˜¯å…ˆæœ‰ Function è¿˜æ˜¯å…ˆæœ‰ Objectï¼Ÿ</h2>
<pre><code>out( Function.__proto__  === Function.prototype)               //true
out( Object.__proto__  === Function.prototype)                 //true
out( Object.getPrototypeOf(Function) === Function.prototype)   //true
out( Object.getPrototypeOf(Object) === Function.prototype)     //true
out( Object instanceof Function)                               //true 
out( Function instanceof Function)                             //true
</code></pre>
<p>ä»ä¸Šè¿°ä»£ç åŠ ä¸Šå‰é¢å¾—å‡ºçš„ç»“è®ºæˆ‘ä»¬å¯ä»¥çœ‹å‡º</p>
<p>Function å’Œ Object çš„åŸå‹é“¾ä¸Šéƒ½æœ‰ <code>Function.prototype</code></p>
<p>æˆ‘ä»¬å†æ¥è¯¦ç»†çœ‹çœ‹ <code>Function.prototype</code></p>
<pre><code>out( typeof Function.prototype);                // function
out( Function.prototype instanceof Object)      //true
</code></pre><p>è¿™æ—¶å€™é—®é¢˜å‡åä¸º</p>
<h2 id="functionprototype--objectprototype-">Function.prototype å’Œ Object.prototype çš„å…³ç³»ã€‚</h2>
<pre><code>out( Function.prototype.__proto__ === Object.prototype)
</code></pre>
<p>è¿™æ—¶å€™å…³ç³»å·²ç»å¾ˆæ˜äº†äº†ï¼š</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“é™¤äº† Object.prototype ä¹‹å¤–æ‰€æœ‰å¯¹è±¡éƒ½ä¼šæœ‰ <code>[[Prototype]]</code> ç‰¹æ€§ å³ <code>__proto__</code> å±æ€§,æ•… Function.prototype ä¹Ÿä¸ä¾‹å¤–ï¼Œ
Function.prototype æŒ‡å‘çš„æ˜¯ Object.prototype</p>
<p>è¿™æ—¶å€™å°±å¯ä»¥æ¸…æ¥šçš„çŸ¥é“ä¸ºä»€ä¹ˆè¯´æ‰€æœ‰ç±»å‹éƒ½æ˜¯ Function çš„å®ä¾‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ Object çš„å®ä¾‹:</p>
<p>å› ä¸ºæ‰€æœ‰çš„ç±»å‹çš„ <code>[[Prototype]]</code> ç‰¹æ€§ å³ <code>\_\_proto__</code> å±æ€§å‡æŒ‡å‘çš„æ˜¯ Function.prototype ,åŒæ—¶ Function.prototype çš„<code>[[Prototype]]</code>ç‰¹æ€§ å³ <code>\_\_proto__</code> å±æ€§åˆæŒ‡å‘äº† Object.prototype ã€‚</p>
<p>æ•…å¤§ç‹æ˜¯ <code>Object.prototype</code>ï¼ŒäºŒç‹æ˜¯ <code>Function.prototype</code>ï¼Œå…¶ä»–å‡æ˜¯å°å¼Ÿï¼Œä½†æ˜¯å°å¼Ÿä¹Ÿæœ‰ç­‰çº§åˆ’åˆ†</p>
<p>å…ˆæ¥ç€æ¥çœ‹ Function:</p>
<pre><code>out( typeof Function.prototype);                // function
out( typeof Function.__proto__);                // function
out( Function.prototype === Function.__proto__);// true
</code></pre><p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥çœ‹å‡º Function.prototype å’Œå…¶ä»–ç±»å‹çš„ prototype å±æ€§æ˜¯ object ç±»å‹ä¸ä¸€æ ·ï¼Œ æ˜¯ function ç±»å‹ã€‚
å…¶æ¬¡ Function.__proto__  æŒ‡å‘äº† Function.prototypeã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“å½“ä¸€ä¸ªç±»å‹å®ä¾‹åŒ–å‡ºå¯¹è±¡æ—¶ï¼Œè¿™äº›å¯¹è±¡çš„ä¾¿ä¼šå…±äº«æŒ‚è½½åœ¨è¯¥ç±»å‹çš„ prototype å±æ€§ä¸Šçš„èµ„æºï¼Œå› ä¸ºè¿™äº›å¯¹è±¡å‡æœ‰ <code>[[Prototype]]</code> ç‰¹æ€§,æŒ‡å‘çš„å°±æ˜¯å®ä¾‹åŒ–å‡ºè¿™äº›å¯¹è±¡çš„ç±»å‹çš„ prototypeã€‚</p>
<p>ä»å‰é¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ç±»å‹çš„ <code>[[Prototype]]</code> ç‰¹æ€§å‡æŒ‡å‘äº† Function.prototype,æ‰€ä»¥è¿™äº›ç±»å‹éƒ½å…·æœ‰äº†ä½¿ç”¨æŒ‚è½½åœ¨ Function.prototype ä¸Šçš„èµ„æºçš„æƒåˆ©ã€‚å› æ­¤å¯ä»¥çœ‹å‡ºï¼Œå½“ä¸€ä¸ªå¯¹è±¡å…·æœ‰ä½¿ç”¨æŒ‚è½½åœ¨ Function.prototype ä¸Šçš„èµ„æºçš„æƒåˆ©æ—¶ï¼ŒåŠè¯¥å¯¹è±¡ <code>[[Prototype]]</code> æŒ‡å‘ Function.prototype æ—¶ä»£è¡¨è¿™ä¸ªå¯¹è±¡æ˜¯ä¸ª Function å®ä¾‹æ˜¯ä¸€ä¸ªç±»å‹ï¼Œèƒ½å¤Ÿå®ä¾‹åŒ–å‡ºè¯¥ç±»å‹çš„å¯¹è±¡ï¼Œå½“ç„¶åŒ…æ‹¬ Function åœ¨å†…ã€‚</p>
<p>åˆå› ä¸ºæ‰€æœ‰ç±»å‹çš„ <code>[[Prototype]]</code> æŒ‡å‘ Function.prototype è€Œ Function.prototype çš„ <code>[[Prototype]]</code> æŒ‡å‘æ˜¯ Object.prototypeï¼Œæ‰€ä»¥è¿™äº›ç±»å‹éƒ½å…·æœ‰ä½¿ç”¨æŒ‚è½½åœ¨ Object.prototype ä¸Šçš„èµ„æºçš„æƒåˆ©ã€‚</p>
<p>é‚£ç”¨è¿™äº›ç±»å‹å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡å‘¢? ç±»å‹çš„åŸå‹é“¾å¹¶ä¸åœ¨å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ä¸Šå‘€ï¼Œä½†æ˜¯è¿™äº›å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡çš„ <code>[[Protitype]]</code> æŒ‡å‘çš„æ˜¯å…¶ç±»å‹çš„  prototype å±æ€§ã€‚</p>
<p>å¾€å›çœ‹å‰é¢çš„ä¾‹å­ å¯ä»¥çœ‹åˆ°æœ‰ä¸€æ®µ</p>
<pre><code>out(Object.getPrototypeOf(Date.prototype) === Object.prototype)    //true
out(Object.getPrototypeOf(RegExp.prototype) === Object.prototype)  //true
out(Object.getPrototypeOf(Number.prototype) === Object.prototype)  //true
out(Object.getPrototypeOf(Boolean.prototype) === Object.prototype) //true
out(Object.getPrototypeOf(String.prototype) === Object.prototype)  //true
out(Object.getPrototypeOf(Array.prototype) === Object.prototype)   //true
out(Object.getPrototypeOf(Error.prototype) === Object.prototype)   //true
out(Object.getPrototypeOf(Function.prototype) === Object.prototype)   //true
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™äº›ç±»å‹çš„ prototype å±æ€§çš„ <code>[[Protitype]]</code> æŒ‡å‘çš„æ˜¯ Object.prototype æ•…è‡³æ­¤ï¼Œæ‰€æœ‰å¯¹è±¡åŒ…æ‹¬ç±»å‹å¯¹è±¡äº¦æˆ–ç±»å‹å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡éƒ½æœ‰ä½¿ç”¨æŒ‚è½½åœ¨ Object.prototype ä¸Šçš„èµ„æºçš„æƒåˆ©ã€‚</p>
<p>åˆ°è¿™é‡Œæ‰€æœ‰å¯¹è±¡ä¹‹é—´çš„å…³ç³»å°±å·²ç»æ¸…é™¤äº†ï¼Œç›¸ä¿¡å·²ç»æœ‰ä¸å°‘äººå·²ç»æ™•ä¹äº†ï¼Œæ²¡å…³ç³» æˆ‘å‡†å¤‡äº†å›¾(çœ‹ä¸å¤ªæ¸…æ™°æ˜¯å› ä¸ºä¸Šä¼ åè¢«å‹ç¼©äº†ï¼Œä¸‹å›¾ object.__proto__ å¤„æœ‰ä¸ªé”™è¯¯æ‰¾æ—¶é—´æ›´æ–°)ï¼š</p>
<p><img src="/assets/841025530-5766b5683f4b6_articlex.png" alt="clipboard.png"></p>
<p>å½“ç„¶è¿™é‡Œæˆ‘è¿˜æ˜¯çœç•¥äº†éƒ¨åˆ†ç»†èŠ‚ è­¬å¦‚å¯¹åº”ç±»å‹çš„ prototype å±æ€§å¯¹è±¡å‡æœ‰ constructor å±æ€§æŒ‡å‘è¯¥ç±»å‹ï¼Œä»¥åŠçœç•¥éƒ¨åˆ†ç±»å‹ã€‚</p>
<p>å¯¹ç€è¿™å¼ å›¾é‡æ–°çœ‹ä¸€éæœ¬æ–‡å’Œæ–‡ç« å¼€å¤´çš„æ‘¸åº•ï¼Œç›¸ä¿¡ä½ ä¼šæœ‰æ”¶è·ã€‚</p>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆä½¿ç”¨ typeof è·å– Object.prototype ä¼šè¿”å› object å‘¢ã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“æµè§ˆå™¨åº•å±‚å¯¹ JS çš„å®ç°çš„æ˜¯åŸºäº C/C++
é€šè¿‡ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥çŒœæµ‹</p>
<h2 id="js-">æµè§ˆå™¨åœ¨åˆå§‹åŒ–JS ç¯å¢ƒæ—¶éƒ½å‘ç”Ÿäº†äº›ä»€ä¹ˆï¼ˆå­˜åœ¨äº‰è®®ï¼Œä¸ä¸€å®šæ­£ç¡®ï¼‰</h2>
<ol>
<li>ç”¨ C/C++ æ„é€ å†…éƒ¨æ•°æ®ç»“æ„åˆ›å»ºä¸€ä¸ª OP å³(Object.prototype)ä»¥åŠåˆå§‹åŒ–å…¶å†…éƒ¨å±æ€§ä½†ä¸åŒ…æ‹¬è¡Œä¸ºã€‚</li>
<li>ç”¨ C/C++ æ„é€ å†…éƒ¨æ•°æ®ç»“æ„åˆ›å»ºä¸€ä¸ª FP å³(Function.prototype)ä»¥åŠåˆå§‹åŒ–å…¶å†…éƒ¨å±æ€§ä½†ä¸åŒ…æ‹¬è¡Œä¸ºã€‚</li>
<li>å°† FP çš„ [[Prototype]] æŒ‡å‘ OPã€‚</li>
<li>ç”¨ C/C++ æ„é€ å†…éƒ¨æ•°æ®ç»“æ„åˆ›å»ºå„ç§å†…ç½®å¼•ç”¨ç±»å‹ã€‚</li>
<li>å°†å„å†…ç½®å¼•ç”¨ç±»å‹çš„ [[Prototype]] æŒ‡å‘ FPã€‚</li>
<li>å°† Function çš„ prototype æŒ‡å‘ FPã€‚</li>
<li>å°† Object çš„ prototype æŒ‡å‘ OPã€‚</li>
<li>ç”¨ Function å®ä¾‹åŒ–å‡º OPï¼ŒFPï¼Œä»¥åŠ Object çš„è¡Œä¸ºå¹¶æŒ‚è½½ã€‚</li>
<li>ç”¨ Object å®ä¾‹åŒ–å‡ºé™¤ Object ä»¥åŠ Function çš„å…¶ä»–å†…ç½®å¼•ç”¨ç±»å‹çš„ prototype å±æ€§å¯¹è±¡ã€‚</li>
<li>ç”¨ Function å®ä¾‹åŒ–å‡ºé™¤Object ä»¥åŠ Function çš„å…¶ä»–å†…ç½®å¼•ç”¨ç±»å‹çš„ prototype å±æ€§å¯¹è±¡çš„è¡Œä¸ºå¹¶æŒ‚è½½ã€‚</li>
<li>å®ä¾‹åŒ–å†…ç½®å¯¹è±¡ Math ä»¥åŠ Grobal
è‡³æ­¤ï¼Œæ‰€æœ‰ å†…ç½®ç±»å‹æ„å»ºå®Œæˆã€‚</li>
</ol>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å›ç­”ä¸ºä»€ä¹ˆä½¿ç”¨ typeof è·å– Object.prototype ä¼šè¿”å› object äº†ã€‚
å› ä¸ºæˆ‘ä»¬åœ¨ä½¿ç”¨ typeof çš„æ—¶å€™å¾—åˆ°çš„ object ç±»å‹å¹¶ä¸å®Œå…¨ä»£è¡¨æ˜¯ Object ç±»å‹å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ï¼Œæœ‰å¯èƒ½æ˜¯åº•å±‚å®ç°çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬ nullã€‚çœŸæ­£æƒ³çŸ¥é“è¿™ä¸ªç±»å‹è¿˜æ˜¯éœ€è¦å»åˆ°å½“å‰è¯¥ç±»çš„å†…éƒ¨ <code>[[Class]]</code>å±æ€§ï¼Œè‡³äºå¦‚ä½•è·å–å¯ä»¥ä½¿ç”¨ Object çš„ toString æ–¹æ³•ã€‚</p>
<p>æœ€åçš„æœ€åï¼Œä½ è¿˜å¯¹æ˜¯ç°æœ‰ Function è¿˜æ˜¯ç°æœ‰ Object æœ‰æƒ³æ³•äº†å—ï¼Ÿ</p>
<p>ä»¥ä¸Šå‡ä¸ºä¸ªäººæŸ¥é˜…åŠå®è·µæ€»ç»“çš„è§‚ç‚¹ã€‚</p>
<p>è°¢è°¢~</p>
]]></content>
		</item>
		
		<item>
			<title>è¢«å°çœ‹çš„å°å·¨äºº - viewport</title>
			<link>https://tangzixiang.github.io/posts/%E8%A2%AB%E5%B0%8F%E7%9C%8B%E7%9A%84%E5%B0%8F%E5%B7%A8%E4%BA%BA-viewport/</link>
			<pubDate>Mon, 09 May 2016 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E8%A2%AB%E5%B0%8F%E7%9C%8B%E7%9A%84%E5%B0%8F%E5%B7%A8%E4%BA%BA-viewport/</guid>
			<description>viewportæµ…å…¥ ç›¸ä¿¡æ‰€æœ‰çš„ web å¼€å‘è€…éƒ½è§è¿‡äº¦æˆ–ç”¨è¿‡è¿™ä¸ªç¥å¥‡çš„ meta æ ‡ç­¾å¤´ï¼Œäº¦æˆ–åœ¨ä¸æ˜ç™½æˆ–è€…åŠæ˜åŠè’™çš„æƒ…å†µä¸‹å°±ç”¨ä¸Šäº†ã€‚
å…ˆæ¥è§£ä¸ªç–‘æƒ‘ ï¼Œä¸Šå›¾
chrome çš„æ‰‹æŒè®¾å¤‡æ¨¡æ‹Ÿå™¨ç›¸ä¿¡å¤§å®¶å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œé‚£ä¹ˆå·¦ä¸Šè§’çš„320*480æ˜¯ç¥é©¬ ï¼Ÿåº”è¯¥å¾ˆå¤šäººå·²ç»åœ¨å¿ƒé‡Œæœ‰äº†ä¸ªç­”æ¡ˆã€‚ åœ¨è§£å¼€è¿™ä¸ªç–‘æƒ‘ä¹‹å‰ éœ€è¦å¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼š
 A pixel is not a pixel is not a pixel
 å¼•ç”¨ W3cplus æ­¤åƒç´ éå½¼åƒç´ ä¸­çš„ä¸€å¥è¯
æ˜¯çš„ï¼Œæƒ³è¯´æ˜çš„å°±æ˜¯è¿™é‡Œçš„320*480æŒ‡çš„æ˜¯ä½ çš„è®¾å¤‡çš„ dpx è€Œé CSS ä¸­çš„ px
è‡³äºæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å½“ç„¶æœ‰åŒºåˆ«ï¼ï¼š
 è®¾å¤‡çš„ px æ˜¯æŒ‡åº¦é‡è®¾å¤‡å¤§å°å°ºå¯¸çš„ä¸€ç§å•ä½ï¼Œè€Œæˆ‘ä»¬å¸¸åœ¨web åº”ç”¨ä¸­ä½¿ç”¨çš„ px æ˜¯é’ˆå¯¹Web åº”ç”¨å¼€å‘ç”¨æ¥åº¦é‡åº”ç”¨ç¨‹åºä¸­å…ƒç´ çš„ç›¸å¯¹å°ºå¯¸ï¼Œæ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µå’Œå‰é¢çš„è®¾å¤‡åƒç´ æ˜¯ä¸æ­å™¶çš„ä¸¤ç§å­˜åœ¨ã€‚
 é‚£ä¹ˆä¸ºä»€ä¹ˆå½“æˆ‘ä»¬ä½¿ç”¨çš„ css ä¸­çš„ px æ¥è®¾è®¡é¡µé¢çš„æ—¶å€™ ä½¿ç”¨ä¸è®¾å¤‡ä¸Šçš„çš„å®½åº¦ä¸€è‡´æ—¶èƒ½å¤Ÿå¾—åˆ°è‰¯å¥½çš„è§†è§‰æ•ˆåº”å‘¢ï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚
æˆ‘ä»¬å…ˆçœ‹ä¸‹ å…³äº viewport çš„ ç›¸å…³å£°æ˜è¯­æ³•
&amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;name=value,name=value&amp;quot;&amp;gt; é¦–å…ˆå¼•ç”¨ä¸‹ ppk æ–‡ç« ä¸­çš„è‹±æ–‡è§£é‡Š(ç½‘ç»œä¸Šå¤§éƒ¨åˆ†çš„å‡ºå¤„å‡ºè‡ªæ­¤)ï¼š
Directives Every name/value pair is a directive. (The word is my own invention.</description>
			<content type="html"><![CDATA[<h2 id="viewport">viewportæµ…å…¥</h2>
<p>ç›¸ä¿¡æ‰€æœ‰çš„ web å¼€å‘è€…éƒ½è§è¿‡äº¦æˆ–ç”¨è¿‡è¿™ä¸ªç¥å¥‡çš„ meta æ ‡ç­¾å¤´ï¼Œäº¦æˆ–åœ¨ä¸æ˜ç™½æˆ–è€…åŠæ˜åŠè’™çš„æƒ…å†µä¸‹å°±ç”¨ä¸Šäº†ã€‚</p>
<p>å…ˆæ¥è§£ä¸ªç–‘æƒ‘ ï¼Œä¸Šå›¾</p>
<p><img src="/assets/2744837098-5726bf841269e_articlex.png" alt=""></p>
<p>chrome çš„æ‰‹æŒè®¾å¤‡æ¨¡æ‹Ÿå™¨ç›¸ä¿¡å¤§å®¶å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œé‚£ä¹ˆå·¦ä¸Šè§’çš„320*480æ˜¯ç¥é©¬ ï¼Ÿåº”è¯¥å¾ˆå¤šäººå·²ç»åœ¨å¿ƒé‡Œæœ‰äº†ä¸ªç­”æ¡ˆã€‚
åœ¨è§£å¼€è¿™ä¸ªç–‘æƒ‘ä¹‹å‰ éœ€è¦å¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼š</p>
<blockquote>
<p>A pixel is not a pixel is not a pixel</p>
</blockquote>
<p>å¼•ç”¨ <a href="http://www.w3cplus.com/css/A-pixel-is-not-a-pixel-is-not-a-pixel.html">W3cplus æ­¤åƒç´ éå½¼åƒç´ </a>ä¸­çš„ä¸€å¥è¯</p>
<p><img src="/assets/1851282934-5726c2a90f366_articlex.png" alt=""></p>
<p>æ˜¯çš„ï¼Œæƒ³è¯´æ˜çš„å°±æ˜¯è¿™é‡Œçš„320*480æŒ‡çš„æ˜¯ä½ çš„è®¾å¤‡çš„ dpx è€Œé CSS ä¸­çš„ px</p>
<p>è‡³äºæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ
å½“ç„¶æœ‰åŒºåˆ«ï¼ï¼š</p>
<blockquote>
<p>è®¾å¤‡çš„ px æ˜¯æŒ‡åº¦é‡è®¾å¤‡å¤§å°å°ºå¯¸çš„ä¸€ç§å•ä½ï¼Œè€Œæˆ‘ä»¬å¸¸åœ¨web åº”ç”¨ä¸­ä½¿ç”¨çš„ px æ˜¯é’ˆå¯¹Web åº”ç”¨å¼€å‘ç”¨æ¥åº¦é‡åº”ç”¨ç¨‹åºä¸­å…ƒç´ çš„ç›¸å¯¹å°ºå¯¸ï¼Œæ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µå’Œå‰é¢çš„è®¾å¤‡åƒç´ æ˜¯ä¸æ­å™¶çš„ä¸¤ç§å­˜åœ¨ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆå½“æˆ‘ä»¬ä½¿ç”¨çš„ css ä¸­çš„ px æ¥è®¾è®¡é¡µé¢çš„æ—¶å€™ ä½¿ç”¨ä¸è®¾å¤‡ä¸Šçš„çš„å®½åº¦ä¸€è‡´æ—¶èƒ½å¤Ÿå¾—åˆ°è‰¯å¥½çš„è§†è§‰æ•ˆåº”å‘¢ï¼Œä¸”å¬æˆ‘æ…¢æ…¢é“æ¥ã€‚</p>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ å…³äº viewport çš„ ç›¸å…³å£°æ˜è¯­æ³•</p>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;name=value,name=value&quot;&gt;
</code></pre><p>é¦–å…ˆå¼•ç”¨ä¸‹ <a href="http://www.quirksmode.org/mobile/metaviewport/#t01">ppk</a> æ–‡ç« ä¸­çš„è‹±æ–‡è§£é‡Š(ç½‘ç»œä¸Šå¤§éƒ¨åˆ†çš„å‡ºå¤„å‡ºè‡ªæ­¤)ï¼š</p>
<p>Directives
Every name/value pair is a directive. (The word is my own invention.)
There are six of them in total:</p>
<ul>
<li>width  Sets the width of the layout viewport.</li>
<li>initial-scale  Sets the initial zoom of the page AND the width of the layout viewport.</li>
<li>minimum-scale Sets the minimum zoom level (i.e. how much the user can zoom out).</li>
<li>maximum-scale Sets the maximum zoom level (i.e. how much the user can zoom in).</li>
<li>height Is supposed to set the height of the layout viewport. It is not supported anywhere.</li>
<li>user-scalable When set to no prevents the user from zooming. This is an abomination that MUST NOT be used.</li>
</ul>
<p>çœ‹ä¸æ˜ç™½ï¼Ÿå¥½å§æˆ‘æ¥ç¿»è¯‘ä¸€æŠŠï¼ˆç¿»è¯‘çš„æœ‰ç‚¹å¼ºç¡¬åˆ«è§æ€ªï¼‰ï¼š</p>
<p>æŒ‡ä»¤
æ¯å¯¹é”®å€¼å¯¹éƒ½æ˜¯ä¸€ä¸ªæŒ‡ä»¤ï¼Œï¼ˆppk å¤§ç¥çš„å«æ³•ï¼‰ä»¥ä¸‹æ€»è®¡å…±æœ‰6å¯¹ï¼š</p>
<ul>
<li>width è®¾ç½® layout viewport çš„å®½åº¦ï¼ˆcss pxï¼‰</li>
<li>initial-scale  è®¾ç½®é¡µé¢çš„åˆå§‹ç¼©æ”¾æ¯”ä¾‹åŒæ—¶å¯ä»¥è®¾ç½® layout viewport çš„å®½åº¦</li>
<li>minimum-scale è®¾ç½®æœ€å°ç¼©æ”¾æ¯”ä¾‹ï¼ˆæŒ‡ç”¨æˆ·èƒ½å¤Ÿç¼©å°åˆ°å¤šå°ï¼‰</li>
<li>maximum-scale è®¾ç½®æœ€å¤§ç¼©æ”¾æ¯”ä¾‹ï¼ˆæŒ‡ç”¨æˆ·èƒ½å¤Ÿæ”¾å¤§åˆ°å¤šå¤§ï¼‰</li>
<li>height è®¾ç½® layout viewport çš„é«˜åº¦ï¼Œä½†æš‚æ—¶ä¸æ€ä¹ˆè¢«æ”¯æŒ</li>
<li>user-scalable è®¾ç½®æ˜¯å¦å…è®¸ç”¨æˆ·æ”¾å¤§ç¼©å°ã€‚ppk æŒ‡å‡ºè¿™ä¸ªå±æ€§å¾ˆé‚ªæ¶ï¼Œæœ€å¥½åˆ«ç”¨ï¼ˆå·ç¬‘ï¼‰</li>
</ul>
<p>çœ‹åˆ°è¿™é‡Œæˆ–è®¸åˆè’™äº†ä¸€åŠ layout viewportæ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ</p>
<p>ppk å¤§ç¥çš„æ„æ€æ˜¯æƒ³è±¡ä¸‹åœ¨æˆ‘ä»¬è®¾ç½® viewport åï¼Œæµè§ˆå™¨èƒ½å¤Ÿç”Ÿæˆ3ç§ viewport åˆ†åˆ«å¯¹åº” <strong>visual viewport</strong> ã€ <strong>layout viewport</strong> å’Œ <strong>ideal viewport</strong>ã€‚</p>
<p>è¿™é‡Œæˆ‘ä¸æ‰“ç®—æºæ‚è¿‡å¤šçš„è¿™äº›ç†è®ºï¼Œåªæƒ³è¦ç®€å•æ˜äº†çš„æ–¹å¼è§£é‡Šï¼ˆå¿½æ‚ ï¼‰å‡º ä½¿ç”¨ viewport ä¼šå‘ç”Ÿä»€ä¹ˆäº‹ï¼Œå¦‚æœå¯¹ ppk å¤§ç¥çš„è¿™äº›ç†è®ºæ„Ÿå…´è¶£å¯ä»¥ go here</p>
<ol>
<li><a href="http://www.quirksmode.org/mobile/viewports.html">A tale of two viewports â€” part one</a></li>
<li><a href="http://www.quirksmode.org/mobile/viewports2.html">A tale of two viewports â€” part two</a></li>
<li><a href="http://www.quirksmode.org/mobile/metaviewport/#t01">Meta viewport</a></li>
</ol>
<p>å¤§æ¦‚çš„äº†è§£åˆ° viewport çš„è¯­æ³•åæ¥ä¸‹æ¥å°±æ˜¯æ¡ˆä¾‹è®²è§£</p>
<p>å½“ä¸ä½¿ç”¨ viewport æ—¶æˆ‘ä»¬ä¸º pc è®¾è®¡çš„ç½‘ç«™åœ¨æ‰‹æŒè®¾å¤‡ä¸Šæ˜¯æ€ä¹ˆæ ·çš„</p>
<p>è¿™é‡Œæ‹¿ç™¾åº¦çš„ pc ç‰ˆåšä¾‹å­ï¼ˆå› ä¸º pc ç‰ˆæ²¡æœ‰ viewportï¼‰é¦–å…ˆåœ¨éæ¨¡æ‹Ÿå™¨çŠ¶æ€ä¸‹æ‰“å¼€ç™¾åº¦ç„¶ååˆ‡æ¢åˆ°æ¨¡æ‹Ÿå™¨çŠ¶æ€ä¸‹</p>
<p><img src="/assets/2255243104-5726d12b88004_articlex.jpeg" alt=""></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°çš„æ˜¯æ•´ä¸ª pc ç‰ˆçš„é¡µé¢è¢«å‹ç¼©åˆ°å®½åº¦ä»…æœ‰ 320pxï¼ˆé css å•ä½ï¼‰çš„è®¾å¤‡ä¸­ ï¼Œæ­£å¸¸äººéƒ½æ²¡åŠæ³•ä½¿ç”¨å§ï¼Ÿ
é‚£ä¹ˆï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªé¡µé¢çš„å®½åº¦æ˜¯å¤šå°‘å‘¢ï¼ˆcss pxï¼‰ï¼Ÿ</p>
<p><img src="/assets/161361549-5727e840a6b53_articlex.jpeg" alt=""></p>
<p>æˆ‘ä»¬é€‰ä¸­ html å…ƒç´ ï¼ŒæŸ¥çœ‹å³ä¸‹è§’çš„ç›’å­æ ·å¼ å¯ä»¥æ˜ç¡®çš„çœ‹åˆ°å½“å‰çš„é¡µé¢å®½åº¦æ˜¯ 980pxï¼ˆcss pxï¼‰</p>
<p>ä¹Ÿå°±æ˜¯è¯´æµè§ˆå™¨åœ¨åªæœ‰ 320dpx çš„æƒ…å†µä¸‹å±•ç¤ºäº†980px çš„é¡µé¢ï¼ˆæ˜æ˜¾å¯ä»¥çœ‹å‡ºè¿™é‡Œçš„ dpx ä¸ px å¹¶ä¸æ˜¯1ï¼š1çš„å…³ç³»ï¼‰</p>
<p>ä½†æ˜¯æˆ‘ä»¬ä»å·¦ä¸‹è§’çš„æ ·å¼è¡¨å†…å¹¶æ²¡æœ‰çœ‹åˆ° html çš„ widthï¼Œé‚£ä¹ˆè¿™ä¸ª html çš„ 980px å®½æ˜¯å“ªæ¥çš„å‘¢</p>
<p>ç­”æ¡ˆæ˜¯æ¥è‡ª viewport çš„ï¼ åˆ«å¿˜è®°äº†ä¸Šé¢çš„ viewport è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ viewport è®¾ç½®äº†å®½åº¦ä¸º 980pxï¼Œä½†æ˜¯å‰é¢ä¸æ˜¯è¯´äº†è¿™ä¸ªä¾‹å­ä½¿ç”¨çš„æ˜¯ç™¾åº¦çš„ pc ç«¯çš„é¡µé¢æ²¡æœ‰ viewport å—ï¼Ÿ</p>
<p>é‚£ç”±å“ªæ¥çš„ viewport è®¾ç½®å®½åº¦å‘¢ ï¼Œçœ‹åˆ°è¿™é‡Œç›¸ä¿¡å·²ç»æœ‰äººæœ‰ç­”æ¡ˆäº†ï¼Œæ²¡é”™å½“ä½ æ²¡æœ‰è®¾ç½® viewport çš„æ—¶å€™æµè§ˆå™¨ä¼šè‡ªåŠ¨ä¸ºä½ é‡‡ç”¨é»˜è®¤å€¼ é‚£ä¹ˆé»˜è®¤å€¼æ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è¿™é‡Œæ‰¾æ¥ ppk çš„æµ‹è¯•
<img src="/assets/671989192-5726d470439a2_articlex.jpeg" alt="å›¾ç‰‡æè¿°"></p>
<p>ä»€ä¹ˆæ„æ€å‘¢ å…¶å®æ„æ€å°±æ˜¯åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ˆé’ˆå¯¹æ‰‹æŒç«¯ï¼‰å¦‚æœä½ æ²¡æœ‰è®¾ç½®è¿‡ viewport é‚£ä¹ˆæˆ‘æµè§ˆå™¨å°±ä¼šæ ¹æ®æˆ‘è‡ªä¸ªè®¾å¤‡å†³å®šé‡‡ç”¨ viewport å®½åº¦æ˜¯å¤šå°‘ã€‚</p>
<p>çŸ¥é“äº†è¿™äº›è¿˜ä¸å¤Ÿ ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘æœ‰äº† viewport è®¾ç½®å®½åº¦ä¹‹å html å°±ä¼šé‡‡ç”¨å…¶å®½åº¦å‘¢ ï¼š</p>
<blockquote>
<p>å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œviewport æ˜¯ä¸€ç§è¶…è¶Š html å…ƒç´ çš„å­˜åœ¨ï¼Œå½“æ²¡æœ‰ä¸º html è®¾ç½®å®½åº¦çš„æ—¶å€™ï¼Œhtml çš„å®½åº¦ç»§æ‰¿äº viewport è®¾ç½®çš„å®½åº¦</p>
</blockquote>
<p>å°±æ‹¿ w3cplus ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p><img src="/assets/448400386-5727e929d87dc_articlex.jpeg" alt="å›¾ç‰‡æè¿°"></p>
<p>å’Œä¸Šé¢çš„ä¸€æ ·æ‹¿ pc ç‰ˆæµ‹è¯•ï¼Œé»˜è®¤æ²¡æœ‰ viewport æŸ¥çœ‹ html å®½åº¦æœç„¶ä¸º 980px</p>
<p>æ¥ä¸‹æ¥ä¸º html å…ƒç´ è®¾ç½®å®½åº¦ä¸º 50% å¯ä»¥çœ‹åˆ°æ•ˆæœ å…¶å®½åº¦å€¼ä¸º 490px</p>
<p><img src="/assets/772147236-5727e9d50e2ff_articlex.jpeg" alt="å›¾ç‰‡æè¿°"></p>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªæ€»ç»“ï¼š</p>
<blockquote>
<p>viewport å…¶å®å°±æ˜¯è®¾ç½®åœ¨å½“å‰è®¾å¤‡çš„å®½åº¦ä¸‹å±•ç¤ºå¤šå°‘ CSS px çš„ç½‘é¡µå†…å®¹</p>
</blockquote>
<p>ä¸Šä¸€ä¸ªä¾‹å­æˆ‘ä»¬å·²ç»çœ‹åˆ°å½“ html æ–‡æ¡£çš„å®½åº¦å°äº viewport çš„å®½åº¦æ˜¯ä¼šæœ‰ä»€ä¹ˆæ ·çš„æ•ˆæœï¼Œé‚£ä¹ˆåè¿‡æ¥å¦‚æœè®¾ç½® html çš„å®½åº¦å¤§äº viewport åˆä¼šæ˜¯ä»€ä¹ˆæ•ˆæœå‘¢</p>
<p><img src="/assets/1806395392-5727ea198b734_articlex.jpeg" alt="å›¾ç‰‡æè¿°"></p>
<p>è¿™é‡Œè®¾ç½® html çš„å®½åº¦ä¸º 2000px å¯ä»¥çœ‹å‡ºé¡µé¢å‡ºç°äº†æ»šåŠ¨æ•ˆæœã€‚</p>
<p>è¿™é‡Œåˆå¾—å‡ºä¸€ä¸ªæ€»ç»“ï¼š</p>
<blockquote>
<p>å½“ html æ–‡æ¡£çš„å®½åº¦å°äº viewport çš„å®½åº¦æ—¶ä»¥æ–‡æ¡£çš„å®é™…å®½åº¦ä¸ºå‡†ï¼Œæ–‡æ¡£å°äº viewport å®½åº¦çš„éƒ¨åˆ†ä¸æ˜¾ç¤ºå†…å®¹ï¼Œå½“ html æ–‡æ¡£çš„å®½åº¦å¤§äº viewport çš„æ—¶å€™ï¼Œä½ èƒ½çœ‹åˆ°çš„åŒºåŸŸä¾ç„¶æ˜¯ viewport çš„å¤§å°åŒºåŸŸï¼Œä¸è¿‡ä½ å¯ä»¥é€šè¿‡æ»‘åŠ¨æˆ–æ»šåŠ¨é¡µé¢æ¥æŸ¥çœ‹å¤§äº viewport åŒºåŸŸçš„å†…å®¹</p>
</blockquote>
<p>è‡³æ­¤æˆ‘ä»¬å·²ç»çŸ¥é“äº†è®¾å¤‡å®½åº¦ä¸ viewport çš„å®½åº¦ä»¥åŠå®é™…æ–‡æ¡£çš„å®½åº¦ä¹‹é—´çš„å…³ç³»ã€‚</p>
<p>é€šè¿‡ä¸Šè¿°çš„ä¾‹å­æˆ‘ä»¬çŸ¥é“åŸºæœ¬ä¸Š viewport çš„é»˜è®¤å®½åº¦æ˜¯ 980pxï¼Œä¸”æµè§ˆå™¨ä¼šå°†è€… viewport å¤§å°çš„ html æ–‡æ¡£å¡è¿›æœ‰é™çš„è®¾å¤‡å®½åº¦å†…ï¼ˆæµè§ˆå™¨ä¼šåŠ¨æ€è®¡ç®—æ–‡æ¡£çš„å¸ƒå±€åŠå†…å®¹ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°çš„ä¸œè¥¿éƒ½å¾ˆå°ã€‚
é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦æ¸…é™¤çš„çœ‹æ¸…æ–‡æ¡£å†…çš„å†…å®¹æ€ä¹ˆåŠ ï¼Œæ²¡é”™ï¼Œç¼©å° viewport çš„å¤§å°ï¼Œä»€ä¹ˆåŸç†ï¼Ÿ
å½“æˆ‘ä»¬ç¼©å° viewport çš„å®½åº¦çš„æ—¶å€™æ–‡æ¡£çš„å®½åº¦ä¹Ÿå¯¹åº”çš„è¢«ç¼©å°ï¼Œå³ä¸€æ ·çš„è®¾å¤‡å®½åº¦ï¼Œæˆ‘æ˜¾ç¤ºçš„ä¸œè¥¿å°‘äº†ï¼ˆè¿™æ—¶å€™æµè§ˆå™¨é‡æ–°è®¡ç®—æ–‡æ¡£å¸ƒå±€åŠå†…å®¹ï¼‰å¯ä»¥çœ‹åˆ°çš„ç»“æœæ˜¯å­—ä½“è¢«æ”¾å¤§äº†ï¼Œå†…å®¹éƒ½è¢«æ”¾å¤§äº†ï¼</p>
<p>è¿™é‡Œè¿˜æ˜¯æ‹¿ W3CPlusçš„ç½‘ç«™åšä¾‹å­ï¼šä¸€æ ·çš„æ‹¿ pc ç‰ˆçš„æ—  viewport çš„æ–‡æ¡£æ”¾å…¥æ‰‹æŒè®¾å¤‡å†…ï¼Œæ²¡åŠæ³•çœ‹æ¸…å†…å®¹</p>
<p><img src="/assets/935707141-5727ea8e029b8_articlex.jpeg" alt="å›¾ç‰‡æè¿°"></p>
<p>è¿™æ—¶å€™æˆ‘åœ¨æ§åˆ¶å°è¾“å…¥è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p>
<pre><code>document.head.insertAdjacentHTML('afterbegin','&lt;meta name=&quot;viewport&quot; content=&quot;width=320&quot;&gt;');
</code></pre>
<p><img src="/assets/678236219-5727eab2547f7_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>è¿™æ—¶å€™æ˜¯ä¸æ˜¯æ¸…æ™°å¾ˆå¤šå‘¢~ã€‚</p>
<p>çŸ¥é“äº†è¿™ä¸ªåŸç†ï¼Œé‚£æˆ‘ä»¬è¦æŠŠ viewport çš„å¤§å°ç¼©å°åˆ°å¤šå°æ¯”è¾ƒåˆé€‚å‘¢ ï¼Ÿç­”æ¡ˆæ˜¯å’Œä½ çš„è®¾å¤‡å®½åº¦ä¸€æ ·å®½ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯æ¯ä¸ªæ‰‹æŒè®¾å¤‡éƒ½æ˜¯ 320dpx å®½å•Šï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ viewport å¤´ï¼š</p>
<pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;
</code></pre>
<p>è¿™æ ·å°±ä¼šè‡ªåŠ¨è®¡ç®—ä½ çš„è®¾å¤‡å®½åº¦äº†ï¼Œæ­¤å¤„åº”è¯¥æœ‰æŒå£°~</p>
<p>ä½†æ˜¯è¿™ä¸ªæ—¶å€™å¹¶æœªç»“æŸï¼Œæ˜¯çš„ ï¼Œå½“ä½ æŠŠä½ åŸå…ˆçš„ 980 å®½çš„é¡µé¢é‡ç½®æˆäº† 320 å®½ é‚£é¡µé¢å¸ƒå±€å½“ç„¶å°±å‘ç”Ÿå˜åŒ–äº†ï¼Œæƒ¨çš„ï¼Œæ— æ³•å…¥ç›®ï¼Œè¿™æ—¶å€™å°±å¾—è€ƒéªŒå¤§å®¶çš„ css åŠŸåº•äº†ï¼Œå¦‚ä½•é¿å…ä¸åœ¨æ­¤æ–‡ç« è®¨è®ºèŒƒå›´å†…ã€‚</p>
<h2 id="heading">æ‰©å±•æ€è€ƒ</h2>
<ol>
<li>å½“æˆ‘ä»¬åœ¨æ‰‹æŒè®¾å¤‡ä¸Šæ”¾å¤§ç¼©å°é¡µé¢çš„æ—¶å€™ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>
<li>è®¾å¤‡çš„å®½åº¦ä¸åˆ†è¾¨ç‡çš„å…³ç³»ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨åš iphone å›¾çš„æ—¶å€™ 640 ä½†åˆ°äº†é¡µé¢åªèƒ½ä¸º 320ï¼Ÿ</li>
</ol>
<p>è§£é‡Šï¼š</p>
<ol>
<li>
<p>å½“æˆ‘ä»¬åœ¨æ‰‹æŒè®¾å¤‡ä¸Šæ”¾å¤§çš„æ—¶å€™ï¼Œè®¾å¤‡çš„å¤§å°ä¸å˜ï¼ˆåºŸè¯ï¼‰ï¼Œviewport çš„å¤§å°ä¸å˜ï¼Œ html çš„å¤§å°ä¸å˜ï¼Œé‚£å˜çš„æ˜¯ä»€ä¹ˆï¼Ÿ
æˆ‘ä»¬çŸ¥é“å½“æˆ‘ä»¬è®¾ç½®äº† <code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width&quot;&gt;</code> é¡µé¢çš„å®½åº¦æ˜¯ä¸è®¾å¤‡çš„å®½åº¦ä¸€è‡´çš„è¾¾åˆ°1ï¼š1çš„å…³ç³»
å…¶å®å˜å¾—æ˜¯ä½ çš„å¯è§†åŒºåŸŸ ä¹Ÿå°±æ˜¯ ppk å¤§ç¥è¯´çš„ visual viewportï¼ŒæŠ›å¼€ä»–çš„ç†è®ºï¼Œç®€å•çš„ç†è§£å°±æ˜¯ä½ å½“ä½ è§¦å‘æ”¾å¤§çš„æ˜¯ä¸ªåŠ¨ä½œæ—¶ï¼Œé¡µé¢çš„æ¯ä¸€ css px å®½åº¦å¯¹åº”äº†å¤šä¸ªè®¾å¤‡çš„åƒç´ å®½åº¦ï¼ˆè¿™é‡Œæš‚æ—¶ä¸è°ˆåˆ†è¾¨ç‡ï¼‰ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°å…ƒç´ è¢«æ”¾å¤§äº†ï¼Œä½†æ˜¯ç”±äºè®¾å¤‡çš„å®½åº¦æœ‰é™ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°çš„å†…å®¹ä¹Ÿå°±å°‘äº†ï¼Œè€Œ viewport åœ¨æˆ‘ä»¬ä¸€æ—¦è®¾ç½®å¥½åæ²¡æœ‰æ‰‹åŠ¨ä¿®æ”¹çš„è¯æ˜¯ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„åŒ…æ‹¬è¿™é‡Œã€‚
æ•…ç¼©å°å¼•å‘çš„åŸç†ä¸€æ ·ã€‚</p>
</li>
<li>
<p>è®¾å¤‡çš„å®½åº¦çš„ px å’Œåˆ†è¾¨ç‡çš„å…³ç³»ï¼Ÿ
åœ¨æ²¡æœ‰è§†ç½‘è†œå±å¹•å‡ºç°å‰ é™¤äº†äº›é«˜æ¸…å±å¹•å¤–ï¼Œå¤§éƒ¨åˆ†çš„æ‰‹æŒè®¾å¤‡çš„å®½åº¦ä¸åˆ†è¾¨ç‡åƒç´ æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œç›´åˆ°è§†ç½‘è†œå±å¹•çš„å‡ºç°æ‰“ç ´äº†è¿™ä¸ªæ ¼å±€ï¼Œå‡ºç°ä¸€ä¸ªè®¾å¤‡å®½åº¦å¯¹åº” 2 ä¸ªæˆ–å¾ˆå¤šçš„åˆ†è¾¨ç‡åƒç´ ï¼Œå¼•å‘ä»€ä¹ˆç»“æœï¼Ÿå½“ç„¶æ˜¯æ›´æ¸…æ™°äº†ï¼Œå› ä¸ºç”¨äº†æ›´å¤šçš„åƒç´ å»è¡¨è¾¾ç›¸åŒçš„ä¸€ä¸ªè®¾å¤‡å®½åº¦åƒç´ çš„å†…å®¹ã€‚æ›´å¤šç»†èŠ‚æ¢è®¨å¯ä»¥è‡ªè¡Œ <a href="http://www.baidu.com">åº¦å¨˜</a> æ›´å¤šã€‚</p>
</li>
</ol>
<p>äº†è§£äº†è®¾å¤‡å®½åº¦ä¸åˆ†è¾¨ç‡çš„å…³ç³»ä¹‹å è§£é‡Šä¸‹å›¾ç‰‡ä¸åˆ†è¾¨ç‡çš„å…³ç³»ï¼Œé€šå¸¸å›¾ç‰‡çš„åƒç´ æ˜¯ä¸åˆ†è¾¨ç‡å¯¹åº”çš„ï¼Œæ•…è®¾è®¡å¸ˆåœ¨ ps ä¸Šç”¨ 640 åˆ†è¾¨ç‡è®¾è®¡å›¾ç‰‡çš„æ—¶å€™èµ·å§‹ä¹Ÿæ˜¯å¯¹åº”æˆ‘ä»¬çš„è®¾å¤‡å®½åº¦ 320ï¼ˆå‰é¢è§£é‡Šåˆ°è§†ç½‘è†œå±å¹•ä¸€ä¸ªè®¾å¤‡åƒç´ ä¼šå¯¹åº” 2 ä¸ªåˆ°å¤šä¸ªåˆ†è¾¨ç‡åƒç´ ï¼‰ï¼Œè®¾è®¡å‡ºæ¥çš„å›¾ç‰‡åŒç†ã€‚å½“ç„¶ä½ æŠŠè®¾è®¡å‡ºæ¥çš„ 640 åˆ†è¾¨ç‡åƒç´ çš„å›¾ç‰‡æ”¾åœ¨ä¸€æ ·æ˜¯ 320 å®½åº¦åƒç´ ä¸‹çš„è§†ç½‘è†œè®¾å¤‡å’Œéè§†ç½‘è†œè®¾å¤‡ä¸‹çš„æ•ˆæœçœ‹èµ·æ¥å·®ä¸å¤šå…¶å®ä»”ç»†çœ‹è¿˜æ˜¯æœ‰å·®åˆ«çš„å³æ˜¯å¦æ›´é«˜æ¸…çš„å·®åˆ«ï¼ˆå¯ä»¥æ‹¿å®‰å“å’Œ ioså¯¹æ¯”ï¼‰ã€‚</p>
<p>å¼„æ¸…æ¥šäº† viewport è¿™ä¸ªå°å·¨äººåæˆ‘ä»¬è¿˜å¾—çŸ¥é“å¦‚ä½•é€šè¿‡ js ä»£ç æ¥è·å–è®¾å¤‡çš„å®½åº¦ã€viewport çš„å®½åº¦ä»¥åŠ html æ–‡æ¡£çš„å®½åº¦</p>
<p>æ€»ç»“å¦‚ä¸‹ï¼ˆä¸åŒ…æ‹¬ IE åŠå…¶ä»–ç‰¹æ®Šæƒ…å†µï¼‰ï¼š</p>
<pre><code>/*
*1.è·å–åŒ…å«æ»šåŠ¨æ¡å°ºå¯¸çš„æµè§ˆå™¨å®Œæ•´å†…éƒ¨å°ºå¯¸
*2.è·å–ç”¨æˆ·å®é™…çš„çœ‹åˆ°çš„è§†å£å¤§å°ï¼ˆå³å‘é€ç¼©æ”¾åçš„å¯è§†åŒºåŸŸå¤§å° visual viewport å¤§å°ï¼‰é»˜è®¤ç­‰äº viewport å¤§å°
*/
window.innerHeight
window.innerWidth 

/*
*1.è®¾ç½®çš„viewportå¤§å°
*/
document.documentElement.clientHeight
document.documentElement.clientWidth

/*
*1.HTML æ–‡æ¡£å¤§å°
*/
document.documentElement.offsetHeight
document.documentElement.offsetWidth

/*
*1.è®¾å¤‡å¤§å°
*/
screen.Height
screen.width
</code></pre>
<p>ç½‘ä¸Šæœ‰å¤§é‡çš„å…³äº viewport çš„è®¨è®ºï¼Œä¸ä¹å„ç§å¤§ç¥çš„è®²è§£ï¼Œå„æœ‰åƒç§‹ã€‚
ä»¥ä¸Šåªä¸ºä¸ªäººå¤šæ—¥æŸ¥é˜…å®è·µåŠæ€»ç»“ï¼Œä»…ä½œå‚è€ƒï¼
å¤šè°¢ï¼</p>
]]></content>
		</item>
		
		<item>
			<title>[CSS] æµ…è°ˆ CSS æ¸…é™¤æµ®åŠ¨çš„ 6 ç§æ–¹æ³•</title>
			<link>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-css-%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8%E7%9A%84-6-%E7%A7%8D%E6%96%B9%E6%B3%95/</link>
			<pubDate>Sun, 01 Nov 2015 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-css-%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8%E7%9A%84-6-%E7%A7%8D%E6%96%B9%E6%B3%95/</guid>
			<description>æ‘˜è¦  é¢å¤–æ ‡ç­¾æ³• ä½¿ç”¨:after ä¼ªå…ƒç´  ç»™çˆ¶å…ƒç´ å®šé«˜ åˆ©ç”¨overflow:hidden;å±æ€§ çˆ¶å…ƒç´ æµ®åŠ¨ çˆ¶å…ƒç´ å¤„äºç»å¯¹å®šä½  åœ¨å¼€å‘ç½‘é¡µçš„æ—¶å€™ç»å¸¸éœ€è¦ç”¨åˆ°å„ç§æµ®åŠ¨ï¼Œæ­¤æ—¶ä¾¿éœ€è¦åŠæ—¶çš„æ¸…é™¤æµ®åŠ¨ï¼Œå¦åˆ™å°†ä¼šå¯¼è‡´å¸ƒå±€å‡ºç°é—®é¢˜
å¼•å‡ºé—®é¢˜ï¼š
&amp;lt;!DOCTYPE html&amp;gt; &amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta charset=&amp;quot;UTF-8&amp;quot;&amp;gt; &amp;lt;title&amp;gt;&amp;lt;/title&amp;gt; &amp;lt;style&amp;gt; .outer{ border: 1px solid black; width:300px; } .inner{ width: 50px; height: 50px; background-color: #ff4400; margin-right: 20px; float: left; } .footer{ background-color: #005FC3; width: 200px; height: 100px; } &amp;lt;/style&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;div class=&amp;quot;outer&amp;quot;&amp;gt; &amp;lt;div class=&amp;quot;inner&amp;quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div class=&amp;quot;inner&amp;quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;div class=&amp;quot;inner&amp;quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/div&amp;gt; &amp;lt;div class=&amp;quot;footer&amp;quot;&amp;gt;&amp;lt;/div&amp;gt; &amp;lt;/body&amp;gt; &amp;lt;/html&amp;gt; å¯ä»¥çœ‹å‡ºæœ¬åº”åŒ…ä½3ä¸ª inner DIVçš„ outer DIV å´æ²¡æœ‰åŒ…ä½ä»–ä»¬ï¼Œæ­¤åˆ»åªå‰©ä¸€æ¡ç”±ä¸Šä¸‹è¾¹æ¡†è´´åˆç»„æˆçš„çº¿ï¼ŒåŒæ—¶ footer DIVå…ƒç´ ä¹Ÿè·‘åˆ°äº†ä¸‰ä¸ªæµ®åŠ¨å…ƒç´ çš„åº•ä¸‹</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ol>
<li>é¢å¤–æ ‡ç­¾æ³•</li>
<li>ä½¿ç”¨:after ä¼ªå…ƒç´ </li>
<li>ç»™çˆ¶å…ƒç´ å®šé«˜</li>
<li>åˆ©ç”¨overflow:hidden;å±æ€§</li>
<li>çˆ¶å…ƒç´ æµ®åŠ¨</li>
<li>çˆ¶å…ƒç´ å¤„äºç»å¯¹å®šä½</li>
</ol>
<p>åœ¨å¼€å‘ç½‘é¡µçš„æ—¶å€™ç»å¸¸éœ€è¦ç”¨åˆ°å„ç§æµ®åŠ¨ï¼Œæ­¤æ—¶ä¾¿éœ€è¦åŠæ—¶çš„æ¸…é™¤æµ®åŠ¨ï¼Œå¦åˆ™å°†ä¼šå¯¼è‡´å¸ƒå±€å‡ºç°é—®é¢˜</p>
<p>å¼•å‡ºé—®é¢˜ï¼š</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width:300px;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/2260342482-5635c8e886237_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹å‡ºæœ¬åº”åŒ…ä½3ä¸ª inner DIVçš„ outer DIV å´æ²¡æœ‰åŒ…ä½ä»–ä»¬ï¼Œæ­¤åˆ»åªå‰©ä¸€æ¡ç”±ä¸Šä¸‹è¾¹æ¡†è´´åˆç»„æˆçš„çº¿ï¼ŒåŒæ—¶ footer DIVå…ƒç´ ä¹Ÿè·‘åˆ°äº†ä¸‰ä¸ªæµ®åŠ¨å…ƒç´ çš„åº•ä¸‹</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<h3 id="1-">1. ä½¿ç”¨é¢å¤–æ ‡ç­¾æ³•</h3>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
        .clearfix{
            clear: both;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/77786389-5635c8f718208_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>è¿™æ˜¯æ—©æœŸæ™®éä½¿ç”¨çš„æ–¹æ³•ï¼Œä½†æ˜¯å¯¹äºæœ‰ä»£ç æ´ç™–çš„äººæ¥è¯´ï¼Œè§£å†³çš„ä¸å¤Ÿå®Œç¾</p>
<h3 id="2--after-">2. ä½¿ç”¨ :after ä¸ºå…ƒç´ </h3>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
        .clearfix:after{  /*æœ€ç®€æ–¹å¼*/
            content: '';
            display: block;
            clear: both;
        }
        /* æ–°æµªä½¿ç”¨æ–¹å¼
        .clearfix:after{ 
            content: '';
            display: block;
            clear: both;
            height: 0;
            visibility: hidden;
        }
        */
        .clearfix{ /*å…¼å®¹ IE*/
            zoom: 1;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer clearfix&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/77786389-5635c8f718208_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h3 id="3-">3. ç»™çˆ¶å…ƒç´ å®šé«˜</h3>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
            height: 50px;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/77786389-5635c8f718208_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h3 id="4--overflowhidden-">4. åˆ©ç”¨ overflow:hidden å±æ€§</h3>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
            overflow: hidden;
            zoom: 1;/*å…¼å®¹ IE*/
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/77786389-5635c8f718208_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h3 id="5-">5. çˆ¶å…ƒç´ æµ®åŠ¨</h3>
<p>å½“çˆ¶å…ƒç´ æµ®åŠ¨çš„æ—¶å€™ï¼Œæ— éœ€ä¸ºå­å…ƒç´ çš„æµ®åŠ¨æ¸…é™¤æµ®åŠ¨,å¸ƒå±€æ—¶ç»å¸¸ç”¨åˆ°</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
            float: left;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/371411215-5635cbf5dabfb_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹å‡ºè™½ç„¶ outer DIV æ¶ˆé™¤äº†å¡Œé™·ç°è±¡ï¼Œä½†ç”±äºå…¶ä¹Ÿå‘ç”Ÿäº†æµ®åŠ¨æ•…ï¼Œå…¶åå…ƒç´ è‹¥å¤„äºæ­£å¸¸æ–‡æ¡£æµï¼Œä¼šè¢«è·Œåœ¨åº•ä¸‹ã€‚</p>
<p>å¦‚æœè¦è§£å†³å¯ä»¥å‚è€ƒå‰é¢çš„åŠæ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
            float: left;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
        .clearfix:after{
            content: &quot;&quot;;
            display: block;
            clear: both;
        }
        .clearfix{
            zoom: 1;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/77786389-5635c8f718208_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h3 id="6-">6. çˆ¶å…ƒç´ å¤„äºç»å¯¹å®šä½</h3>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;&lt;/title&gt;
    &lt;style&gt;
        .outer{
            border: 1px solid black;
            width: 300px;
            position: absolute;
        }
        .inner{
            width: 50px;
            height: 50px;
            background-color: #ff4400;
            margin-right: 20px;
            float: left;
        }
        .footer{
            background-color: #005FC3;
            width: 200px;
            height: 100px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;outer&quot;&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
        &lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
    &lt;div class=&quot;footer&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><img src="/assets/371411215-5635cbf5dabfb_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>ä¸ä¸Šä¸€ä¸ªæ–¹æ³•åŒç†ï¼Œç”±äºç»å¯¹å®šä½å·²è„±ç¦»æ­£å¸¸æ–‡æ¡£æµï¼Œæ•…å‡ºç°ç›¸åŒæƒ…å†µï¼Œè§£å†³åŠæ³•ä¾æ—§å¯ä»¥ä½¿ç”¨ä»¥ä¸ŠåŠæ³•ç»“åˆï¼Œçµæ´»å¤šå˜ã€‚</p>
]]></content>
		</item>
		
		<item>
			<title> [JS] æµ…è°ˆ JS å¯¹è±¡æ·»åŠ  getterä¸ setter çš„5ç§æ–¹æ³•ä»¥åŠå¦‚ä½•è®©å¯¹è±¡å±æ€§ä¸å¯é…ç½®æˆ–æšä¸¾</title>
			<link>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-js-%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0-getter%E4%B8%8E-setter-%E7%9A%845%E7%A7%8D%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E4%B8%8D%E5%8F%AF%E9%85%8D%E7%BD%AE%E6%88%96%E6%9E%9A%E4%B8%BE/</link>
			<pubDate>Thu, 22 Oct 2015 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-js-%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0-getter%E4%B8%8E-setter-%E7%9A%845%E7%A7%8D%E6%96%B9%E6%B3%95%E4%BB%A5%E5%8F%8A%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E4%B8%8D%E5%8F%AF%E9%85%8D%E7%BD%AE%E6%88%96%E6%9E%9A%E4%B8%BE/</guid>
			<description>æ‘˜è¦  å®šä¹‰ getter ä¸ setter  é€šè¿‡å¯¹è±¡åˆå§‹åŒ–å™¨å®šä¹‰ ä½¿ç”¨ Object.create æ–¹æ³• ä½¿ç”¨ Object.defineProperty æ–¹æ³• ä½¿ç”¨ Object.defineProperties æ–¹æ³• ä½¿ç”¨ Object.prototype.defineGetter ä»¥åŠ Object.prototype.defineSetter æ–¹æ³•   ä»€ä¹ˆæ˜¯å±æ€§æè¿°ç¬¦ åˆ›å»ºå±æ€§ä¸å¯é…ç½®ä¸å¯æšä¸¾çš„å¯¹è±¡ Enumerable ç‰¹æ€§ Configurable ç‰¹æ–° æé«˜åŠæ‰©å±•  å®šä¹‰ getter ä¸ setter  é€šè¿‡å¯¹è±¡åˆå§‹åŒ–å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æŒ‡æ˜ï¼ˆä¹Ÿå¯ä»¥ç§°ä¸ºé€šè¿‡å­—é¢å€¼åˆ›å»ºå¯¹è±¡æ—¶å£°æ˜ï¼‰  (function () { var o = { a : 7, get b(){return this.a +1;},//é€šè¿‡ get,setçš„ b,cæ–¹æ³•é—´æ¥æ€§ä¿®æ”¹ a å±æ€§  set c(x){this.a = x/2} }; console.log(o.a); console.log(o.b); o.c = 50; console.log(o.a); })(); åœ¨ chrome ä¸­è°ƒè¯•è§†å›¾å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°å¯¹è±¡ä¸‹å¤šäº† get å±æ€§ä»¥åŠ set å±æ€§ è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š å½“ç„¶ get è¯­å¥ä¸ set è¯­å¥å¯ä»¥å£°æ˜å¤šæ¬¡ç”¨æ¥å¯¹åº”å¤šä¸ª getter å’Œ setter ä½¿ç”¨è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨å£°æ˜å±æ€§çš„æ—¶å€™åŒæ—¶å£°æ˜å¯¹åº”çš„ getter å’Œ setter è¿™é‡Œå°±æœ‰äººé—®äº†ï¼Œèƒ½ä¸èƒ½å°†o å¯¹è±¡çš„ get åŠ set æ–¹æ³•çš„æ–¹æ³•åéƒ½æ”¹æˆ â€œaâ€,è¿™æ ·å°±å¯ä»¥ç›´æ¥é€šè¿‡â€œ.</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ol>
<li>å®šä¹‰ getter ä¸ setter
<ul>
<li>é€šè¿‡å¯¹è±¡åˆå§‹åŒ–å™¨å®šä¹‰</li>
<li>ä½¿ç”¨ Object.create æ–¹æ³•</li>
<li>ä½¿ç”¨ Object.defineProperty æ–¹æ³•</li>
<li>ä½¿ç”¨ Object.defineProperties æ–¹æ³•</li>
<li>ä½¿ç”¨ Object.prototype.<strong>defineGetter</strong> ä»¥åŠ Object.prototype.<strong>defineSetter</strong> æ–¹æ³•</li>
</ul>
</li>
<li>ä»€ä¹ˆæ˜¯å±æ€§æè¿°ç¬¦</li>
<li>åˆ›å»ºå±æ€§ä¸å¯é…ç½®ä¸å¯æšä¸¾çš„å¯¹è±¡</li>
<li>Enumerable ç‰¹æ€§</li>
<li>Configurable ç‰¹æ–°</li>
<li>æé«˜åŠæ‰©å±•</li>
</ol>
<h2 id="-getter--setter"><strong>å®šä¹‰ getter ä¸ setter</strong></h2>
<ol>
<li>é€šè¿‡å¯¹è±¡åˆå§‹åŒ–å™¨åœ¨åˆ›å»ºå¯¹è±¡çš„æ—¶å€™æŒ‡æ˜ï¼ˆä¹Ÿå¯ä»¥ç§°ä¸ºé€šè¿‡å­—é¢å€¼åˆ›å»ºå¯¹è±¡æ—¶å£°æ˜ï¼‰</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="nx">get</span> <span class="nx">b</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="p">}</span><span class="p">,</span><span class="c1">//é€šè¿‡ get,setçš„ b,cæ–¹æ³•é—´æ¥æ€§ä¿®æ”¹ a å±æ€§
</span><span class="c1"></span>        <span class="nx">set</span> <span class="nx">c</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">x</span><span class="o">/</span><span class="mi">2</span><span class="p">}</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>åœ¨ chrome ä¸­è°ƒè¯•è§†å›¾å¦‚ä¸‹ï¼š
<img src="/assets/3879098324-56258ea314d0b_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°å¯¹è±¡ä¸‹å¤šäº† <code>get</code> å±æ€§ä»¥åŠ <code>set</code> å±æ€§
è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img src="/assets/1446235180-56258f5aee1fd_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å½“ç„¶ <code>get</code> è¯­å¥ä¸ <code>set</code> è¯­å¥å¯ä»¥å£°æ˜å¤šæ¬¡ç”¨æ¥å¯¹åº”å¤šä¸ª <code>getter</code> å’Œ <code>setter</code>
ä½¿ç”¨è¿™ç§æ–¹æ³•çš„å¥½å¤„æ˜¯å¯ä»¥åœ¨å£°æ˜å±æ€§çš„æ—¶å€™åŒæ—¶å£°æ˜å¯¹åº”çš„ <code>getter</code> å’Œ <code>setter</code>
è¿™é‡Œå°±æœ‰äººé—®äº†ï¼Œèƒ½ä¸èƒ½å°†o å¯¹è±¡çš„ <code>get</code> åŠ <code>set</code> æ–¹æ³•çš„æ–¹æ³•åéƒ½æ”¹æˆ â€œaâ€,è¿™æ ·å°±å¯ä»¥ç›´æ¥é€šè¿‡â€œ.â€æ¥è®¿é—®æ–¹æ³•ç›´æ¥æ“ä½œ</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="nx">get</span> <span class="nx">a</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="p">}</span><span class="p">,</span><span class="c1">//æ­»å¾ªç¯
</span><span class="c1"></span>        <span class="nx">set</span> <span class="nx">a</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">x</span><span class="o">/</span><span class="mi">2</span><span class="p">}</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>æ‰“å¼€ chrome æŸ¥çœ‹åˆ›å»ºåçš„è§†å›¾å¦‚ä¸‹ï¼š
<img src="/assets/2869058813-56259df6074c6_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ—¶å€™çš„ <code>get</code> ä¸ <code>set</code> æ–¹æ³•å·²ç»å’Œä¸Šé¢ä¸åŒï¼Œä½†æ˜¯æ˜¯å¦çœŸçš„èƒ½èµ·ä½œç”¨å‘¢ï¼Œç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå½“æˆ‘ä»¬é€šè¿‡ <code>o.a</code> è°ƒç”¨çš„æ˜¯ <code>get</code>è¯­å¥ å£°æ˜çš„ aæ–¹æ³•ï¼Œè¿›å…¥åˆ°è¯¥æ–¹æ³•åé‡åˆ° <code>this.a</code> æ–¹æ³•ç»§ç»­è°ƒç”¨è¯¥æ–¹æ³•å½¢æˆæ­»å¾ªç¯æœ€ç»ˆå¯¼è‡´æ­»å¾ªç¯æŠ¥å†…å­˜æº¢å‡ºé”™è¯¯ã€‚</p>
<p>æ–°è¯­æ³•(ES6)ï¼šæš‚æ—¶åªæœ‰ firefox æ”¯æŒï¼Œå…¶ä»–æµè§ˆå™¨ä¼šæŠ¥é”™</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="s2">&#34;bb&#34;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="s2">&#34;cc&#34;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="nx">get</span> <span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="p">}</span><span class="p">,</span>
        <span class="nx">set</span> <span class="p">[</span><span class="nx">c</span><span class="p">]</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">x</span><span class="o">/</span><span class="mi">2</span><span class="p">}</span><span class="p">,</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">[</span><span class="nx">b</span><span class="p">]</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">[</span><span class="s2">&#34;cc&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>æ‰“å¼€ firefox æŸ¥çœ‹è°ƒè¯•ï¼š
<img src="/assets/931710743-5625b96cc1690_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img src="/assets/1770225854-5625b9869b848_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<ol start="2">
<li>ä½¿ç”¨ <code>Object.create</code> æ–¹æ³•</li>
</ol>
<p>å¼•ç”¨ MDNï¼š
æ¦‚è¿°
Object.create() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰æŒ‡å®šåŸå‹å’Œè‹¥å¹²ä¸ªæŒ‡å®šå±æ€§çš„å¯¹è±¡ã€‚</p>
<pre><code>è¯­æ³•
    Object.create(proto, [ propertiesObject ])
</code></pre>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ä½¿ç”¨ <code>Object.create</code> æ–¹æ³•ä¼ é€’ä¸€ä¸ªå‚æ•°çš„æ—¶å€™å¯ä»¥åˆ›å»ºä¸€ä¸ªä»¥è¯¥å‚æ•°ä¸ºåŸå‹çš„å¯¹è±¡ <a href="../%E6%B5%85%E8%B0%88-js-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84-8-%E7%A7%8D%E6%A8%A1%E5%BC%8F">æµ…è°ˆ JS åˆ›å»ºå¯¹è±¡çš„ 8 ç§æ¨¡å¼</a>
ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰é¡¹ï¼Œæ˜¯ä¸€ä¸ªåŒ¿åçš„å‚æ•°å¯¹è±¡ï¼Œè¯¥å‚æ•°å¯¹è±¡æ˜¯ä¸€ç»„å±æ€§ä¸å€¼ï¼Œè¯¥å¯¹è±¡çš„å±æ€§åç§°å°†æ˜¯æ–°åˆ›å»ºçš„å¯¹è±¡çš„å±æ€§åç§°ï¼Œå€¼æ˜¯å±æ€§æè¿°ç¬¦ï¼ˆåŒ…æ‰©æ•°æ®æè¿°ç¬¦æˆ–å­˜å–æè¿°ç¬¦ï¼Œå…·ä½“è§£é‡Šçœ‹åé¢çš„å†…å®¹ ä»€ä¹ˆæ˜¯å±æ€§æè¿°ç¬¦ï¼‰ã€‚
é€šè¿‡å±æ€§æè¿°ç¬¦æˆ‘ä»¬å¯ä»¥å®ç°ä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡æ·»åŠ  <code>get</code> æ–¹æ³•ä»¥åŠ <code>set</code> æ–¹æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="c1">//æŒ‡å®šåŸå‹ä¸º Object.prototype
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="nx">bar</span><span class="o">:</span><span class="p">{</span>
                    <span class="nx">get</span> <span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
                        <span class="k">return</span> <span class="mi">10</span><span class="p">;</span>
                    <span class="p">}</span><span class="p">,</span>
                    <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Setting `o.bar` to &#34;</span><span class="p">,</span><span class="nx">val</span><span class="p">)</span><span class="p">;</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="c1">//ç¬¬äºŒä¸ªå‚æ•°
</span><span class="c1"></span>        <span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">bar</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">bar</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>åœ¨ chrome ä¸­è°ƒè¯•è¯•å›¾å¦‚ä¸‹ï¼š
<img src="/assets/3405566115-56259b01abddd_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°æ–°åˆ›å»ºå¯¹è±¡é€šç”¨å¤šäº† <code>get</code> ä»¥åŠ <code>set</code> å±æ€§
è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img src="/assets/3935310264-56259b7525251_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­å¹¶æ²¡æœ‰ç”¨æ¥é’ˆå¯¹çš„ get æ–¹æ³•ä»¥åŠ set æ–¹æ³•ä½¿ç”¨çš„å±æ€§</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span><span class="c1">//æŒ‡å®šåŸå‹ä¸º Object.prototype
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="nx">bar</span><span class="o">:</span><span class="p">{</span>
                    <span class="nx">get</span> <span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
                    <span class="p">}</span><span class="p">,</span>
                    <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Setting `o.bar` to &#34;</span><span class="p">,</span><span class="nx">val</span><span class="p">)</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
                    <span class="p">}</span><span class="p">,</span>
                    <span class="nx">configurable</span> <span class="o">:</span><span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="c1">//ç¬¬äºŒä¸ªå‚æ•°
</span><span class="c1"></span>        <span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">bar</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">bar</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">bar</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>äº¦æˆ–ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">10</span><span class="p">}</span><span class="p">;</span>
    <span class="nx">o</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="c1">//æŒ‡å®šåŸå‹ä¸º o è¿™é‡Œå®é™…å¯ä»¥ç†è§£ä¸ºç»§æ‰¿
</span><span class="c1"></span>            <span class="p">{</span>
                <span class="nx">bar</span><span class="o">:</span><span class="p">{</span>
                    <span class="nx">get</span> <span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
                        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
                    <span class="p">}</span><span class="p">,</span>
                    <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
                        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;Setting `o.bar` to &#34;</span><span class="p">,</span><span class="nx">val</span><span class="p">)</span><span class="p">;</span>
                        <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
                    <span class="p">}</span><span class="p">,</span>
                    <span class="nx">configurable</span> <span class="o">:</span><span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">}</span><span class="c1">//ç¬¬äºŒä¸ªå‚æ•°
</span><span class="c1"></span>        <span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">bar</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">bar</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">bar</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img src="/assets/236531464-5625b44234a35_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>ä½¿ç”¨è¿™ç§æ–¹å¼çš„å¥½å¤„æ˜¯å¯é…ç½®æ€§é«˜ï¼Œä½†åˆå­¦è€…å®¹æ˜“è¿·ç³Šã€‚</p>
<ol start="3">
<li>ä½¿ç”¨ <code>Object.defineProperty</code> æ–¹æ³•</li>
</ol>
<p>å¼•ç”¨ MDNï¼š</p>
<pre><code>æ¦‚è¦
    Object.defineProperty() æ–¹æ³•ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å±æ€§ï¼Œ å¹¶è¿”å›è¿™ä¸ªå¯¹è±¡ã€‚
è¯­æ³•
    Object.defineProperty(obj, prop, descriptor)
å‚æ•°
    obj
        éœ€è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚
    prop
        éœ€è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§åã€‚
    descriptor
        éœ€è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„æè¿°ç¬¦ã€‚
</code></pre>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">a</span> <span class="o">:</span> <span class="mi">1</span><span class="p">}</span><span class="c1">//å£°æ˜ä¸€ä¸ªå¯¹è±¡,åŒ…å«ä¸€ä¸ª a å±æ€§,å€¼ä¸º1
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;b&#34;</span><span class="p">,</span><span class="p">{</span>
        <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
        <span class="p">}</span><span class="p">,</span>
        <span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
        <span class="p">}</span><span class="p">,</span>
        <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">true</span>
    <span class="p">}</span><span class="p">)</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¿™ä¸ªæ–¹æ³•ä¸å‰é¢ä¸¤ç§çš„åŒºåˆ«æ˜¯ï¼šä½¿ç”¨å‰é¢ä¸¤ç§åªèƒ½åœ¨å£°æ˜å®šä¹‰çš„æ—¶å€™æŒ‡å®š <code>getter</code> ä¸ <code>setter</code>ï¼Œä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥éšæ—¶çš„æ·»åŠ æˆ–ä¿®æ”¹ã€‚</p>
<p>å¦‚æœè¯´éœ€è¦ä¸€æ¬¡æ€§æ‰¹é‡æ·»åŠ  getter ä¸ setter ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<ol start="4">
<li>ä½¿ç”¨ <code>Object.defineProperties</code>æ–¹æ³•</li>
</ol>
<p>MDNï¼š</p>
<pre><code>æ¦‚è¿°
    Object.defineProperties() æ–¹æ³•åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šæ·»åŠ æˆ–ä¿®æ”¹ä¸€ä¸ªæˆ–è€…å¤šä¸ªè‡ªæœ‰å±æ€§ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ã€‚
è¯­æ³•
    Object.defineProperties(obj, props)
å‚æ•°
    obj
    å°†è¦è¢«æ·»åŠ å±æ€§æˆ–ä¿®æ”¹å±æ€§çš„å¯¹è±¡
    props
    è¯¥å¯¹è±¡çš„ä¸€ä¸ªæˆ–å¤šä¸ªé”®å€¼å¯¹å®šä¹‰äº†å°†è¦ä¸ºå¯¹è±¡æ·»åŠ æˆ–ä¿®æ”¹çš„å±æ€§çš„å…·ä½“é…ç½®
</code></pre>
<p>ä¸éš¾çœ‹å‡ºç”¨æ³•ä¸ <code>Object.defineProperty</code> æ–¹æ³•ç±»ä¼¼</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">b</span><span class="o">:</span><span class="s2">&#34;string&#34;</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="p">{</span>
        <span class="s2">&#34;A&#34;</span><span class="o">:</span><span class="p">{</span>
            <span class="nx">get</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="p">}</span><span class="p">,</span>
            <span class="nx">set</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span><span class="p">}</span>
        <span class="p">}</span><span class="p">,</span>
        <span class="s2">&#34;B&#34;</span><span class="o">:</span><span class="p">{</span>
            <span class="nx">get</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="o">+</span><span class="mi">2</span><span class="p">;</span><span class="p">}</span><span class="p">,</span>
            <span class="nx">set</span><span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">val</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">A</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">B</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">A</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">.</span><span class="nx">B</span> <span class="o">=</span> <span class="s2">&#34;hello&#34;</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">A</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">B</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img src="/assets/3452679094-5625e23471227_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<ol start="5">
<li>ä½¿ç”¨ <code>Object.prototype.__defineGetter__</code> ä»¥åŠ <code>Object.prototype.__defineSetter__</code> æ–¹æ³•</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span><span class="mi">1</span><span class="p">}</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">__defineGetter__</span><span class="p">(</span><span class="s2">&#34;giveMeA&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
    <span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">__defineSetter__</span><span class="p">(</span><span class="s2">&#34;setMeNew&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">a</span>  <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
    <span class="p">}</span><span class="p">)</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">giveMeA</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">setMeNew</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">giveMeA</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="nx">è¾“å‡ºç»“æœä¸º1å’Œ2</span>
</code></pre></div><p>æŸ¥çœ‹ MDN æœ‰å¦‚ä¸‹è¯´æ˜ï¼š
<img src="/assets/3252288910-5625e443f1e7d_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h2 id="heading1"><strong>ä»€ä¹ˆæ˜¯å±æ€§æè¿°ç¬¦</strong></h2>
<p>MDNï¼š</p>
<pre><code>å¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼šæ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ã€‚

1. æ•°æ®æè¿°ç¬¦æ˜¯ä¸€ä¸ªæ‹¥æœ‰å¯å†™æˆ–ä¸å¯å†™å€¼çš„å±æ€§ã€‚
2. å­˜å–æè¿°ç¬¦æ˜¯ç”±ä¸€å¯¹ getter-setter å‡½æ•°åŠŸèƒ½æ¥æè¿°çš„å±æ€§ã€‚
3. æè¿°ç¬¦å¿…é¡»æ˜¯ä¸¤ç§å½¢å¼ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…ã€‚
</code></pre>
<p>æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦å‡å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼ï¼š</p>
<pre><code>configurable
    å½“ä¸”ä»…å½“è¿™ä¸ªå±æ€§æè¿°ç¬¦å€¼ä¸º true æ—¶ï¼Œè¯¥å±æ€§å¯èƒ½ä¼šæ”¹å˜ï¼Œä¹Ÿå¯èƒ½ä¼šè¢«ä»ç›¸åº”çš„å¯¹è±¡åˆ é™¤ã€‚é»˜è®¤ä¸º falseã€‚
enumerable  
    true å½“ä¸”ä»…å½“è¯¥å±æ€§å‡ºç°åœ¨ç›¸åº”çš„å¯¹è±¡æšä¸¾å±æ€§ä¸­ã€‚é»˜è®¤ä¸º falseã€‚
</code></pre>
<p>æ•°æ®æè¿°ç¬¦åŒæ—¶å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼ï¼š</p>
<pre><code>value 
    ä¸å±æ€§ç›¸å…³çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JavaScript å€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚é»˜è®¤ä¸º undefinedã€‚
writable 
    true å½“ä¸”ä»…å½“å¯èƒ½ç”¨ èµ‹å€¼è¿ç®—ç¬¦ æ”¹å˜ä¸å±æ€§ç›¸å…³çš„å€¼ã€‚é»˜è®¤ä¸º falseã€‚
</code></pre>
<p>å­˜å–æè¿°ç¬¦åŒæ—¶å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼ï¼š</p>
<pre><code>get 
    ä¸€ä¸ªç»™å±æ€§æä¾› getter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ getter åˆ™ä¸º undefinedã€‚æ–¹æ³•å°†è¿”å›ç”¨ä½œå±æ€§çš„å€¼ã€‚é»˜è®¤ä¸º undefinedã€‚
set
    ä¸€ä¸ªç»™å±æ€§æä¾› setter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚è¯¥æ–¹æ³•å°†æ”¶åˆ°ä½œä¸ºå”¯ä¸€å‚æ•°çš„æ–°å€¼åˆ†é…ç»™å±æ€§ã€‚é»˜è®¤ä¸º undefinedã€‚
</code></pre>
<p>ä»¥ä¸Šæ˜¯æ‘˜è‡ªMDNçš„è§£é‡Šï¼Œçœ‹èµ·æ¥æ˜¯å¾ˆæ™¦æ¶©çš„ï¼Œå…·ä½“ä»€ä¹ˆæ„æ€å‘¢ï¼š</p>
<p>é¦–å…ˆæˆ‘ä»¬ä»ä»¥ä¸Šè§£é‡ŠçŸ¥é“è¯¥åŒ¿åå‚æ•°å¯¹è±¡æœ‰ä¸ªå¾ˆå¥½å¬çš„åå­—å«å±æ€§æè¿°ç¬¦ï¼Œå±æ€§æè¿°ç¬¦åˆåˆ†æˆä¸¤å¤§å—ï¼šæ•°æ®æè¿°ç¬¦ä»¥åŠå­˜å–æè¿°ç¬¦ï¼ˆå…¶å®åªæ˜¯ä¸€ä¸ªå¤–å·ï¼Œç»™æŒ‡å®šçš„å±æ€§é›†åˆèµ·ä¸ªå¤–å·ï¼‰ã€‚</p>
<p>æ•°æ®æè¿°ç¬¦åŒ…æ‹¬ä¸¤ä¸ªå±æ€§ : <code>value</code> å±æ€§ä»¥åŠ <code>writable</code> å±æ€§ï¼Œç¬¬ä¸€ä¸ªå±æ€§ç”¨æ¥å£°æ˜å½“å‰æ¬²ä¿®é¥°çš„å±æ€§çš„å€¼ï¼Œç¬¬äºŒä¸ªå±æ€§ç”¨æ¥å£°æ˜å½“å‰å¯¹è±¡æ˜¯å¦å¯å†™å³æ˜¯å¦å¯ä»¥ä¿®æ”¹</p>
<p>å­˜å–æè¿°ç¬¦å°±åŒ…æ‹¬ <code>get</code> ä¸ <code>set</code> å±æ€§ç”¨æ¥å£°æ˜æ¬²ä¿®é¥°çš„è±¡å±æ€§çš„ <code>getter</code> åŠ <code>setter</code></p>
<p>å±æ€§æè¿°ç¬¦å†…éƒ¨ï¼Œæ•°æ®æè¿°ç¬¦ä¸å­˜å–æè¿°ç¬¦åªèƒ½å­˜åœ¨å…¶ä¸­ä¹‹ä¸€ï¼Œä½†æ˜¯ä¸è®ºä½¿ç”¨å“ªä¸ªæè¿°ç¬¦éƒ½å¯ä»¥åŒæ—¶è®¾ç½® <code>configurable</code> å±æ€§ä»¥åŠ<code>enumerable</code> å±æ€§ã€‚
<code>configurable</code>å±æ€§ç”¨æ¥å£°æ˜æ¬²ä¿®é¥°çš„å±æ€§æ˜¯å¦èƒ½å¤Ÿ<code>é…ç½®</code>ï¼Œä»…æœ‰å½“å…¶å€¼ä¸º <code>true</code> æ—¶ï¼Œè¢«ä¿®é¥°çš„å±æ€§æ‰æœ‰å¯èƒ½èƒ½å¤Ÿè¢«åˆ é™¤ï¼Œæˆ–è€…é‡æ–°é…ç½®ã€‚
<code>enumerable</code> å±æ€§ç”¨æ¥å£°æ˜æ¬²ä¿®é¥°å±æ€§æ˜¯å¦å¯ä»¥è¢«<code>æšä¸¾</code>ã€‚</p>
<p>çŸ¥é“äº†ä»€ä¹ˆæ˜¯å±æ€§æè¿°ç¬¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç€æ‰‹åˆ›å»ºä¸€äº›å¯¹è±¡å¹¶å¼€å§‹<code>é…ç½®</code>å…¶å±æ€§</p>
<h2 id="heading2"><strong>åˆ›å»ºå±æ€§ä¸å¯é…ç½®ä¸å¯æšä¸¾çš„å¯¹è±¡</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//ä½¿ç”¨é»˜è®¤å€¼é…ç½®
</span><span class="c1"></span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span><span class="c1">//å£°æ˜ä¸€ä¸ªç©ºå¯¹è±¡
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;key&#34;</span><span class="p">,</span><span class="p">{</span>
        <span class="nx">value</span><span class="o">:</span><span class="s2">&#34;static&#34;</span>
                        <span class="c1">//æ²¡æœ‰è®¾ç½® enumerable ä½¿ç”¨é»˜è®¤å€¼ false
</span><span class="c1"></span>                        <span class="c1">//æ²¡æœ‰ configurable ä½¿ç”¨é»˜è®¤å€¼ false
</span><span class="c1"></span>                        <span class="c1">//æ²¡æœ‰ writable ä½¿ç”¨é»˜è®¤å€¼ false
</span><span class="c1"></span>    <span class="p">}</span><span class="p">)</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span><span class="p">;</span>           <span class="c1">//è¾“å‡º â€œstaticâ€
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="s2">&#34;new&#34;</span>                 <span class="c1">//å°è¯•ä¿®æ”¹å…¶å€¼,ä¿®æ”¹å°†å¤±è´¥,å› ä¸º writable ä¸º false
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">key</span><span class="p">)</span><span class="p">;</span>           <span class="c1">//è¾“å‡º â€œstaticâ€
</span><span class="c1"></span>    <span class="nx">obj</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span><span class="c1">//åŠ¨æ€æ·»åŠ ä¸€ä¸ªå±æ€§
</span><span class="c1"></span>    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span><span class="p">{</span> <span class="c1">//éå†æ‰€æœ‰ obj çš„å¯æšä¸¾å±æ€§
</span><span class="c1"></span>         <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span><span class="c1">//åªè¾“å‡ºä¸€ä¸ª â€œaâ€ å› ä¸º â€œkeyâ€çš„ enumerableä¸º false
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//æ˜¾ç¤ºé…ç½® ç­‰ä»·äºä¸Šé¢
</span><span class="c1"></span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;key&#34;</span><span class="p">,</span><span class="p">{</span>
        <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">writable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nx">value</span> <span class="o">:</span> <span class="s2">&#34;static&#34;</span>
    <span class="p">}</span><span class="p">)</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//ç­‰ä»·é…ç½®
</span><span class="c1"></span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="c1">//ç­‰ä»·äº
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="nx">writable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                                <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">1</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="c1">//ç­‰ä»·äº
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                                <span class="nx">writable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                                <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                                <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><h2 id="enumerable-"><strong>Enumerable ç‰¹æ€§</strong></h2>
<p>å±æ€§ç‰¹æ€§ <code>enumerable</code> å†³å®šå±æ€§æ˜¯å¦èƒ½è¢« <code>for...in</code> å¾ªç¯æˆ– <code>Object.keys</code> æ–¹æ³•éå†å¾—åˆ°</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">1</span><span class="p">,</span><span class="nx">enumerable</span> <span class="o">:</span><span class="kc">true</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;b&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">2</span><span class="p">,</span><span class="nx">enumerable</span> <span class="o">:</span><span class="kc">false</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;c&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span><span class="mi">2</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//enumerable default to false
</span><span class="c1"></span>    <span class="nx">o</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span><span class="c1">//å¦‚æœç›´æ¥èµ‹å€¼çš„æ–¹å¼åˆ›å»ºå¯¹è±¡çš„å±æ€§,åˆ™è¿™ä¸ªå±æ€§çš„ enumerable ä¸º true
</span><span class="c1"></span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">o</span><span class="p">)</span><span class="p">{</span> <span class="c1">//éå†æ‰€æœ‰å¯æšä¸¾å±æ€§åŒ…æ‹¬ç»§æ‰¿çš„å±æ€§
</span><span class="c1"></span>        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">o</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="c1">//è·å– o å¯¹è±¡çš„æ‰€æœ‰å¯éå†å±æ€§ä¸åŒ…æ‹¬ç»§æ‰¿çš„å±æ€§
</span><span class="c1"></span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="c1">//true
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="c1">//false
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">propertyIsEnumerable</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="c1">//false
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
<img src="/assets/1108293644-56261c8bb9eb0_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h2 id="configurable-"><strong>Configurable ç‰¹æ€§</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">get</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span><span class="k">return</span> <span class="mi">1</span><span class="p">;</span><span class="p">}</span><span class="p">,</span>
                                <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">}</span> <span class="p">)</span><span class="p">;</span>
                                <span class="c1">//enumerable é»˜è®¤ä¸º false,
</span><span class="c1"></span>                                <span class="c1">//value é»˜è®¤ä¸º undefined,
</span><span class="c1"></span>                                <span class="c1">//writable é»˜è®¤ä¸º false,
</span><span class="c1"></span>                                <span class="c1">//set é»˜è®¤ä¸º undefined
</span><span class="c1"></span>                                  
    <span class="c1">//æŠ›å‡ºå¼‚å¸¸,å› ä¸ºæœ€å¼€å§‹å®šä¹‰äº† configurable ä¸º false,æ•…åæœŸæ— æ³•å¯¹å…¶è¿›è¡Œå†é…ç½®
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">configurable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">}</span> <span class="p">)</span><span class="p">;</span>
    <span class="c1">//æŠ›å‡ºå¼‚å¸¸,å› ä¸ºæœ€å¼€å§‹å®šä¹‰äº† configurable ä¸º false,æ•…åæœŸæ— æ³•å¯¹å…¶è¿›è¡Œå†é…ç½®,enumerable çš„åŸå€¼ä¸º false
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">true</span><span class="p">}</span> <span class="p">)</span><span class="p">;</span>
    <span class="c1">//æŠ›å‡ºå¼‚å¸¸,å› ä¸ºæœ€å¼€å§‹å®šä¹‰äº† configurable ä¸º false,setçš„åŸå€¼ä¸º undefined
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">set</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span><span class="p">{</span><span class="p">}</span><span class="p">}</span> <span class="p">)</span><span class="p">;</span>
    <span class="c1">//æŠ›å‡ºå¼‚å¸¸,å› ä¸ºæœ€å¼€å§‹å®šä¹‰äº† configurable ä¸º false,æ•…æ— æ³•è¿›è¡Œè¦†ç›–,å°½ç®¡æƒ³ç”¨ä¸€æ ·çš„æ¥è¦†ç›–
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">get</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="k">return</span> <span class="mi">1</span><span class="p">}</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="c1">//æŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸ºæœ€å¼€å§‹å®šä¹‰äº† configurable ä¸º false,æ•…æ— æ³•å°†å…¶è¿›è¡Œé‡æ–°é…ç½®æŠŠå±æ€§æè¿°ç¬¦ä»å­˜å–æè¿°ç¬¦æ”¹ä¸ºæ•°æ®æè¿°ç¬¦
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span> <span class="o">:</span> <span class="mi">12</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span><span class="c1">//è¾“å‡º1
</span><span class="c1"></span>    <span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>      <span class="c1">//æƒ³è¦åˆ é™¤å±æ€§,å°†å¤±è´¥
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span><span class="c1">//è¾“å‡º1
</span><span class="c1"></span>    
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><h2 id="heading3"><strong>æé«˜åŠæ‰©å±•</strong></h2>
<ol>
<li>å±æ€§æè¿°ç¬¦ä¸­å®¹æ˜“è¢«è¯¯å¯¼çš„åœ°æ–¹ä¹‹ <code>writable</code> ä¸ <code>configurable</code></li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperties</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="p">{</span>
        <span class="s2">&#34;a&#34;</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">value</span><span class="o">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="nx">writable</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span><span class="c1">//å¯å†™
</span><span class="c1"></span>            <span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span><span class="c1">//ä¸å¯é…ç½®
</span><span class="c1"></span>            <span class="c1">//enumerable é»˜è®¤ä¸º false ä¸å¯æšä¸¾
</span><span class="c1"></span>        <span class="p">}</span><span class="p">,</span>
        <span class="s2">&#34;b&#34;</span><span class="o">:</span><span class="p">{</span>
            <span class="nx">get</span> <span class="o">:</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
                <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
            <span class="p">}</span><span class="p">,</span>
            <span class="nx">configurable</span><span class="o">:</span><span class="kc">false</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>   <span class="c1">//1
</span><span class="c1"></span>    <span class="nx">o</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>            <span class="c1">//ä¿®æ”¹å€¼æˆåŠŸ,writable ä¸º true
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>   <span class="c1">//2
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;a&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="mi">3</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//åŒæ ·ä¸ºä¿®æ”¹å€¼æˆåŠŸ
</span><span class="c1"></span>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span><span class="p">;</span>   <span class="c1">//3
</span><span class="c1"></span>
    <span class="c1">//å°†å…¶å±æ€§ b çš„å±æ€§æè¿°ç¬¦ä»å­˜å–æè¿°ç¬¦é‡æ–°é…ç½®ä¸ºæ•°æ®æè¿°ç¬¦
</span><span class="c1"></span>    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">o</span><span class="p">,</span><span class="s2">&#34;b&#34;</span><span class="p">,</span><span class="p">{</span><span class="nx">value</span><span class="o">:</span><span class="mi">3</span><span class="p">}</span><span class="p">)</span><span class="p">;</span><span class="c1">//æŠ›å‡ºå¼‚å¸¸,å› ä¸º configurable ä¸º false
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><ol start="2">
<li>é€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ä¼ é€’å±æ€§æè¿°ç¬¦å‚æ•°æ—¶ï¼Œæ˜¯å®šä¹‰ä¸€ä¸ªåŒ¿åçš„å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«å±æ€§æè¿°ç¬¦å†…å®¹ï¼Œè‹¥æ¯å®šä¹‰ä¸€æ¬¡ä¾¿è¦åˆ›å»ºä¸€ä¸ªåŒ¿åå¯¹è±¡ä¼ å…¥ï¼Œå°†ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚æ•…ä¼˜åŒ–å¦‚ä¸‹ï¼š</li>
</ol>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span>

    <span class="c1">//å›æ”¶åŒä¸€å¯¹è±¡,å³å‡å°‘å†…å­˜æµªè´¹
</span><span class="c1"></span>    <span class="kd">function</span> <span class="nx">withValue</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span><span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">withValue</span><span class="p">.</span><span class="nx">d</span> <span class="o">||</span><span class="p">(</span>
            <span class="nx">withValue</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">enumerable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">configurable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">writable</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                <span class="nx">value</span> <span class="o">:</span><span class="kc">null</span>
            <span class="p">}</span>
            <span class="p">)</span><span class="p">;</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">d</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span><span class="s2">&#34;key&#34;</span><span class="p">,</span><span class="nx">withValue</span><span class="p">(</span><span class="s2">&#34;static&#34;</span><span class="p">)</span><span class="p">)</span>
<span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div>]]></content>
		</item>
		
		<item>
			<title>[JS] ç”¨9ç§åŠæ³•è§£å†³ JS é—­åŒ…ç»å…¸é¢è¯•é¢˜ä¹‹ for å¾ªç¯å– i</title>
			<link>https://tangzixiang.github.io/posts/%E7%94%A89%E7%A7%8D%E5%8A%9E%E6%B3%95%E8%A7%A3%E5%86%B3-js-%E9%97%AD%E5%8C%85%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B9%8B-for-%E5%BE%AA%E7%8E%AF%E5%8F%96-i/</link>
			<pubDate>Sat, 17 Oct 2015 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E7%94%A89%E7%A7%8D%E5%8A%9E%E6%B3%95%E8%A7%A3%E5%86%B3-js-%E9%97%AD%E5%8C%85%E7%BB%8F%E5%85%B8%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B9%8B-for-%E5%BE%AA%E7%8E%AF%E5%8F%96-i/</guid>
			<description>æ–‡ç« å†å²ä¹…è¿œï¼Œæœ‰æ—¶é—´å†åŒæ­¥æ›´æ–°å§ ~~
é—­åŒ…  æ­£ç¡®çš„è¯´,åº”è¯¥æ˜¯æŒ‡ä¸€ä¸ªé—­åŒ…åŸŸ,æ¯å½“å£°æ˜äº†ä¸€ä¸ªå‡½æ•°,å®ƒå°±äº§ç”Ÿäº†ä¸€ä¸ªé—­åŒ…åŸŸ(å¯ä»¥è§£é‡Šä¸ºæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„å‡½æ•°æ ˆ),æ¯ä¸ªé—­åŒ…åŸŸ(Function å¯¹è±¡)éƒ½æœ‰ä¸€ä¸ª function scope(ä¸æ˜¯å±æ€§),function scopeå†…é»˜è®¤æœ‰ä¸ªåä¸º Global çš„å…¨å±€å¼•ç”¨(æœ‰äº†è¿™ä¸ªå¼•ç”¨,å°±å¯ä»¥ç›´æ¥è°ƒç”¨ Global çš„å±æ€§æˆ–æ–¹æ³•) å‡¡æ˜¯åœ¨é—­åŒ…åŸŸå†…å£°æ˜çš„å˜é‡æˆ–æ–¹æ³•,å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—® é—­åŒ…åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨çš„å˜é‡æˆ–æ–¹æ³•  (ä¸Šå›¾ä¸º chrome ä¸‹ debug ç¯å¢ƒ)
 å½“åœ¨ä¸€ä¸ªé—­åŒ…åŸŸå†…åŒ…å«å¦ä¸€ä¸ªé—­åŒ…åŸŸæ—¶(ç®€å•çš„è¯´å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…æœ‰å¦ä¸€ä¸ªå‡½æ•°,å½“ç„¶è¿™ä¸ªå†…éƒ¨å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¾é™„äºå¤–éƒ¨å‡½æ•°çš„), æ­¤æ—¶,è‹¥å­é—­åŒ…åŸŸ(å†…éƒ¨çš„é—­åŒ…åŸŸ,å†…éƒ¨å‡½æ•°)ä½¿ç”¨äº†çˆ¶é—­åŒ…åŸŸ(å¤–éƒ¨é—­åŒ…åŸŸ,å¤–éƒ¨å‡½æ•°)çš„ç§æœ‰å˜é‡(åœ¨çˆ¶é—­åŒ…åŸŸä¸­å£°æ˜çš„å˜é‡,çˆ¶é—­åŒ…åŸŸçš„å¤–éƒ¨ç©ºé—´æ— æ³•ç›´æ¥è®¿é—®,ä½†å­é—­åŒ…åŸŸå¯ä»¥è®¿é—®),å­é—­åŒ…åŸŸå³å½“å‰çš„å­å‡½æ•°çš„ function scope ä¼šäº§ç”Ÿä¸€ä¸ª closure å¯¹è±¡å±æ€§,è¿™ä¸ªå¯¹è±¡å±æ€§å†…åŒ…å«çš„æ˜¯å­é—­åŒ…åŸŸå¯¹çˆ¶é—­åŒ…åŸŸçš„æ‰€æœ‰å¼•ç”¨(åªè¦å­é—­åŒ…åŸŸ(å†…éƒ¨å‡½æ•°)è¿˜å­˜æ´»,å…¶çˆ¶é—­åŒ…åŸŸ(å¤–éƒ¨å‡½æ•°)å°±ä¾æ—§å­˜æ´»),å€˜è‹¥åœ¨çˆ¶é—­åŒ…åŸŸå­˜æ´»æœŸé—´å¯¹å…¶ç§æœ‰å˜é‡å†…å®¹è¿›è¡Œä¿®æ”¹,åˆ™å¯¹è¿™äº›çˆ¶é—­åŒ…åŸŸçš„ç§æœ‰å˜é‡è¿›è¡Œå¼•ç”¨çš„å­é—­åŒ…åŸŸä¸­ function scope çš„ closure å¯¹è±¡å±æ€§çš„å†…å®¹ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–,å› ä¸ºè¿™åªæ˜¯å¼•ç”¨.
ä¸¾ä¾‹:
&amp;lt;!DOCTYPE html&amp;gt; &amp;lt;html lang=&amp;#34;en&amp;#34;&amp;gt; &amp;lt;head&amp;gt; &amp;lt;meta charset=&amp;#34;UTF-8&amp;#34;&amp;gt; &amp;lt;title&amp;gt;&amp;lt;/title&amp;gt; &amp;lt;/head&amp;gt; &amp;lt;body&amp;gt; &amp;lt;script type=&amp;#34;text/javascript&amp;#34; charset=&amp;#34;utf-8&amp;#34;&amp;gt; //å‡½æ•° a æœ‰ä¸€ä¸ªç§æœ‰å˜é‡ p å’Œä¸€ä¸ªå†…éƒ¨å‡½æ•° innerA  function a() { //å¤–éƒ¨é—­åŒ…åŸŸ ,ä¸€ä¸ªåä¸º a çš„ Function å¯¹è±¡  var p = 0; //ç§æœ‰å˜é‡ p  var innerA = function () { //å†…éƒ¨é—­åŒ…åŸŸ ,ä¸€ä¸ªåä¸º innerA çš„ Function å¯¹è±¡  console.</description>
			<content type="html"><![CDATA[<p>æ–‡ç« å†å²ä¹…è¿œï¼Œæœ‰æ—¶é—´å†åŒæ­¥æ›´æ–°å§ ~~</p>
<h2 id="heading">é—­åŒ…</h2>
<ol>
<li>æ­£ç¡®çš„è¯´,åº”è¯¥æ˜¯æŒ‡ä¸€ä¸ªé—­åŒ…åŸŸ,æ¯å½“å£°æ˜äº†ä¸€ä¸ªå‡½æ•°,å®ƒå°±äº§ç”Ÿäº†ä¸€ä¸ªé—­åŒ…åŸŸ(å¯ä»¥è§£é‡Šä¸ºæ¯ä¸ªå‡½æ•°éƒ½æœ‰è‡ªå·±çš„å‡½æ•°æ ˆ),æ¯ä¸ªé—­åŒ…åŸŸ(Function å¯¹è±¡)éƒ½æœ‰ä¸€ä¸ª function scope(ä¸æ˜¯å±æ€§),function scopeå†…é»˜è®¤æœ‰ä¸ªåä¸º Global çš„å…¨å±€å¼•ç”¨(æœ‰äº†è¿™ä¸ªå¼•ç”¨,å°±å¯ä»¥ç›´æ¥è°ƒç”¨ Global çš„å±æ€§æˆ–æ–¹æ³•)</li>
<li>å‡¡æ˜¯åœ¨é—­åŒ…åŸŸå†…å£°æ˜çš„å˜é‡æˆ–æ–¹æ³•,å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®</li>
<li>é—­åŒ…åŸŸå¯ä»¥è®¿é—®å¤–éƒ¨çš„å˜é‡æˆ–æ–¹æ³•</li>
</ol>
<p><img src="/assets/527991831-5610b859dd3b8_articlex.png" alt="å›¾ç‰‡æè¿°">
(ä¸Šå›¾ä¸º chrome ä¸‹ debug ç¯å¢ƒ)</p>
<hr>
<p>å½“åœ¨ä¸€ä¸ªé—­åŒ…åŸŸå†…åŒ…å«å¦ä¸€ä¸ªé—­åŒ…åŸŸæ—¶(ç®€å•çš„è¯´å°±æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…æœ‰å¦ä¸€ä¸ªå‡½æ•°,å½“ç„¶è¿™ä¸ªå†…éƒ¨å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¾é™„äºå¤–éƒ¨å‡½æ•°çš„), æ­¤æ—¶,è‹¥å­é—­åŒ…åŸŸ(å†…éƒ¨çš„é—­åŒ…åŸŸ,å†…éƒ¨å‡½æ•°)ä½¿ç”¨äº†çˆ¶é—­åŒ…åŸŸ(å¤–éƒ¨é—­åŒ…åŸŸ,å¤–éƒ¨å‡½æ•°)çš„ç§æœ‰å˜é‡(åœ¨çˆ¶é—­åŒ…åŸŸä¸­å£°æ˜çš„å˜é‡,çˆ¶é—­åŒ…åŸŸçš„å¤–éƒ¨ç©ºé—´æ— æ³•ç›´æ¥è®¿é—®,ä½†å­é—­åŒ…åŸŸå¯ä»¥è®¿é—®),å­é—­åŒ…åŸŸå³å½“å‰çš„å­å‡½æ•°çš„ function scope ä¼šäº§ç”Ÿä¸€ä¸ª closure å¯¹è±¡å±æ€§,è¿™ä¸ªå¯¹è±¡å±æ€§å†…åŒ…å«çš„æ˜¯å­é—­åŒ…åŸŸå¯¹çˆ¶é—­åŒ…åŸŸçš„æ‰€æœ‰å¼•ç”¨(åªè¦å­é—­åŒ…åŸŸ(å†…éƒ¨å‡½æ•°)è¿˜å­˜æ´»,å…¶çˆ¶é—­åŒ…åŸŸ(å¤–éƒ¨å‡½æ•°)å°±ä¾æ—§å­˜æ´»),å€˜è‹¥åœ¨çˆ¶é—­åŒ…åŸŸå­˜æ´»æœŸé—´å¯¹å…¶ç§æœ‰å˜é‡å†…å®¹è¿›è¡Œä¿®æ”¹,åˆ™å¯¹è¿™äº›çˆ¶é—­åŒ…åŸŸçš„ç§æœ‰å˜é‡è¿›è¡Œå¼•ç”¨çš„å­é—­åŒ…åŸŸä¸­ function scope çš„ closure å¯¹è±¡å±æ€§çš„å†…å®¹ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–,å› ä¸ºè¿™åªæ˜¯å¼•ç”¨.</p>
<p>ä¸¾ä¾‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p"></span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span><span class="p"></span><span class="p">&gt;</span>
        <span class="c1">//å‡½æ•° a æœ‰ä¸€ä¸ªç§æœ‰å˜é‡ p å’Œä¸€ä¸ªå†…éƒ¨å‡½æ•° innerA
</span><span class="c1"></span>        <span class="kd">function</span> <span class="nx">a</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>                      <span class="c1">//å¤–éƒ¨é—­åŒ…åŸŸ ,ä¸€ä¸ªåä¸º a çš„ Function å¯¹è±¡
</span><span class="c1"></span>            <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>                      <span class="c1">//ç§æœ‰å˜é‡ p
</span><span class="c1"></span>            <span class="kd">var</span> <span class="nx">innerA</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>      <span class="c1">//å†…éƒ¨é—­åŒ…åŸŸ ,ä¸€ä¸ªåä¸º innerA çš„ Function å¯¹è±¡
</span><span class="c1"></span>                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span><span class="p">;</span>             <span class="c1">//å¯¹å¤–éƒ¨é—­åŒ…åŸŸçš„ç§æœ‰å˜é‡è¿›è¡Œäº†å¼•ç”¨,æ•… innerA å¯¹è±¡çš„ function scope ä¼šäº§ç”Ÿä¸€ä¸ªåä¸º closure çš„å¯¹è±¡å±æ€§,closure å¯¹è±¡å†…å«æœ‰ä¸€ä¸ªåä¸º p çš„å¼•ç”¨
</span><span class="c1"></span>            <span class="p">}</span>

            <span class="nx">innerA</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//è¾“å‡º0
</span><span class="c1"></span>            <span class="nx">p</span><span class="o">++</span><span class="p">;</span>
            <span class="nx">innerA</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//è¾“å‡º1
</span><span class="c1"></span>        <span class="p">}</span>
        <span class="nx">a</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
    <span class="p">&lt;</span><span class="p">/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>ç»“æœå¦‚ä¸‹:
ç¬¬ä¸€æ¬¡è°ƒç”¨innerA
<img src="/assets/4145638513-5610bb5f698ba_articlex.png" alt="å›¾ç‰‡æè¿°">
ç¬¬äºŒæ¬¡è°ƒç”¨ innerA
<img src="/assets/671118991-5610bb7233cdb_articlex.png" alt="å›¾ç‰‡æè¿°">
æ§åˆ¶å°è¾“å‡º
<img src="/assets/1929624999-5610bbac42b66_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="-">å›åˆ°ä¸»é¢˜ é¢è¯•ç»å…¸é—®é¢˜</h2>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p"></span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p"></span><span class="p">&gt;</span><span class="p">&lt;</span><span class="p">/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text/javascript&#34;</span><span class="p"></span><span class="p">&gt;</span>
        <span class="c1">//é¢è¯•ç»å…¸é—®é¢˜:
</span><span class="c1"></span>
        <span class="kd">function</span> <span class="nx">onMyLoad</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
            <span class="cm">/*
</span><span class="cm">            æŠ›å‡ºé—®é¢˜:
</span><span class="cm">                æ­¤é¢˜çš„ç›®çš„æ˜¯æƒ³æ¯æ¬¡ç‚¹å‡»å¯¹åº”ç›®æ ‡æ—¶å¼¹å‡ºå¯¹åº”çš„æ•°å­—ä¸‹æ ‡ 0~4,ä½†å®é™…æ˜¯æ— è®ºç‚¹å‡»å“ªä¸ªç›®æ ‡éƒ½ä¼šå¼¹å‡ºæ•°å­—5
</span><span class="cm">            é—®é¢˜æ‰€åœ¨:
</span><span class="cm">                arr ä¸­çš„æ¯ä¸€é¡¹çš„ onclick å‡ä¸ºä¸€ä¸ªå‡½æ•°å®ä¾‹(Function å¯¹è±¡),è¿™ä¸ªå‡½æ•°å®ä¾‹ä¹Ÿäº§ç”Ÿäº†ä¸€ä¸ªé—­åŒ…åŸŸ,
</span><span class="cm">                è¿™ä¸ªé—­åŒ…åŸŸå¼•ç”¨äº†å¤–éƒ¨é—­åŒ…åŸŸçš„å˜é‡,å…¶ function scope çš„ closure å¯¹è±¡æœ‰ä¸ªåä¸º i çš„å¼•ç”¨,
</span><span class="cm">                å¤–éƒ¨é—­åŒ…åŸŸçš„ç§æœ‰å˜é‡å†…å®¹å‘ç”Ÿå˜åŒ–,å†…éƒ¨é—­åŒ…åŸŸå¾—åˆ°çš„å€¼è‡ªç„¶ä¼šå‘ç”Ÿæ”¹å˜
</span><span class="cm">            */</span>
            <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">)</span><span class="p">;</span>
            <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
                <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
                    <span class="nx">alert</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">&lt;</span><span class="p">/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span> <span class="na">onload</span><span class="o">=</span><span class="s">&#34;onMyLoad()&#34;</span><span class="p"></span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p"></span><span class="p">&gt;</span>äº§å“ä¸€<span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p"></span><span class="p">&gt;</span>äº§å“äºŒ<span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p"></span><span class="p">&gt;</span>äº§å“ä¸‰<span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p"></span><span class="p">&gt;</span>äº§å“å››<span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p"></span><span class="p">&gt;</span>äº§å“äº”<span class="p">&lt;</span><span class="p">/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div><p>è§£å†³åŠæ³•:</p>
<p>è§£å†³åŠæ³•ä¸€</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯:
</span><span class="cm">    å¢åŠ è‹¥å¹²ä¸ªå¯¹åº”çš„é—­åŒ…åŸŸç©ºé—´(è¿™é‡Œé‡‡ç”¨çš„æ˜¯åŒ¿åå‡½æ•°),ä¸“é—¨ç”¨æ¥å­˜å‚¨åŸå…ˆéœ€è¦å¼•ç”¨çš„å†…å®¹(ä¸‹æ ‡),ä¸è¿‡åªé™äºåŸºæœ¬ç±»å‹(åŸºæœ¬ç±»å‹å€¼ä¼ é€’,å¯¹è±¡ç±»å‹å¼•ç”¨ä¼ é€’)
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>

    <span class="c1">//å£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°,è‹¥ä¼ è¿›æ¥çš„æ˜¯åŸºæœ¬ç±»å‹åˆ™ä¸ºå€¼ä¼ é€’,æ•…ä¸ä¼šå¯¹å®å‚äº§ç”Ÿå½±å“,
</span><span class="c1"></span>    <span class="c1">//è¯¥å‡½æ•°å¯¹è±¡æœ‰ä¸€ä¸ªæœ¬åœ°ç§æœ‰å˜é‡arg(å½¢å‚) ,è¯¥å‡½æ•°çš„ function scope çš„ closure å¯¹è±¡å±æ€§æœ‰ä¸¤ä¸ªå¼•ç”¨,ä¸€ä¸ªæ˜¯ arr,ä¸€ä¸ªæ˜¯ i
</span><span class="c1"></span>    <span class="c1">//å°½ç®¡å¼•ç”¨ i çš„å€¼éšå¤–éƒ¨æ”¹å˜ ,ä½†æœ¬åœ°ç§æœ‰å˜é‡(å½¢å‚) arg ä¸ä¼šå—å½±å“,å…¶å€¼åœ¨ä¸€å¼€å§‹è¢«è°ƒç”¨çš„æ—¶å€™å°±å†³å®šäº†.
</span><span class="c1"></span>    <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">arg</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">//onclickå‡½æ•°å®ä¾‹çš„ function scope çš„ closure å¯¹è±¡å±æ€§æœ‰ä¸€ä¸ªå¼•ç”¨ arg,
</span><span class="c1"></span>            <span class="nx">alert</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span><span class="p">;</span>                 <span class="c1">//åªè¦ å¤–éƒ¨ç©ºé—´çš„ arg ä¸å˜,è¿™é‡Œçš„å¼•ç”¨å€¼å½“ç„¶ä¸ä¼šæ”¹å˜
</span><span class="c1"></span>        <span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="p">;</span>                              <span class="c1">//ç«‹åˆ»æ‰§è¡Œè¯¥åŒ¿åå‡½æ•°,ä¼ é€’ä¸‹æ ‡ i(å®å‚)
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•äºŒ</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯:
</span><span class="cm">    å°†ä¸‹æ ‡ä½œä¸ºå¯¹è±¡å±æ€§(name:&#34;i&#34;,value:içš„å€¼)æ·»åŠ åˆ°æ¯ä¸ªæ•°ç»„é¡¹(på¯¹è±¡)ä¸­
</span><span class="cm">*/</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="c1">//ä¸ºå½“å‰æ•°ç»„é¡¹å³å½“å‰ p å¯¹è±¡æ·»åŠ ä¸€ä¸ªåä¸º i çš„å±æ€§,å€¼ä¸ºå¾ªç¯ä½“çš„ i å˜é‡çš„å€¼,
</span><span class="c1"></span>    <span class="c1">//æ­¤æ—¶å½“å‰ p å¯¹è±¡çš„ i å±æ€§å¹¶ä¸æ˜¯å¯¹å¾ªç¯ä½“çš„ i å˜é‡çš„å¼•ç”¨,è€Œæ˜¯ä¸€ä¸ªç‹¬ç«‹p å¯¹è±¡çš„å±æ€§,å±æ€§å€¼åœ¨å£°æ˜çš„æ—¶å€™å°±ç¡®å®šäº†
</span><span class="c1"></span>    <span class="c1">//(åŸºæœ¬ç±»å‹çš„å€¼éƒ½æ˜¯å­˜åœ¨æ ˆä¸­çš„,å½“æœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å˜é‡å£°æ˜å…¶ç­‰äºå¦ä¸€ä¸ªåŸºæœ¬å˜é‡æ—¶,æ­¤æ—¶å¹¶ä¸æ˜¯ä¸¤ä¸ªåŸºæœ¬ç±»å‹å˜é‡éƒ½æŒ‡å‘ä¸€ä¸ªå€¼,è€Œæ˜¯å„è‡ªæœ‰å„è‡ªçš„å€¼,ä½†å€¼æ˜¯ç›¸ç­‰çš„)
</span><span class="c1"></span>    <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">i</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•ä¸‰</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯:
</span><span class="cm">    ä¸è§£å†³åŠæ³•ä¸€æœ‰ç‚¹ç›¸ä¼¼ä½†å´æœ‰ç‚¹ä¸å¤ªç›¸ä¼¼.
</span><span class="cm">    ç›¸ä¼¼ç‚¹:åŒæ ·æ˜¯å¢åŠ è‹¥å¹²ä¸ªå¯¹åº”çš„é—­åŒ…åŸŸç©ºé—´ç”¨æ¥å­˜å‚¨ä¸‹æ ‡
</span><span class="cm">    ä¸åŒç‚¹:è§£å†³åŠæ³•ä¸€æ˜¯åœ¨æ–°å¢çš„åŒ¿åé—­åŒ…ç©ºé—´å†…å®Œæˆäº‹ä»¶çš„ç»‘å®š,è€Œæ­¤ä¾‹æ˜¯å°†äº‹ä»¶ç»‘å®šåœ¨æ–°å¢çš„åŒ¿åå‡½æ•°è¿”å›çš„å‡½æ•°ä¸Š
</span><span class="cm">
</span><span class="cm">    æ­¤æ—¶ç»‘å®šçš„å‡½æ•°ä¸­çš„ function scope ä¸­çš„ closure å¯¹è±¡çš„ å¼•ç”¨ arg æ˜¯æŒ‡å‘å°†å…¶è¿”å›çš„åŒ¿åå‡½æ•°çš„ç§æœ‰å˜é‡ arg
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span><span class="p">{</span>
        <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">arg</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•å››</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯ä¸è§£å†³åŠæ³•ä¸€ç›¸åŒ
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
       <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">temp</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•äº”</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯ä¸è§£å†³åŠæ³•ä¸‰åŠå››ç›¸åŒ
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">temp</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">temp</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span><span class="p">)</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•å…­</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯:
</span><span class="cm">    å°†ä¸‹æ ‡æ·»åŠ ä¸ºç»‘å®šå‡½æ•°çš„å±æ€§
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">.</span><span class="nx">i</span><span class="p">)</span><span class="p">;</span>      <span class="c1">//arguments å‚æ•°å¯¹è±¡  arguments.callee å‚æ•°å¯¹è±¡æ‰€å±å‡½æ•°
</span><span class="c1"></span>    <span class="p">}</span><span class="p">)</span><span class="p">.</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•ä¸ƒ</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯:
</span><span class="cm">    é€šè¿‡ new ä½¿ç”¨ Function çš„æ„é€ å‡½æ•° åˆ›å»º Function å®ä¾‹å®ç°,ç”±äºä¼ å…¥çš„å‡½æ•°ä½“çš„å†…å®¹æ˜¯å­—ç¬¦ä¸²,æ•… Function å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ‹·è´,è€Œæ²¡æœ‰å¾—åˆ° i çš„å¼•ç”¨(è¿™é‡Œæ˜¯å…ˆè·å– i.toString()ç„¶åä¸å‰åå­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²,Function å¯¹å…¶è¿›è¡Œåå‘è§£ææˆ JS ä»£ç )
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;alert(&#34;</span><span class="o">+</span><span class="nx">i</span><span class="o">+</span><span class="s2">&#34;);&#34;</span><span class="p">)</span><span class="p">;</span><span class="c1">//æ¯ new ä¸€ä¸ª Function å¾—åˆ°ä¸€ä¸ª Function å¯¹è±¡(ä¸€ä¸ªå‡½æ•°),æœ‰è‡ªå·±çš„é—­åŒ…åŸŸ
</span><span class="c1"></span><span class="p">}</span>
</code></pre></div><p>è§£å†³åŠæ³•å…«</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="cm">/*
</span><span class="cm">è§£å†³æ€è·¯:
</span><span class="cm">    ç›´æ¥é€šè¿‡ Function è¿”å›ä¸€ä¸ªå‡½æ•°
</span><span class="cm">    ä¸è§£å†³åŠæ³•ä¸ƒçš„ä¸åŒä¹‹å¤„åœ¨äº:
</span><span class="cm">        è§£å†³åŠæ³•ä¸ƒä½¿ç”¨ new,ä½¿ç”¨äº† new,æ­¤æ—¶ Function å‡½æ•°å°±è¢«å½“æˆæ„é€ å™¨å¯ä»¥ç”¨æ¥æ„é€ ä¸€ä¸ª Function å®ä¾‹è¿”å›
</span><span class="cm">        å½“å‰è§£å†³åŠæ³•æ²¡æœ‰ä½¿ç”¨ new ,å³å°† Function å‡½æ•°å½“æˆä¸€ä¸ªå‡½æ•°,ä¼ å…¥å‚æ•°è¿”å›ä¸€ä¸ªæ–°å‡½æ•°;
</span><span class="cm">        å…¶å®æ­¤å¤„ new ä¸ä¸ new åªæ˜¯çš„åŒºåˆ«åœ¨äº:
</span><span class="cm">            ä½¿ç”¨äº† new å³ Function å‡½æ•°å……å½“æ„é€ å™¨,ç”± JS è§£æå™¨ç”Ÿäº§ä¸€ä¸ªæ–°çš„å¯¹è±¡,æ„é€ å™¨å†…çš„ this æŒ‡å‘è¯¥æ–°å¯¹è±¡;
</span><span class="cm">            ä¸å®ç”¨ new å³ Function å‡½æ•°ä¾æ—§æ˜¯å‡½æ•°,ç”±å‡½æ•°å†…éƒ¨è‡ªå·±ç”Ÿäº§ä¸€ä¸ªå®ä¾‹è¿”å›.
</span><span class="cm"> */</span>
<span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;alert(&#34;</span><span class="o">+</span><span class="nx">i</span><span class="o">+</span><span class="s2">&#34;);&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>

</code></pre></div><p>è§£å†³åŠæ³•ä¹
ä½¿ç”¨ES6æ–°è¯­æ³• let å…³é”®å­— ç”±äºæ˜¯æ–°ä¸œè¥¿ å„æµè§ˆå™¨æ”¯æŒä¸åŒ
chrome åŠ operaæ”¯æŒä»¥ä¸‹è¯­æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;application/javascript&#34;</span><span class="p"></span><span class="p">&gt;</span>
    <span class="s2">&#34;use strict&#34;</span><span class="p">;</span><span class="c1">//ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼,å¦åˆ™æŠ¥é”™ SyntaxError: Block-scoped declarations (let, const, function, class) not yet supported outside strict mode
</span><span class="c1"></span>    <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">)</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
        <span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span><span class="c1">//åˆ›å»ºä¸€ä¸ªå—çº§å˜é‡
</span><span class="c1"></span>        <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div><p>åœ¨ chrome æŸ¥çœ‹</p>
<p><img src="/assets/3794450097-5621bb86ed865_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ° j å˜é‡æ˜¯ä¸€ä¸ª block çº§çš„å˜é‡</p>
<p>å¾…å‡½æ•°ç»‘å®šå®Œæˆåçœ‹æ•°ç»„é¡¹:</p>
<p><img src="/assets/21086713-5621bc16b05f6_articlex.png" alt="å›¾ç‰‡æè¿°">
æ­¤æ—¶çš„è¯¥æ•°ç»„é¡¹çš„<!-- raw HTML omitted -->çš„ Block åŸŸæœ‰ä¸ª j å­˜å‚¨çš„å°±æ˜¯å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡
firefoxæ”¯æŒä¸€ä¸‹è¯­æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;application/javascript;version=1.7&#34;</span><span class="p"></span><span class="p">&gt;</span>
    <span class="kd">var</span> <span class="nx">arr</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">)</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="nx">i</span><span class="o">&lt;</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="p">{</span>
        <span class="kd">let</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">alert</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">&lt;</span><span class="p">/</span><span class="nt">script</span><span class="p">&gt;</span>
</code></pre></div><p>ç”±äºæ–°è¯­æ³•å„å¤§å‚å•†çš„æ”¯æŒå°šæœªè§„èŒƒæ•…æš‚ä¸ä¸æ¨èä½¿ç”¨</p>
<p>è§£å†³åŠæ³•å¤§åŒå°å¼‚,åªè¦ç†è§£å…¶ä¸­çš„å®è´¨,å¯ä»¥å†™å‡ºå¤šå¤šçš„è§£å†³åŠæ³•</p>
]]></content>
		</item>
		
		<item>
			<title>[JS] æµ…è°ˆåœ¨ JS ä¸­ä½¿ç”¨ Object çš„ watch æ–¹æ³•ç›‘æ§å¯¹è±¡å±æ€§</title>
			<link>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88%E5%9C%A8js%E4%B8%AD%E4%BD%BF%E7%94%A8object%E7%9A%84watch%E6%96%B9%E6%B3%95%E7%9B%91%E6%8E%A7%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7/</link>
			<pubDate>Fri, 16 Oct 2015 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88%E5%9C%A8js%E4%B8%AD%E4%BD%BF%E7%94%A8object%E7%9A%84watch%E6%96%B9%E6%B3%95%E7%9B%91%E6%8E%A7%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7/</guid>
			<description>MDN å¯¹å…¶çš„è§£é‡Šä¸º:
æ¦‚è¿°: ç›‘è§†ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ˜¯å¦å‘ç”Ÿå˜åŒ–,åœ¨è¯¥å±æ€§å˜åŒ–æ—¶ç«‹å³è§¦å‘æŒ‡å®šçš„å›è°ƒå‡½æ•°. è¯­æ³•: object.watch(prop, handler) å‚æ•°: prop æƒ³è¦ç›‘è§†å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–çš„æŒ‡å®šå¯¹è±¡çš„æŸä¸ªå±æ€§çš„å±æ€§åç§° handler å½“æŒ‡å®šçš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°  åœ¨ DHTML.jså†…æŸ¥çœ‹å…¶å£°æ˜å¦‚ä¸‹:
å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åªé’ˆå¯¹ Gecko å†…æ ¸çš„æµè§ˆå™¨ä½¿ç”¨çš„(FF æ˜¯ä½¿ç”¨çš„ Gecko å†…æ ¸). wacth æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²,ä»£è¡¨éœ€è¦ç›‘è§†çš„å±æ€§å,ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸ªå›è°ƒå‡½æ•° unwatch æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°,ä»£è¡¨éœ€è¦å–æ¶ˆç›‘è§†çš„å±æ€§å.
ä½¿ç”¨ä¸¾ä¾‹:
var o = {p:1}; o.watch(&amp;#34;p&amp;#34;, function (id, oldValue, newValue) { console.log(&amp;#34;o.&amp;#34;+id +&amp;#34; ç”± &amp;#34;+oldValue +&amp;#34; å˜ä¸º &amp;#34;+newValue); return newValue;//æ³¨æ„ç‚¹ }); o.p = 2; o.p = 3; delete o.p; o.p = 4; è¾“å‡ºç»“æœä¸º:
è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å›è°ƒå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå€¼,è¿”å›çš„å€¼ä¼šè¦†ç›–åŸæœ‰çš„å€¼(è‹¥æ— è¿”å›å€¼é»˜è®¤è¿”å›çš„æ˜¯ undefined),å¯ä»¥è¿”å›æ–°å€¼
ä½¿ç”¨watch æ–¹æ³•æ¥ç›‘è§†å¯¹è±¡çš„å±æ€§
//å£°æ˜ä¸€ä¸ªç±» Person = function (name, age) { this.watch(&amp;#34;age&amp;#34;,Person.prototype._isValidAssignment); this.</description>
			<content type="html"><![CDATA[<p>MDN å¯¹å…¶çš„è§£é‡Šä¸º:</p>
<pre><code>æ¦‚è¿°:
    ç›‘è§†ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªå±æ€§æ˜¯å¦å‘ç”Ÿå˜åŒ–,åœ¨è¯¥å±æ€§å˜åŒ–æ—¶ç«‹å³è§¦å‘æŒ‡å®šçš„å›è°ƒå‡½æ•°.
è¯­æ³•:
    object.watch(prop, handler)
å‚æ•°:
    prop
    æƒ³è¦ç›‘è§†å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–çš„æŒ‡å®šå¯¹è±¡çš„æŸä¸ªå±æ€§çš„å±æ€§åç§°
    handler
    å½“æŒ‡å®šçš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶æ‰§è¡Œçš„å›è°ƒå‡½æ•°
</code></pre>
<p>åœ¨ DHTML.jså†…æŸ¥çœ‹å…¶å£°æ˜å¦‚ä¸‹:</p>
<p><img src="/assets/2462527882-561d1d0bc43a1_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åªé’ˆå¯¹ Gecko å†…æ ¸çš„æµè§ˆå™¨ä½¿ç”¨çš„(FF æ˜¯ä½¿ç”¨çš„ Gecko å†…æ ¸).
wacth æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°,ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²,ä»£è¡¨éœ€è¦ç›‘è§†çš„å±æ€§å,ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸ªå›è°ƒå‡½æ•°
unwatch æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°,ä»£è¡¨éœ€è¦å–æ¶ˆç›‘è§†çš„å±æ€§å.</p>
<p>ä½¿ç”¨ä¸¾ä¾‹:</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="p">{</span><span class="nx">p</span><span class="o">:</span><span class="mi">1</span><span class="p">}</span><span class="p">;</span>

<span class="nx">o</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">&#34;p&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;o.&#34;</span><span class="o">+</span><span class="nx">id</span> <span class="o">+</span><span class="s2">&#34; ç”± &#34;</span><span class="o">+</span><span class="nx">oldValue</span> <span class="o">+</span><span class="s2">&#34; å˜ä¸º &#34;</span><span class="o">+</span><span class="nx">newValue</span><span class="p">)</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">newValue</span><span class="p">;</span><span class="c1">//æ³¨æ„ç‚¹
</span><span class="c1"></span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="k">delete</span> <span class="nx">o</span><span class="p">.</span><span class="nx">p</span><span class="p">;</span>
<span class="nx">o</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
</code></pre></div><p>è¾“å‡ºç»“æœä¸º:</p>
<p><img src="/assets/2994811273-561d1f30eac09_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯å›è°ƒå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªå€¼,è¿”å›çš„å€¼ä¼šè¦†ç›–åŸæœ‰çš„å€¼(è‹¥æ— è¿”å›å€¼é»˜è®¤è¿”å›çš„æ˜¯ undefined),å¯ä»¥è¿”å›æ–°å€¼</p>
<p>ä½¿ç”¨watch æ–¹æ³•æ¥ç›‘è§†å¯¹è±¡çš„å±æ€§</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//å£°æ˜ä¸€ä¸ªç±»
</span><span class="c1"></span><span class="nx">Person</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">age</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">&#34;age&#34;</span><span class="p">,</span><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_isValidAssignment</span><span class="p">)</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">,</span><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_isValidAssignment</span><span class="p">)</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>

<span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&#34; , &#34;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>
<span class="c1">//å®šä¹‰è¯­ä¹‰ä¸Šçš„ç§æœ‰æ–¹æ³•
</span><span class="c1"></span><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_isValidAssignment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span><span class="nx">oldVale</span><span class="p">,</span><span class="nx">newValue</span><span class="p">)</span><span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">id</span> <span class="o">==</span> <span class="s2">&#34;name&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">newValue</span> <span class="o">||</span> <span class="nx">newValue</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">)</span><span class="p">)</span><span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">RangeError</span><span class="p">(</span><span class="s2">&#34;ä¸åˆæ³•çš„åå­— &#34;</span><span class="o">+</span> <span class="k">this</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">id</span> <span class="o">==</span> <span class="s2">&#34;age&#34;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">newValue</span> <span class="o">&lt;</span><span class="mi">0</span> <span class="o">||</span> <span class="nx">newValue</span> <span class="o">&gt;</span><span class="mi">200</span><span class="p">)</span><span class="p">)</span><span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nx">RangeError</span><span class="p">(</span><span class="s2">&#34;ä¸åˆæ³•çš„å¹´é¾„ &#34;</span><span class="o">+</span> <span class="k">this</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">newValue</span><span class="p">;</span><span class="c1">//é‡ç‚¹,å¿…é¡»è¿”å›
</span><span class="c1"></span><span class="p">}</span>

<span class="nx">will</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s2">&#34;will&#34;</span><span class="p">,</span><span class="mi">29</span><span class="p">)</span><span class="p">;</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">will</span><span class="p">)</span><span class="p">;</span>

<span class="k">try</span><span class="p">{</span>
    <span class="nx">will</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span><span class="p">;</span>
<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">try</span><span class="p">{</span>
    <span class="nx">will</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span><span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹:
<img src="/assets/350254057-561d20512c0bc_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>æœ€åå¼•å…¥ MDN çš„ä¸€æ®µæè¿°ä¸æ³¨æ„äº‹é¡¹</p>
<p><img src="/assets/3749700858-561d233c71ccd_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
]]></content>
		</item>
		
		<item>
			<title> [JS] æµ…è°ˆ JS åˆ›å»ºå¯¹è±¡çš„ 8 ç§æ¨¡å¼</title>
			<link>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-js-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84-8-%E7%A7%8D%E6%A8%A1%E5%BC%8F/</link>
			<pubDate>Thu, 15 Oct 2015 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88-js-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E7%9A%84-8-%E7%A7%8D%E6%A8%A1%E5%BC%8F/</guid>
			<description>æ‘˜è¦  Objct æ¨¡å¼ å·¥å‚æ¨¡å¼ æ„é€ å™¨æ¨¡å¼ é€šè¿‡ Function å¯¹è±¡å®ç° prototype æ¨¡å¼ æ„é€ å™¨ä¸åŸå‹æ–¹å¼çš„æ··åˆæ¨¡å¼ åŠ¨æ€åŸå‹æ¨¡å¼ æ··åˆå·¥å‚æ¨¡å¼  Object æ¨¡å¼ var o1 = {};//å­—é¢é‡çš„è¡¨ç°å½¢å¼ var o2 = new Object; var o3 = new Object(); var o4 = new Object(null); var o5 = new Object(undefined); var o6 = Object.create(Object.prototype);//ç­‰ä»·äº var o = {};//å³ä»¥ Object.prototype å¯¹è±¡ä¸ºä¸€ä¸ªåŸå‹æ¨¡æ¿,æ–°å»ºä¸€ä¸ªä»¥è¿™ä¸ªåŸå‹æ¨¡æ¿ä¸ºåŸå‹çš„å¯¹è±¡ //åŒºåˆ« var o7 = Object.create(null);//åˆ›å»ºä¸€ä¸ªåŸå‹ä¸º null çš„å¯¹è±¡ åœ¨ chrome é‡ŒæŸ¥çœ‹å„ä¸ªæ–°å»ºå¯¹è±¡çš„åŒºåˆ«: å¯ä»¥çœ‹å‡ºå‰6ç§æ¨¡å¼åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡éƒ½æ˜¯ä¸€æ ·çš„,ç¬¬ä¸ƒç§ä¸åŒç‚¹åœ¨äºå…¶è™½ç„¶ä¹Ÿä¸º Object å¯¹è±¡ä½†å…¶æ— ä»»ä½•å±æ€§(åŒ…æ‹¬æ²¡æœ‰ä»»ä½•å¯ä»¥ç»§æ‰¿çš„å±æ€§,å› ä¸ºåˆ›å»ºçš„æ—¶å€™æ²¡æœ‰æŒ‡å®šå…¶åŸå‹)
å·¥å‚æ¨¡å¼ //å·¥å‚æ–¹æ³•1 é€šè¿‡ä¸€ä¸ªæ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ åˆ©ç”¨ arguments å¯¹è±¡è·å–å‚æ•°è®¾ç½®å±æ€§(å‚æ•°ä¸ç›´è§‚,å®¹æ˜“å‡ºç°é—®é¢˜) function createCar(){ var oTemp = new Object(); oTemp.</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>Objct æ¨¡å¼</li>
<li>å·¥å‚æ¨¡å¼</li>
<li>æ„é€ å™¨æ¨¡å¼</li>
<li>é€šè¿‡ Function å¯¹è±¡å®ç°</li>
<li>prototype æ¨¡å¼</li>
<li>æ„é€ å™¨ä¸åŸå‹æ–¹å¼çš„æ··åˆæ¨¡å¼</li>
<li>åŠ¨æ€åŸå‹æ¨¡å¼</li>
<li>æ··åˆå·¥å‚æ¨¡å¼</li>
</ul>
<h2 id="object-"><strong>Object æ¨¡å¼</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="p">{</span><span class="p">}</span><span class="p">;</span><span class="c1">//å­—é¢é‡çš„è¡¨ç°å½¢å¼
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">o3</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">o4</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">o5</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="kc">undefined</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">o6</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span><span class="p">;</span><span class="c1">//ç­‰ä»·äº var o = {};//å³ä»¥ Object.prototype å¯¹è±¡ä¸ºä¸€ä¸ªåŸå‹æ¨¡æ¿,æ–°å»ºä¸€ä¸ªä»¥è¿™ä¸ªåŸå‹æ¨¡æ¿ä¸ºåŸå‹çš„å¯¹è±¡
</span><span class="c1"></span><span class="c1">//åŒºåˆ«
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">o7</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span><span class="p">;</span><span class="c1">//åˆ›å»ºä¸€ä¸ªåŸå‹ä¸º null çš„å¯¹è±¡
</span></code></pre></div><p>åœ¨ chrome é‡ŒæŸ¥çœ‹å„ä¸ªæ–°å»ºå¯¹è±¡çš„åŒºåˆ«:
<img src="/assets/3840891059-561f067680136_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹å‡ºå‰6ç§æ¨¡å¼åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡éƒ½æ˜¯ä¸€æ ·çš„,ç¬¬ä¸ƒç§ä¸åŒç‚¹åœ¨äºå…¶è™½ç„¶ä¹Ÿä¸º Object å¯¹è±¡ä½†å…¶æ— ä»»ä½•å±æ€§(åŒ…æ‹¬æ²¡æœ‰ä»»ä½•å¯ä»¥ç»§æ‰¿çš„å±æ€§,å› ä¸ºåˆ›å»ºçš„æ—¶å€™æ²¡æœ‰æŒ‡å®šå…¶åŸå‹)</p>
<h2 id="heading1"><strong>å·¥å‚æ¨¡å¼</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//å·¥å‚æ–¹æ³•1 é€šè¿‡ä¸€ä¸ªæ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ åˆ©ç”¨ arguments å¯¹è±¡è·å–å‚æ•°è®¾ç½®å±æ€§(å‚æ•°ä¸ç›´è§‚,å®¹æ˜“å‡ºç°é—®é¢˜)
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">createCar</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
    <span class="kd">var</span> <span class="nx">oTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">oTemp</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">;</span><span class="c1">//ç›´æ¥ç»™å¯¹è±¡æ·»åŠ å±æ€§ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ç›´æ¥çš„å±æ€§
</span><span class="c1"></span>    <span class="nx">oTemp</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">;</span>
    <span class="nx">oTemp</span><span class="p">.</span><span class="nx">showName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span><span class="p">;</span><span class="c1">//æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª showName æ–¹æ³•ç‰ˆæœ¬
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">oTemp</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">createCar</span><span class="p">(</span><span class="s2">&#34;tom&#34;</span><span class="p">)</span><span class="p">.</span><span class="nx">showName</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//åœ¨ JS ä¸­æ²¡æœ‰ä¼ é€’çš„å®å‚,å®é™…å½¢å‚å€¼ä¸º undefined(è¿™é‡Œçš„ age ä¸º undefined)
</span><span class="c1"></span><span class="nx">createCar</span><span class="p">(</span><span class="s2">&#34;tim&#34;</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span><span class="p">.</span><span class="nx">showName</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">createCar</span><span class="p">(</span><span class="s2">&#34;tom&#34;</span><span class="p">)</span> <span class="k">instanceof</span> <span class="nb">Object</span><span class="p">)</span><span class="p">;</span><span class="c1">//true åˆ¤æ–­å¯¹è±¡æ˜¯å¦ Object ç±»æˆ–å­ç±»
</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//å·¥å‚æ–¹æ³•2 é€šè¿‡ä¼ å‚è®¾ç½®å±æ€§(å‚æ•°ç›´è§‚æ˜äº†)
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">createCar</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">)</span><span class="p">{</span>
    <span class="kd">var</span> <span class="nx">oTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
    <span class="nx">oTemp</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span><span class="c1">//ç›´æ¥ç»™å¯¹è±¡æ·»åŠ å±æ€§ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ç›´æ¥çš„å±æ€§
</span><span class="c1"></span>    <span class="nx">oTemp</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
    <span class="nx">oTemp</span><span class="p">.</span><span class="nx">showName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span><span class="p">;</span><span class="c1">//æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª showName æ–¹æ³•ç‰ˆæœ¬
</span><span class="c1"></span>    <span class="k">return</span> <span class="nx">oTemp</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">createCar</span><span class="p">(</span><span class="s2">&#34;tom&#34;</span><span class="p">)</span><span class="p">.</span><span class="nx">showName</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="nx">createCar</span><span class="p">(</span><span class="s2">&#34;tim&#34;</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span><span class="p">.</span><span class="nx">showName</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">createCar</span><span class="p">(</span><span class="s2">&#34;tom&#34;</span><span class="p">)</span> <span class="k">instanceof</span> <span class="nb">Object</span><span class="p">)</span><span class="p">;</span><span class="c1">//true åˆ¤æ–­å¯¹è±¡æ˜¯å¦ Object ç±»æˆ–å­ç±»
</span></code></pre></div><h2 id="heading2"><strong>æ„é€ å™¨æ¨¡å¼</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//æ„é€ å™¨æ–¹æ³•1
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">Car</span><span class="p">(</span><span class="nx">sColor</span><span class="p">,</span><span class="nx">iDoors</span><span class="p">)</span><span class="p">{</span>  <span class="c1">//å£°æ˜ä¸ºæ„é€ å™¨æ—¶éœ€è¦å°†å‡½æ•°åé¦–å­—æ¯å¤§å†™
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">sColor</span><span class="p">;</span>      <span class="c1">//æ„é€ å™¨å†…ç›´æ¥å£°æ˜å±æ€§
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="nx">iDoors</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
    <span class="p">}</span><span class="p">;</span><span class="c1">//æ¯ä¸ª Car å¯¹è±¡éƒ½æœ‰è‡ªå·±çš„ showColoræ–¹æ³•ç‰ˆæœ¬
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">showDoor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">doors</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><p>ä½¿ç”¨æ–¹æ³•1çš„é—®é¢˜å¾ˆæ˜æ˜¾,æ²¡åŠæ³•æ˜¯ showDoor æ–¹æ³•é‡ç”¨,æ¯æ¬¡æ–°å»ºä¸€ä¸ªå¯¹è±¡å°±è¦åœ¨å †é‡Œæ–°å¼€è¾Ÿä¸€ç¯‡ç©ºé—´.æ”¹è¿›å¦‚ä¸‹</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//æ„é€ å™¨æ–¹æ³•2
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">showDoor</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>      <span class="c1">//å®šä¹‰ä¸€ä¸ªå…¨å±€çš„ Function å¯¹è±¡
</span><span class="c1"></span>    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">doors</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Car</span><span class="p">(</span><span class="nx">sColor</span><span class="p">,</span><span class="nx">iDoors</span><span class="p">)</span><span class="p">{</span><span class="c1">//æ„é€ å™¨
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">sColor</span><span class="p">;</span>      <span class="c1">//æ„é€ å™¨å†…ç›´æ¥å£°æ˜å±æ€§
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="nx">iDoors</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showDoor</span> <span class="o">=</span> <span class="nx">showDoor</span><span class="p">;</span><span class="c1">//æ¯ä¸ª Car å¯¹è±¡å…±äº«åŒä¸€ä¸ª showDoor æ–¹æ³•ç‰ˆæœ¬(æ–¹æ³•æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œä¸ç”¨æ‹…å¿ƒå˜é‡è¢«å…±äº«)
</span><span class="c1"></span><span class="p">}</span>

<span class="nx">alert</span><span class="p">(</span><span class="k">new</span> <span class="nx">Car</span><span class="p">(</span><span class="s2">&#34;red&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="p">.</span><span class="nx">showColor</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span><span class="c1">//é€šè¿‡æ„é€ å™¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶è°ƒç”¨å…¶å¯¹è±¡æ–¹æ³•
</span></code></pre></div><p>ä¸Šé¢å‡ºç°çš„é—®é¢˜å°±æ˜¯è¯­ä¹‰ä¸å¤Ÿæ¸…é™¤,ä½“ç°ä¸å‡ºç±»çš„å°è£…æ€§,æ”¹è¿›ä¸º prototype æ¨¡å¼</p>
<h2 id="-function-"><strong>é€šè¿‡ Function å¯¹è±¡å®ç°åˆ›å»ºå¯¹è±¡</strong></h2>
<p>æˆ‘ä»¬çŸ¥é“æ¯å£°æ˜ä¸€ä¸ªå‡½æ•°å®é™…æ˜¯åˆ›å»ºäº†ä¸€ä¸ªFunction å®ä¾‹ <a href="../%E6%B5%85%E8%B0%88%E7%BB%86%E8%AF%B4-js-%E5%87%BD%E6%95%B0callapply%E9%87%8D%E8%BD%BD">JS å‡½æ•°</a>.</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">function_name</span><span class="p">(</span><span class="nx">param1</span><span class="p">,</span><span class="nx">param2</span><span class="p">)</span><span class="p">{</span><span class="nx">alert</span><span class="p">(</span><span class="nx">param1</span><span class="p">)</span><span class="p">;</span><span class="p">}</span>
<span class="c1">//ç­‰ä»·äº
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">function_name</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;param1&#34;</span><span class="p">,</span><span class="s2">&#34;pram2&#34;</span><span class="p">,</span><span class="s2">&#34;alert(param1);&#34;</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">Car2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;sColor&#34;</span><span class="p">,</span><span class="s2">&#34;iDoors&#34;</span><span class="p">,</span>
         <span class="s2">&#34;this.color = sColor;&#34;</span><span class="o">+</span>
         <span class="s2">&#34;this.doors = iDoors;&#34;</span><span class="o">+</span>
         <span class="s2">&#34;this.showColor = function(){ return this.color; }&#34;</span>
<span class="p">)</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="k">new</span> <span class="nx">Car2</span><span class="p">(</span><span class="s2">&#34;blue&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="p">.</span><span class="nx">showColor</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><h2 id="prototype-"><strong>prototype æ¨¡å¼</strong></h2>
<ul>
<li>ç±»é€šè¿‡ prototype å±æ€§æ·»åŠ çš„å±æ€§ä¸æ–¹æ³•éƒ½æ˜¯ç»‘å®šåœ¨è¿™ä¸ªç±»çš„ prototype åŸŸ(å®é™…ä¸ºä¸€ä¸ª Prototype å¯¹è±¡)ä¸­ï¼Œç»‘å®šåˆ°è¿™ä¸ªåŸŸä¸­çš„å±æ€§ä¸æ–¹æ³•åªæœ‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œåªä¼šåˆ›å»ºä¸€æ¬¡.</li>
<li>ç±»çš„å®ä¾‹å¯¹è±¡å¯ä»¥ç›´æ¥åƒè°ƒç”¨è‡ªå·±çš„å±æ€§ä¸€æ ·è°ƒç”¨è¯¥ç±»çš„ prototype åŸŸä¸­çš„å±æ€§ä¸æ–¹æ³•ï¼Œç±»å¯ä»¥é€šè¿‡è°ƒç”¨ prototype å±æ€§æ¥é—´æ¥è°ƒç”¨prototype åŸŸå†…çš„å±æ€§ä¸æ–¹æ³•.</li>
</ul>
<p>æ³¨æ„ï¼šé€šè¿‡ç±»å®ä¾‹åŒ–å‡ºå¯¹è±¡åå¯¹è±¡å†…æ—  prototype å±æ€§ï¼Œä½†å¯¹è±¡å¯ç›´æ¥åƒè®¿é—®å±æ€§ä¸€æ ·çš„è®¿é—®ç±»çš„ prototype åŸŸçš„å†…å®¹ï¼Œå®ä¾‹å¯¹è±¡æœ‰ä¸ªç§æœ‰å±æ€§ __proto__, __proto__ å±æ€§å†…å«æœ‰ç±»çš„ prototype åŸŸå†…çš„å±æ€§ä¸æ–¹æ³•</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Car3</span><span class="p">(</span><span class="p">)</span><span class="p">{</span><span class="p">}</span><span class="c1">//ç”¨ç©ºæ„é€ å‡½æ•°è®¾ç½®ç±»å
</span><span class="c1"></span><span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&#34;blue&#34;</span><span class="p">;</span><span class="c1">//æ¯ä¸ªå¯¹è±¡éƒ½å…±äº«ç›¸åŒå±æ€§
</span><span class="c1"></span><span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drivers</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&#34;Mike&#34;</span><span class="p">,</span><span class="s2">&#34;John&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span><span class="c1">//æ¯ä¸ªå¯¹è±¡å…±äº«ä¸€ä¸ªæ–¹æ³•ç‰ˆæœ¬ï¼Œçœå†…å­˜ã€‚
</span><span class="c1"></span>
<span class="kd">var</span> <span class="nx">car3_1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car3</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">car3_2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car3</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//blue
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//blue
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//blue
</span><span class="c1"></span>
<span class="nx">car3_1</span><span class="p">.</span><span class="nx">drivers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&#34;Bill&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">drivers</span><span class="p">)</span><span class="p">;</span><span class="c1">//&#34;Mike&#34;,&#34;John&#34;,&#34;Bill&#34;
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">drivers</span><span class="p">)</span><span class="p">;</span><span class="c1">//&#34;Mike&#34;,&#34;John&#34;,&#34;Bill&#34;
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">drivers</span><span class="p">)</span><span class="p">;</span><span class="c1">//&#34;Mike&#34;,&#34;John&#34;,&#34;Bill&#34;
</span><span class="c1"></span>
<span class="c1">//ç›´æ¥ä¿®æ”¹å®ä¾‹å¯¹è±¡çš„å±æ€§,è§£æå™¨ä¼šå…ˆå»æ‰¾å®ä¾‹å¯¹è±¡æ˜¯å¦æœ‰è¿™ä¸ªå±æ€§(ä¸ä¼šå»æ‰¾å®ä¾‹å¯¹è±¡çš„ __proto__ å±æ€§å†…çš„é‚£äº›ç±»çš„ prototype å±æ€§ï¼Œè€Œæ˜¯ç›´æ¥æŸ¥çœ‹è¿™ä¸ªå®ä¾‹æ˜¯å¦æœ‰å¯¹åº”çš„å±æ€§(ä¸ __proto__ åŒçº§))
</span><span class="c1"></span><span class="c1">//å¦‚æœæ²¡æœ‰åˆ™ç›´æ¥ç»™è¿™ä¸ªå®ä¾‹å¯¹è±¡æ·»åŠ è¯¥å±æ€§ï¼Œä½†ä¸ä¼šä¿®æ”¹ç±»çš„prototypeåŸŸçš„åŒåå±æ€§ï¼Œæ—¢å®ä¾‹å¯¹è±¡çš„_proto_å±æ€§å†…çš„é‚£äº›ç±» prototype åŸŸå±æ€§ä¸ä¼šè¢«ä¿®æ”¹
</span><span class="c1"></span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&#34;red&#34;</span><span class="p">;</span><span class="c1">//car3_1å¯¹è±¡å†…æ— åä¸º color çš„å¯¹è±¡å±æ€§ï¼Œæ•…å°†è¯¥å±æ€§æ·»åŠ åˆ°è¯¥å¯¹è±¡ä¸Š
</span><span class="c1"></span>
<span class="c1">//è§£æå™¨å¯¹å®ä¾‹å¯¹è±¡è¯»å–å±æ€§å€¼çš„æ—¶å€™ä¼šå…ˆæŸ¥æ‰¾è¯¥å®ä¾‹æœ‰æ— åŒåçš„ç›´æ¥å±æ€§
</span><span class="c1"></span><span class="c1">//å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŸ¥æ‰¾ __proto__ å±æ€§å†…ä¿å­˜çš„é‚£äº› å½“å‰ç±»çš„ prototype åŸŸçš„å±æ€§
</span><span class="c1"></span><span class="c1">//æœ‰å°±è¿”å›ï¼Œæ— åˆ™ç»§ç»­æŸ¥æ‰¾æ˜¯å¦æœ‰åŸå‹é“¾ä¸­çš„å¯¹åº”çš„æ–¹æ³•å±æ€§
</span><span class="c1"></span><span class="c1">//æœ‰å°±è¿”å›ï¼Œæ— åˆ™è¿”å›undefined
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//red
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//blue
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">color2</span><span class="p">)</span><span class="p">;</span><span class="c1">//undefined
</span><span class="c1"></span>
<span class="c1">//ç›´æ¥ä¿®æ”¹ç±»çš„ prototype åŸŸå†…çš„å±æ€§ï¼Œä¸ä¼šå½±å“è¯¥ç±»çš„å®ä¾‹å¯¹è±¡çš„å¯¹è±¡å±æ€§ï¼Œä½†ä¼šå½±å“å®ä¾‹å¯¹è±¡çš„ __proto__ å±æ€§( __proto__ å±æ€§å†…å­˜æ”¾çš„æ˜¯ç±»çš„ prototype åŸŸçš„å†…å®¹)
</span><span class="c1"></span><span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&#34;black&#34;</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//red è¯¥å¯¹è±¡æœ‰åŒåçš„ç›´æ¥å±æ€§ï¼Œæ•…ä¸ä¼šå» __proto__ å±æ€§å†…æŸ¥æ‰¾ç±»çš„ prototype åŸŸçš„å±æ€§
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span><span class="c1">//black å—å½±å“
</span><span class="c1"></span>
<span class="c1">//ç›´æ¥ä¿®æ”¹å®ä¾‹å¯¹è±¡çš„æ–¹æ³•,è§£æå™¨ä¼šå…ˆå»æ‰¾å®ä¾‹å¯¹è±¡æ˜¯å¦æœ‰è¿™ä¸ªæ–¹æ³•(ä¸ä¼šå»æ‰¾å®ä¾‹å¯¹è±¡çš„ __proto__ å±æ€§å†…çš„é‚£äº›ç±»çš„ prototype åŸŸçš„æ–¹æ³•ï¼Œè€Œæ˜¯ç›´æ¥æŸ¥çœ‹è¿™ä¸ªå®ä¾‹æ˜¯å¦æœ‰å¯¹åº”çš„æ–¹æ³•(ä¸ __proto__ åŒçº§))
</span><span class="c1"></span><span class="c1">//å¦‚æœæ²¡æœ‰åˆ™ç›´æ¥ç»™è¿™ä¸ªå®ä¾‹å¯¹è±¡æ·»åŠ è¯¥æ–¹æ³•ï¼Œä½†ä¸ä¼šä¿®æ”¹ç±»çš„prototypeåŸŸçš„åŒåæ–¹æ³•ï¼Œæ—¢å®ä¾‹å¯¹è±¡çš„ __proto__ å±æ€§å†…çš„é‚£äº›ç±» prototype åŸŸæ–¹æ³•ä¸ä¼šè¢«ä¿®æ”¹
</span><span class="c1"></span><span class="c1">//car3_1å¯¹è±¡å†…æ— åä¸º showColor çš„å¯¹è±¡æ–¹æ³•å±æ€§ï¼Œæ•…å°†è¯¥æ–¹æ³•å±æ€§æ·»åŠ åˆ°è¯¥å¯¹è±¡ä¸Š
</span><span class="c1"></span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;new function&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">//è§£æå™¨å¯¹å®ä¾‹å¯¹è±¡è°ƒç”¨æ–¹æ³•å±æ€§çš„æ—¶å€™ä¼šå…ˆæŸ¥æ‰¾è¯¥å®ä¾‹æœ‰æ— åŒåçš„ç›´æ¥æ–¹æ³•å±æ€§
</span><span class="c1"></span><span class="c1">//å¦‚æœæ²¡æœ‰ï¼Œåˆ™æŸ¥æ‰¾_proto_å±æ€§å†…ä¿å­˜çš„é‚£äº› å½“å‰ç±»çš„ prototype åŸŸçš„æ–¹æ³•å±æ€§
</span><span class="c1"></span><span class="c1">//æœ‰å°±è¿”å›ï¼Œæ— åˆ™ç»§ç»­æŸ¥æ‰¾æ˜¯å¦æœ‰åŸå‹é“¾ä¸­çš„å¯¹åº”çš„æ–¹æ³•å±æ€§
</span><span class="c1"></span><span class="c1">//æ‰¾åˆ°å°±è¿”å›,æ— åˆ™æŠ¥é”™
</span><span class="c1"></span>
<span class="nx">car3_1</span><span class="p">.</span><span class="nx">showColor</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//new function
</span><span class="c1"></span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">showColor</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//blue
</span><span class="c1"></span><span class="nx">car3_1</span><span class="p">.</span><span class="nx">abcd</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//ç›´æ¥æŠ¥é”™
</span><span class="c1"></span>
<span class="c1">//ç›´æ¥ä¿®æ”¹ç±»çš„ prototype åŸŸå†…çš„æ–¹æ³•å±æ€§ï¼Œä¸ä¼šå½±å“è¯¥ç±»çš„å®ä¾‹å¯¹è±¡çš„æ–¹æ³•å±æ€§ï¼Œä½†ä¼šå½±å“å®ä¾‹å¯¹è±¡çš„ __proto__ å±æ€§(_proto_å±æ€§å†…å­˜æ”¾çš„æ˜¯ç±»çš„ prototype åŸŸçš„å†…å®¹)
</span><span class="c1"></span><span class="nx">Car3</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&#34;second function&#34;</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">car3_1</span><span class="p">.</span><span class="nx">showColor</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//new function è¯¥å¯¹è±¡æœ‰åŒåçš„æ–¹æ³•å±æ€§ï¼Œæ•…ä¸ä¼šå» __proto__ å±æ€§å†…æŸ¥æ‰¾ç±»çš„ prototype åŸŸçš„æ–¹æ³•å±æ€§
</span><span class="c1"></span><span class="nx">car3_2</span><span class="p">.</span><span class="nx">showColor</span><span class="p">(</span><span class="p">)</span><span class="p">;</span><span class="c1">//second function å—å½±å“
</span></code></pre></div><p>å¯ä»¥çœ‹å‡ºä½¿ç”¨è¯¥æ–¹æ³•è™½ç„¶è¯´æ‰“æ‰“å‡å°‘äº†å†…å­˜çš„æµªè´¹,ä½†ä¾æ—§æœ‰é—®é¢˜,æŸä¸ªå¯¹è±¡çš„å±æ€§ä¸€æ—¦æ”¹å˜,æ‰€æœ‰ç”±è¯¥ç±»å®ä¾‹åŒ–å¾—åˆ°çš„å¯¹è±¡çš„ __proto__ å†…å±æ€§å€¼ä¹Ÿä¼šè·Ÿç€å˜(å®ä¸ºå¼•ç”¨),æ”¹è¿›å¦‚ä¸‹</p>
<h3 id="heading3"><strong>æ„é€ å™¨æ–¹å¼ä¸åŸå‹æ–¹å¼çš„æ··åˆæ¨¡å¼</strong></h3>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//æ¯ä¸ªå¯¹è±¡æœ‰ä¸“å±çš„å±æ€§ä¸ä¼šä¸å…¶ä»–å¯¹è±¡å…±äº«
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">Car4</span><span class="p">(</span><span class="nx">sColor</span><span class="p">,</span><span class="nx">iDoors</span><span class="p">)</span><span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_color</span> <span class="o">=</span> <span class="nx">sColor</span><span class="p">;</span><span class="c1">//ç§æœ‰å±æ€§å˜é‡åç§°å¤´åŠ ä¸‹åˆ’çº¿æ ‡è¯†
</span><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">_doors</span> <span class="o">=</span> <span class="nx">iDoors</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">drivers</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&#34;Mike&#34;</span><span class="p">,</span><span class="s2">&#34;John&#34;</span><span class="p">)</span><span class="p">;</span><span class="c1">//å…¬æœ‰å±æ€§æ ‡è¯†
</span><span class="c1"></span><span class="p">}</span>
<span class="c1">//æ‰€æœ‰å¯¹è±¡å…±äº«ä¸€ä¸ªæ–¹æ³•ç‰ˆæœ¬ï¼Œå‡å°‘å†…å­˜æµªè´¹
</span><span class="c1"></span><span class="nx">Car4</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_color</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">car4_1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car4</span><span class="p">(</span><span class="s2">&#34;red&#34;</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">car4_2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car4</span><span class="p">(</span><span class="s2">&#34;blue&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="p">;</span>

<span class="nx">car4_1</span><span class="p">.</span><span class="nx">drivers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&#34;Bill&#34;</span><span class="p">)</span><span class="p">;</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">car4_1</span><span class="p">.</span><span class="nx">drivers</span><span class="p">)</span><span class="p">;</span><span class="c1">//&#34;Mike&#34;,&#34;John&#34;,&#34;Bill&#34;
</span><span class="c1"></span><span class="nx">alert</span><span class="p">(</span><span class="nx">car4_2</span><span class="p">.</span><span class="nx">drivers</span><span class="p">)</span><span class="p">;</span><span class="c1">//&#34;Mike&#34;,&#34;John&#34;
</span></code></pre></div><p>è¿™ä¹Ÿæ˜¯å¸¸ç”¨çš„åˆ›å»ºå¯¹è±¡æ–¹å¼ä¹‹ä¸€</p>
<h2 id="heading4"><strong>åŠ¨æ€åŸå‹æ¨¡å¼</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Car5</span><span class="p">(</span><span class="nx">sColor</span><span class="p">,</span><span class="nx">iDoors</span><span class="p">,</span><span class="nx">iMpg</span><span class="p">)</span><span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">sColor</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="nx">iDoors</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">mpg</span> <span class="o">=</span> <span class="nx">iMpg</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">drivers</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&#34;Mike&#34;</span><span class="p">,</span><span class="s2">&#34;John&#34;</span><span class="p">)</span><span class="p">;</span>

    <span class="c1">//ä½¿ç”¨æ ‡å¿—(_initialized)æ¥åˆ¤æ–­æ˜¯å¦å·²ç»™åŸå‹èµ‹äºˆäº†ä»»ä½•æ–¹æ³•,ä¿è¯æ–¹æ³•æ°¸è¿œåªè¢«åˆ›å»ºå¹¶èµ‹å€¼ä¸€æ¬¡
</span><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">Car5</span><span class="p">.</span><span class="nx">_initialized</span> <span class="o">==</span> <span class="s2">&#34;undefined&#34;</span><span class="p">)</span><span class="p">{</span><span class="c1">//å› ä¸ºè¿™é‡Œçš„æ ‡è®°æ˜¯é™„åŠ åœ¨ç±»ä¸Š,æ•…å¦‚æœåæœŸç›´æ¥å¯¹å…¶è¿›è¡Œä¿®æ”¹,è¿˜æ˜¯æœ‰å¯èƒ½å‡ºç°å†æ¬¡åˆ›å»ºçš„æƒ…å†µ
</span><span class="c1"></span>        <span class="nx">Car5</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span><span class="c1">//ä¸ºCar5æ·»åŠ ä¸€ä¸ªå­˜æ”¾åœ¨ prototype åŸŸçš„æ–¹æ³•
</span><span class="c1"></span>            <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span>
        <span class="p">}</span><span class="p">;</span>
        <span class="nx">Car5</span><span class="p">.</span><span class="nx">_initialized</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span><span class="c1">//è®¾ç½®ä¸€ä¸ªé™æ€å±æ€§
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">car5_1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car5</span><span class="p">(</span><span class="s2">&#34;red&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">car5_2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car5</span><span class="p">(</span><span class="s2">&#34;red&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">25</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¿™ç§æ¨¡å¼ä½¿å¾—å®šä¹‰ç±»åƒå¼ºç±»å‹è¯­è¨€ä¾‹å¦‚ java ç­‰è¯­è¨€çš„å®šä¹‰æ¨¡å¼</p>
<h2 id="heading5"><strong>æ··åˆå·¥å‚æ¨¡å¼</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Car6</span><span class="p">(</span><span class="p">)</span><span class="p">{</span>
    <span class="kd">var</span> <span class="nx">oTempCar</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">;</span>
    <span class="nx">oTempCar</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="s2">&#34;blue&#34;</span><span class="p">;</span>
    <span class="nx">oTempCar</span><span class="p">.</span><span class="nx">doors</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="nx">oTempCar</span><span class="p">.</span><span class="nx">showColor</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">color</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">oTempCar</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">car6</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Car6</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>ç”±äºåœ¨ Car6()æ„é€ å‡½æ•°å†…éƒ¨è°ƒç”¨äº† new è¿ç®—ç¬¦,æ‰€ä»¥å°†å¿½ç•¥ç¬¬äºŒä¸ª new è¿ç®—ç¬¦(ä½äºæ„é€ å‡½æ•°ä¹‹å¤–),
åœ¨æ„é€ å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å¯¹è±¡è¢«ä¼ é€’å›å˜é‡car6,è¿™ç§æ–¹å¼åœ¨å¯¹è±¡æ–¹æ³•çš„å†…éƒ¨ç®¡ç†æ–¹é¢ä¸ç»å…¸æ–¹å¼(å·¥å‚æ–¹æ³•)æœ‰ç€ç›¸åŒçš„é—®é¢˜.åº”å°½é‡é¿å…</p>
]]></content>
		</item>
		
		<item>
			<title>[JS] æµ…è°ˆç»†è¯´ JS å‡½æ•°(call,apply,é‡è½½)</title>
			<link>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88%E7%BB%86%E8%AF%B4-js-%E5%87%BD%E6%95%B0callapply%E9%87%8D%E8%BD%BD/</link>
			<pubDate>Mon, 12 Oct 2015 00:00:00 +0000</pubDate>
			
			<guid>https://tangzixiang.github.io/posts/%E6%B5%85%E8%B0%88%E7%BB%86%E8%AF%B4-js-%E5%87%BD%E6%95%B0callapply%E9%87%8D%E8%BD%BD/</guid>
			<description>æ‘˜è¦  ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ å‡½æ•°çš„å£°æ˜ä¸è°ƒç”¨ å‡½æ•°çš„é‡è½½ å‡½æ•°çš„ç‹¬ç«‹æ€§  ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ å¼•ç”¨ W3School çš„åŸè¯:
å‡½æ•°æ˜¯ä¸€ç»„å¯ä»¥éšæ—¶éšåœ°è¿è¡Œçš„è¯­å¥ã€‚ å‡½æ•°æ˜¯ ECMAScript çš„æ ¸å¿ƒã€‚ å‡½æ•°æ˜¯ç”±è¿™æ ·çš„æ–¹å¼è¿›è¡Œå£°æ˜çš„ï¼šå…³é”®å­— functionã€å‡½æ•°åã€ä¸€ç»„å‚æ•°ï¼Œä»¥åŠç½®äºæ‹¬å·ä¸­çš„å¾…æ‰§è¡Œä»£ç ã€‚ å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š function functionName(arg0, arg1, ... argN) { statements }  å‡½æ•°çš„å£°æ˜ä¸è°ƒç”¨ //å£°æ˜å‡½æ•°çš„4ç§æ–¹æ³•  //æ–¹æ³•ä¸€ ç›´æ¥å£°æ˜ function speak(word){ console.log(word) } //æ–¹æ³•äºŒ æŒ‡å®šä¸€ä¸ªåŒ¿åå‡½æ•° å°†å…¶èµ‹ç»™ä¸€ä¸ªå˜é‡,åé¢å¯ä»¥ç›´æ¥é€šè¿‡è¯¥å˜é‡è°ƒç”¨è¯¥å‡½æ•° var speak2 = function (word) { console.log(word); };//å®šä¹‰åŒ¿åå‡½æ•°éœ€è¦æ³¨æ„æœ€åéœ€è¦åŠ åˆ†å·  //æ–¹æ³•ä¸‰ ä½¿ç”¨ Functionå¯¹è±¡ ç”Ÿæˆä¸€ä¸ªå‡½æ•°å®ä¾‹ var speak3 = new Function(&amp;#34;word&amp;#34;,&amp;#34;console.log(word);&amp;#34;); //æ–¹æ³•å›› ä½¿ç”¨ Functionå‡½æ•° è¿”å›å‡½æ•°å®ä¾‹ var speak4 = Function(&amp;#34;word&amp;#34;,&amp;#34;console.log(word);&amp;#34;); è°ƒç”¨å‡½æ•°åŸºæœ¬æ–¹æ³•
speak(&amp;#34;hello world for global !</description>
			<content type="html"><![CDATA[<h2 id="heading">æ‘˜è¦</h2>
<ul>
<li>ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ</li>
<li>å‡½æ•°çš„å£°æ˜ä¸è°ƒç”¨</li>
<li>å‡½æ•°çš„é‡è½½</li>
<li>å‡½æ•°çš„ç‹¬ç«‹æ€§</li>
</ul>
<h2 id="heading1"><strong>ä»€ä¹ˆæ˜¯å‡½æ•°ï¼Ÿ</strong></h2>
<p>å¼•ç”¨ W3School çš„åŸè¯:</p>
<pre><code>å‡½æ•°æ˜¯ä¸€ç»„å¯ä»¥éšæ—¶éšåœ°è¿è¡Œçš„è¯­å¥ã€‚

å‡½æ•°æ˜¯ ECMAScript çš„æ ¸å¿ƒã€‚

å‡½æ•°æ˜¯ç”±è¿™æ ·çš„æ–¹å¼è¿›è¡Œå£°æ˜çš„ï¼šå…³é”®å­— functionã€å‡½æ•°åã€ä¸€ç»„å‚æ•°ï¼Œä»¥åŠç½®äºæ‹¬å·ä¸­çš„å¾…æ‰§è¡Œä»£ç ã€‚

å‡½æ•°çš„åŸºæœ¬è¯­æ³•æ˜¯è¿™æ ·çš„ï¼š
function functionName(arg0, arg1, ... argN) {
  statements
}
</code></pre>
<h2 id="heading2"><strong>å‡½æ•°çš„å£°æ˜ä¸è°ƒç”¨</strong></h2>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="c1">//å£°æ˜å‡½æ•°çš„4ç§æ–¹æ³•
</span><span class="c1"></span>
<span class="c1">//æ–¹æ³•ä¸€ ç›´æ¥å£°æ˜
</span><span class="c1"></span><span class="kd">function</span> <span class="nx">speak</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span><span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">//æ–¹æ³•äºŒ æŒ‡å®šä¸€ä¸ªåŒ¿åå‡½æ•° å°†å…¶èµ‹ç»™ä¸€ä¸ªå˜é‡,åé¢å¯ä»¥ç›´æ¥é€šè¿‡è¯¥å˜é‡è°ƒç”¨è¯¥å‡½æ•°
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">speak2</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">word</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">word</span><span class="p">)</span><span class="p">;</span>
<span class="p">}</span><span class="p">;</span><span class="c1">//å®šä¹‰åŒ¿åå‡½æ•°éœ€è¦æ³¨æ„æœ€åéœ€è¦åŠ åˆ†å·
</span><span class="c1"></span>
<span class="c1">//æ–¹æ³•ä¸‰ ä½¿ç”¨ Functionå¯¹è±¡ ç”Ÿæˆä¸€ä¸ªå‡½æ•°å®ä¾‹ 
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">speak3</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;word&#34;</span><span class="p">,</span><span class="s2">&#34;console.log(word);&#34;</span><span class="p">)</span><span class="p">;</span>

<span class="c1">//æ–¹æ³•å›› ä½¿ç”¨ Functionå‡½æ•° è¿”å›å‡½æ•°å®ä¾‹
</span><span class="c1"></span><span class="kd">var</span> <span class="nx">speak4</span> <span class="o">=</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&#34;word&#34;</span><span class="p">,</span><span class="s2">&#34;console.log(word);&#34;</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p><strong>è°ƒç”¨å‡½æ•°åŸºæœ¬æ–¹æ³•</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">speak</span><span class="p">(</span><span class="s2">&#34;hello world for global !&#34;</span><span class="p">)</span><span class="p">;</span>

<span class="k">this</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&#34;hello world for this !&#34;</span><span class="p">)</span><span class="p">;</span>

<span class="nb">window</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="s2">&#34;hello world for window !&#34;</span><span class="p">)</span><span class="p">;</span>

</code></pre></div><p><strong>è°ƒç”¨å‡½æ•°çš„é«˜çº§æ–¹æ³•</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="nx">speak</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="s2">&#34;hello world with call !&#34;</span><span class="p">)</span><span class="p">;</span><span class="c1">//null ä»£è¡¨æ˜¯ç”¨å…¨å±€å¯¹è±¡ window è°ƒç”¨
</span><span class="c1"></span>
<span class="nx">speak</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span><span class="p">[</span><span class="s2">&#34;hello world with apply !&#34;</span><span class="p">]</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¾“å‡ºç»“æœ:
<img src="/assets/3058469592-561bba707d079_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<h3 id="heading3">æ–¹æ³•ä¸€:</h3>
<p>è¿™é‡Œå¤§å®¶ä¸è¨€è€Œå–»,ç®€å•æ˜äº†,ç›´æ¥å°±æ˜¯å£°æ˜äº†ä¸€ä¸ªå‡½æ•°,éœ€è¦æŒ‡å‡ºçš„æ˜¯,é»˜è®¤å†™çš„å‡½æ•°åœ¨ä¸ä¾é™„å…¶ä»–å¯¹è±¡çš„æƒ…å†µä¸‹å‡ä¸ºå…¨å±€å‡½æ•°,å³æˆä¸º window å¯¹è±¡çš„æˆå‘˜,å¯ä»¥ç›´æ¥ä½¿ç”¨ window(Window å¯¹è±¡çš„å®ä¾‹,Window å¯¹è±¡å®ç°äº†æ ¸å¿ƒ JavaScript æ‰€å®šä¹‰çš„æ‰€æœ‰å…¨å±€å±æ€§å’Œæ–¹æ³•)è°ƒç”¨,æˆ–è€…é€šè¿‡ this è°ƒç”¨,åœ¨è¿™é‡Œ JS é¡¶å±‚ä»£ç ä¸­ this æŒ‡å‘çš„å°±æ˜¯ window</p>
<p>æ¯å½“æˆ‘ä»¬ä½¿ç”¨æ–¹æ³•ä¸€å£°æ˜äº†ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,å®é™…æ˜¯ç”Ÿæˆäº†ä¸€ä¸ª Function å¯¹è±¡çš„å®ä¾‹.å³æ¯ä¸ªå‡½æ•°å…¶å®è´¨éƒ½æ˜¯ä¸€ä¸ª Function å¯¹è±¡å®ä¾‹.</p>
<p>æ³¨æ„:
JS è§£æå™¨æ¯è§£æåˆ°ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,éƒ½ä¼šåœ¨å †å†…å­˜å†…åˆ’åˆ†å‡ºä¸€å—ç©ºé—´æ¥å­˜å‚¨åˆ›å»ºè¯¥ Function å®ä¾‹</p>
<h3 id="heading4">æ–¹æ³•äºŒ:</h3>
<p>é¦–å…ˆ JS è§£æå™¨è§£æåˆ°ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,åœ¨å †å†…å­˜å†…åˆ’åˆ†å‡ºä¸€å—ç©ºé—´æ¥å­˜å‚¨åˆ›å»ºè¯¥ Function å®ä¾‹,æ¥ç€åœ¨å½“å‰æ ˆå†…å­˜
åˆ›å»ºä¸€ä¸ªå« speak2 çš„å˜é‡,è¿™ä¸ªå˜é‡æœ‰ä¸ªå€¼,è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªåœ°å€,æŒ‡å‘çš„æ˜¯å †å†…å­˜ä¸­çš„é‚£ä¸ª Function å®ä¾‹.å®é™…ä¸Šè¿™å°±æ˜¯å¤§åé¼é¼çš„å¼•ç”¨.</p>
<h3 id="heading5">æ–¹æ³•ä¸‰:</h3>
<p>ä¸æ–¹æ³•ä¸€å’Œæ–¹æ³•äºŒä¸åŒçš„æ˜¯,å‰ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯å£°æ˜å¥½è®©è§£æå™¨å»è§£æ,è®©è§£æå™¨ç”Ÿæˆ Function å®ä¾‹(å°±æ˜¯ä¸Šé¢å£°æ˜çš„å‡½æ•°,è§£æå™¨è°ƒç”¨ Function æ„é€ å™¨æ¥ç”Ÿæˆå®ä¾‹,è¿™äº›æ­¥éª¤æ˜¯æˆ‘ä»¬çœ‹ä¸åˆ°çš„),æ–¹æ³•ä¸‰æ˜¯æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ Function æ„é€ å™¨ç”Ÿæˆ Function å®ä¾‹(æ­¥éª¤æŒæ¡åœ¨è‡ªå·±çš„æ‰‹é‡Œ)</p>
<h3 id="heading6">æ–¹æ³•å››:</h3>
<p>ä¸æ–¹æ³•ä¸‰ä¸åŒçš„åœ°æ–¹å°±æ˜¯æ²¡æœ‰ new,åœ¨è¿™é‡Œ new ä¸æ²¡ new çš„åŒºåˆ«å°±æ˜¯å½“æœ‰ new çš„æ—¶å€™ Function å‡½æ•°å……å½“ä¸€ä¸ªæ„é€ å™¨,new åè¿”å›çš„å°±æ˜¯å®ä¾‹åŒ–åå¾—åˆ°çš„å¯¹è±¡(æ­¤æ—¶Function å†…éƒ¨çš„ thisæŒ‡å‘çš„å°±æ˜¯å½“å‰ç”Ÿæˆçš„å¯¹è±¡),ä¸ä½¿ç”¨ new çš„è¯å°±æ˜¯æŠŠ Function å‡½æ•°çœ‹åšä¸€ä¸ªæ™®é€šå‡½æ•°ç›´æ¥è°ƒç”¨,ç›´æ¥è°ƒç”¨ Function å‡½æ•°è®©å…¶åœ¨å†…éƒ¨(æˆ‘ä»¬çœ‹ä¸åˆ°)new ä¸€ä¸ªå®ä¾‹è¿”å›,æœ¬è´¨æ˜¯ä¸€æ ·çš„.</p>
<h3 id="call--apply-"><strong>call æ–¹æ³•ä¸ apply æ–¹æ³•</strong></h3>
<p>æŸ¥çœ‹EcmaScript.js
<img src="/assets/3719987583-561bc70feffbe_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥çœ‹åˆ° call æ–¹æ³•ä¸ apply æ–¹æ³•çš„åŒºåˆ«:</p>
<ul>
<li>ä»–ä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡çš„æ˜¯è°ƒç”¨è¯¥æ–¹æ³•å¯¹è±¡</li>
<li>call æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯å˜æ•°ç»„å‚æ•°,å³å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°,éä¼ å…¥ä¸€ä¸ªæ•°ç»„.ä¼ å…¥çš„å¤šä¸ªå‚æ•°å¯¹åº”çš„æ˜¯è¢«è°ƒç”¨æ–¹æ³•çš„å„å‚æ•°.</li>
<li>apply æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡,å³å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„å¯¹è±¡,æ•°ç»„å¯¹è±¡çš„æ¯é¡¹å¯¹åº”çš„æ˜¯è¢«è°ƒç”¨çš„æ–¹æ³•çš„å„å‚æ•°.</li>
</ul>
<h2 id="heading7"><strong>å‡½æ•°çš„é‡è½½</strong></h2>
<p>åœ¨ JS ä¸­,å¹¶ä¸åƒå…¶ä»–å¼ºç±»å‹è¯­è¨€ä¸€æ ·å¯ä»¥å£°æ˜é‡è½½å‡½æ•°,è‹¥åœ¨åŸå…ˆå£°æ˜çš„å‡½æ•°åå†å£°æ˜ä¸€ä¸ªä¸åŒå‚æ•°æ•°é‡çš„å‡½æ•°(JSæ˜¯å¼±è¯­è¨€, å£°æ˜çš„å‡½æ•°ä¸éœ€è¦æŒ‡æ˜å‚æ•°ç±»å‹),è§£æå™¨ä¼šç”¨åé¢å£°æ˜çš„å‡½æ•°è¦†ç›–å‰é¢å£°æ˜çš„å‡½æ•°.é‚£æˆ‘ä»¬è¯¥å¦‚ä½•å®ç°å‘¢.</p>
<h3 id="arguments-"><strong>arguments å¯¹è±¡</strong></h3>
<p>åœ¨æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªarguments å±æ€§,åŒæ ·æŸ¥çœ‹ EcmaScript.js
<img src="/assets/1185226343-561bcb5feb50b_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å½“ç”Ÿæˆä¸€ä¸ªå‡½æ•°å®ä¾‹å,è§£æå™¨ä¼šèµ‹ç»™ arguments å±æ€§ä¸€ä¸ª Arguments å¯¹è±¡å®ä¾‹,è¿™ä¸ªå®ä¾‹æ˜¯ä»€ä¹ˆ,å†çœ‹ EcmaScript.js
<img src="/assets/3778388675-561bcc1fd1002_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>å¯ä»¥å¾—çŸ¥å…¶ä¸ºä¸€ä¸ªå¯¹è±¡åŒæ—¶ä¸ºæ•°ç»„å¯¹è±¡çš„å­ç±»,æ•…å¯ä»¥å°†å…¶å½“åˆæ•°ç»„å¯¹è±¡ä½¿ç”¨.
å‡½æ•°å®ä¾‹ä¸­çš„ arguments å¯¹è±¡(å¯ä»¥ç®—æ˜¯ä¸€ä¸ªæ•°ç»„)çš„æ•°ç»„é¡¹å†…å®¹ä¾¿æ˜¯æˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°æ—¶è¿›è¡Œä¼ é€’çš„å‚æ•°.åªè¦æˆ‘ä»¬æœ‰ä¼ å‚,è¿™ä¸ªå±æ€§å°±æœ‰æ•°ç»„é¡¹,å¦åˆ™æ•°ç»„é•¿åº¦ä¸º0,æ•…æˆ‘ä»¬å¯ä»¥é€šè¿‡ arguments.length æ¥æŸ¥çœ‹å…¶å¾—åˆ°çš„å½¢å‚çš„æ•°é‡.</p>
<p>æœ‰äº†ä¸Šé¢çš„åŸºç¡€ä¾¿å¯å®ç°é‡è½½å‡½æ•°
è¿™é‡Œå¼•ç”¨ W3School çš„ä¾‹å­</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">doAdd</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="p">)</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">doAdd</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="p">;</span>	    <span class="c1">//è¾“å‡º &#34;15&#34;
</span><span class="c1"></span><span class="nx">doAdd</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span><span class="p">;</span>	<span class="c1">//è¾“å‡º &#34;60&#34;
</span></code></pre></div><h2 id="heading8"><strong>å‡½æ•°çš„ç‹¬ç«‹æ€§</strong></h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“,æ¯å½“æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªå‡½æ•°,å…¶å®é™…ä¸ºä¸€ä¸ª Function å®ä¾‹,é‚£å®ƒç‹¬ç«‹åœ¨å“ªå‘¢,å¦‚ä½•ä½“ç°å‘¢
çœ‹ä¸€ä¸‹ä»£ç :</p>
<div class="highlight"><pre class="chroma"><code class="language-javascript" data-lang="javascript"><span class="kd">function</span> <span class="nx">Dog</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">)</span><span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">Cat</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span><span class="nx">age</span><span class="p">)</span><span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="nx">age</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">showName</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">dog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Dog</span><span class="p">(</span><span class="s2">&#34;wangwang&#34;</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">cat</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cat</span><span class="p">(</span><span class="s2">&#34;miaomiao&#34;</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="p">;</span>

<span class="nx">dog</span><span class="p">.</span><span class="nx">showName</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="nx">cat</span><span class="p">.</span><span class="nx">showName</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
<span class="nx">dog</span><span class="p">.</span><span class="nx">showName</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">cat</span><span class="p">)</span><span class="p">;</span>
</code></pre></div><p>è¾“å‡ºç»“æœä¸º:
<img src="/assets/664011739-561bd5cc72416_articlex.png" alt="å›¾ç‰‡æè¿°"></p>
<p>è§£é‡Š:</p>
<p>æ¯å½“æˆ‘ä»¬åœ¨å‡½æ•°å†…ä½¿ç”¨ this çš„æ—¶å€™,æ— éè¿™å‡ ç§æƒ…å†µ:</p>
<ol>
<li>ä½œä¸ºæ„é€ å™¨ç”Ÿæˆçš„å®ä¾‹å¯¹è±¡</li>
<li>ä½œä¸ºè°ƒç”¨å½“å‰æ–¹æ³•çš„å¯¹è±¡</li>
<li>åœ¨ JS é¡¶å±‚ä»£ç å¯ä»¥ä½¿ç”¨ this ä»£è¡¨ window è°ƒç”¨å…¨å±€å‡½æ•°ç­‰</li>
</ol>
<p>æ•…å½“æˆ‘ä»¬ä½¿ç”¨ call æ–¹æ³•è°ƒç”¨æŸä¸ªå¯¹è±¡çš„æ–¹æ³•æ—¶,è™½ç„¶ä»ä»£ç è¯­ä¹‰ä¸Šçœ‹,è¿™ä¸ªæ‰€å±æ–¹æ³•æ˜¯å±äºè¯¥å¯¹è±¡çš„(showName å±äº Dog æˆ– Cat),ä½†æ˜¯ç”±äºå‡½æ•°æœ‰ç”¨å…¶ç‰¹æ®Šçš„ç‹¬ç«‹æ€§å³æœ‰ä»¥ä¸Šå‡ ä¸ªå…³äº this çš„ç‰¹ç‚¹,å¯¼è‡´æœ€ç»ˆçš„ç»“æœæ˜¯ä¸åŒçš„.</p>
<p>å½“æˆ‘ä»¬ç›´æ¥è°ƒç”¨ dog çš„ showName æ–¹æ³•æ—¶,showName æ–¹æ³•å†…çš„ this æŒ‡å‘çš„æ˜¯è¯¥dog å¯¹è±¡(Dog å®ä¾‹).</p>
<p>æˆ‘ä»¬çŸ¥é“è°ƒç”¨ call æ–¹æ³•æ—¶éœ€è¦ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°å³ä¸ºè°ƒç”¨å½“å‰å‡½æ•°äº¦æˆ–æ–¹æ³•çš„å¯¹è±¡,æ­¤æ—¶è¢«è°ƒç”¨çš„æ–¹æ³•çš„ this æŒ‡å‘çš„å®é™…ä¸ºä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°.å³å½“æˆ‘ä»¬é€šè¿‡ call è°ƒé€š dog çš„ showName æ–¹æ³•æ—¶,
ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ cat å¯¹è±¡,ä»£è¡¨ dog çš„ showName æ–¹æ³•çš„ this æ­¤æ—¶æŒ‡å‘çš„ä¸æ˜¯ dog æ˜¯ cat.æœ€åè¾“å‡ºçš„å½“ç„¶æ˜¯ cat çš„å†…å®¹ã€‚</p>
<p>æœ€åæŒ‡å‡º:åœ¨å¯¹å‡½æ•°è¿›è¡Œä¼ å‚æ—¶,è‹¥ä¼ çš„æ˜¯ JS çš„åŸºæœ¬ç±»å‹,åˆ™ä¸ºå€¼ä¼ é€’,å¦åˆ™ä¸ºå¼•ç”¨ä¼ é€’ï¼ˆä¼ é€’çš„æ˜¯å‚æ•°çš„åœ°å€ï¼‰ã€‚</p>
]]></content>
		</item>
		
	</channel>
</rss>
